<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>微信脚本 WXS</title>
  <link rel="stylesheet" href="../css/common2025.css">
  <base target="_blank">
</head>

<body>
  <header>
    <h1>微信脚本</h1>
    <span>&commat;WXS</span>
  </header>
  <section>
    <ul>
      <li><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxs/">WXS</a> - WeiXin Script -
        微信自己的脚本系统；类似 JavaScript</li>
      <li>WXS 与 JavaScript 是不同的语言，有自己的语法，并不和 JavaScript 一致</li>
      <li>通常作为过滤器使用：对渲染的数据进行额外处理，如格式定制、大小写转换</li>
      <li>和 Vue 的计算属性功能差不多</li>
      <li>采用 ES5 的语法，据说要被淘汰了。。。</li>
    </ul>
    <h3>模块</h3>
    <ul>
      <li>WXS 代码可以编写在 wxml 文件中的 &lt;wxs&gt; 标签内，或以 .wxs 为后缀名的文件内</li>
      <li>每一个 .wxs 文件和 &lt;wxs&gt; 标签都是一个单独的模块</li>
      <li>每个模块都有自己独立的作用域。即在一个模块里面定义的变量与函数，默认为私有的，对其他模块不可见</li>
      <li>一个模块要想对外暴露其内部的私有变量与函数，只能通过 module.exports 实现</li>
    </ul>
    <div class="tips">
      <div>更多用来封装方法|函数：对数据2次处理，避免数据污染</div>
      <div>一个模块只完成一个逻辑</div>
      <div>模块名使用语义化，其中的方法可以任性</div>
    </div>
    <h3>&lt;wxs&gt;</h3>
    <ul>
      <li>用于定义一个模块，包括 模块名称、模块内容、模块暴露的接口</li>
      <li>也可以使用 src 引入其它模块文件</li>
      <li>直接结构中编辑；仅适用当前页面</li>
    </ul>
    <div>[<span class="iconfont icon-keyboard"></span>] 将变量 str 转换大写</div>
    <div>
      <pre>
&lt;wxs module="toUpperCase"&gt;
    module.exports.fn = function (str) {
        return str.toUpperCase()
    }
&lt;/wxs&gt;
&lt;view&gt;{{toUpperCase.fn(msg)}}&lt;/view&gt;</pre>
    </div>
    <h3>.wxs</h3>
    <ul>
      <li>以文件的形式提供业务逻辑</li>
      <li>文件名就是模块名</li>
      <li>后缀名为 .wxs</li>
      <li>更适合代码共享</li>
    </ul>
    <div>[<span class="iconfont icon-keyboard"></span>] 将变量 str 转换大写</div>
    <ul>
      <li>创建 .wxs 文件，编辑业务逻辑如下</li>
      <pre>
// upperCase.wxs
module.exports.fn = function (str) {
    return str.toUpperCase()
}</pre>
      <li>在结构中使用属性 src 引入并指定模块名 module</li>
      <pre>&lt;wxs src="../../utils/upperCase.wxs" module="upperCase"&gt;&lt;/wxs&gt;</pre>
      <li>使用</li>
      <pre>&lt;view&gt;{{upperCase.fn(msg)}}&lt;/view&gt;</pre>
    </ul>
  </section>
  <div id="footer"></div>
  <script src="/utils/custom/footer.js"></script>
</body>

</html>