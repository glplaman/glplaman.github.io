import{bc as le,e as g,S as de,d as w,O as ae,D as ue,b2 as ce,g as H,y as pe,_ as O,I as ie,A as G,G as ve,bd as he,a6 as fe,be as ge,Q as xe,a0 as ye,a1 as me,al as Ae,x as Z,N as ne,U as Pe,i as be,bf as Ie,bg as we,aa as Se,aT as Te,bh as _e,a7 as Ce,bi as Me,l as De,aN as re,bj as Ee,j as He,E as Oe}from"./installCanvasRenderer-Dz4YvAYh.js";import{k as Be,A as ke}from"./AxisBuilder-CJ6ixypU.js";function K(a,t,e){e=e||{};var i=a.coordinateSystem,n=t.axis,r={},o=n.getAxesOnZeroOf()[0],s=n.position,l=o?"onZero":s,d=n.dim,c=i.getRect(),u=[c.x,c.x+c.width,c.y,c.y+c.height],p={left:0,right:1,top:0,bottom:1,onZero:2},v=t.get("offset")||0,h=d==="x"?[u[2]-v,u[3]+v]:[u[0]-v,u[1]+v];if(o){var y=o.toGlobalCoord(o.dataToCoord(0));h[p.onZero]=Math.max(Math.min(y,h[1]),h[0])}r.position=[d==="y"?h[p[l]]:u[0],d==="x"?h[p[l]]:u[3]],r.rotation=Math.PI/2*(d==="x"?0:1);var f={top:-1,bottom:1,left:-1,right:1};r.labelDirection=r.tickDirection=r.nameDirection=f[s],r.labelOffset=o?h[p[s]]-h[p.onZero]:0,t.get(["axisTick","inside"])&&(r.tickDirection=-r.tickDirection),le(e.labelInside,t.get(["axisLabel","inside"]))&&(r.labelDirection=-r.labelDirection);var x=t.get(["axisLabel","rotate"]);return r.labelRotate=l==="top"?-x:x,r.z2=1,r}function It(a){return a.get("coordinateSystem")==="cartesian2d"}function wt(a){var t={xAxisModel:null,yAxisModel:null};return g(t,function(e,i){var n=i.replace(/Model$/,""),r=a.getReferringComponents(n,de).models[0];t[i]=r}),t}function Le(a,t){var e={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return ze(e,a,t),e.seriesInvolved&&Ve(e,a),e}function ze(a,t,e){var i=t.getComponent("tooltip"),n=t.getComponent("axisPointer"),r=n.get("link",!0)||[],o=[];g(e.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=M(s.model),d=a.coordSysAxesInfo[l]={};a.coordSysMap[l]=s;var c=s.model,u=c.getModel("tooltip",i);if(g(s.getAxes(),w(y,!1,null)),s.getTooltipAxes&&i&&u.get("show")){var p=u.get("trigger")==="axis",v=u.get(["axisPointer","type"])==="cross",h=s.getTooltipAxes(u.get(["axisPointer","axis"]));(p||v)&&g(h.baseAxes,w(y,v?"cross":!0,p)),v&&g(h.otherAxes,w(y,"cross",!1))}function y(f,x,A){var m=A.model.getModel("axisPointer",n),b=m.get("show");if(!(!b||b==="auto"&&!f&&!V(m))){x==null&&(x=m.get("triggerTooltip")),m=f?Re(A,u,n,t,f,x):m;var C=m.get("snap"),_=m.get("triggerEmphasis"),P=M(A.model),S=x||C||A.type==="category",B=a.axesInfo[P]={key:P,axis:A,coordSys:s,axisPointerModel:m,triggerTooltip:x,triggerEmphasis:_,involveSeries:S,snap:C,useHandle:V(m),seriesModels:[],linkGroup:null};d[P]=B,a.seriesInvolved=a.seriesInvolved||S;var D=Ge(r,A);if(D!=null){var k=o[D]||(o[D]={axesInfo:{}});k.axesInfo[P]=B,k.mapper=r[D].mapper,B.linkGroup=k}}}})}function Re(a,t,e,i,n,r){var o=t.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};g(s,function(p){l[p]=ae(o.get(p))}),l.snap=a.type!=="category"&&!!r,o.get("type")==="cross"&&(l.type="line");var d=l.label||(l.label={});if(d.show==null&&(d.show=!1),n==="cross"){var c=o.get(["label","show"]);if(d.show=c??!0,!r){var u=l.lineStyle=o.get("crossStyle");u&&ue(d,u.textStyle)}}return a.model.getModel("axisPointer",new ce(l,e,i))}function Ve(a,t){t.eachSeries(function(e){var i=e.coordinateSystem,n=e.get(["tooltip","trigger"],!0),r=e.get(["tooltip","show"],!0);!i||n==="none"||n===!1||n==="item"||r===!1||e.get(["axisPointer","show"],!0)===!1||g(a.coordSysAxesInfo[M(i.model)],function(o){var s=o.axis;i.getAxis(s.dim)===s&&(o.seriesModels.push(e),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=e.getData().count())})})}function Ge(a,t){for(var e=t.model,i=t.dim,n=0;n<a.length;n++){var r=a[n]||{};if(L(r[i+"AxisId"],e.id)||L(r[i+"AxisIndex"],e.componentIndex)||L(r[i+"AxisName"],e.name))return n}}function L(a,t){return a==="all"||H(a)&&pe(a,t)>=0||a===t}function Ne(a){var t=N(a);if(t){var e=t.axisPointerModel,i=t.axis.scale,n=e.option,r=e.get("status"),o=e.get("value");o!=null&&(o=i.parse(o));var s=V(e);r==null&&(n.status=s?"show":"hide");var l=i.getExtent().slice();l[0]>l[1]&&l.reverse(),(o==null||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),n.value=o,s&&(n.status=t.axis.scale.isBlank()?"hide":"show")}}function N(a){var t=(a.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[M(a)]}function Ze(a){var t=N(a);return t&&t.axisPointerModel}function V(a){return!!a.get(["handle","show"])}function M(a){return a.type+"||"+a.id}var $={},Ke=function(a){O(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,i,n,r){this.axisPointerClass&&Ne(e),a.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(e,n,!0)},t.prototype.updateAxisPointer=function(e,i,n,r){this._doUpdateAxisPointerClass(e,n,!1)},t.prototype.remove=function(e,i){var n=this._axisPointer;n&&n.remove(i)},t.prototype.dispose=function(e,i){this._disposeAxisPointer(i),a.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(e,i,n){var r=t.getAxisPointerClass(this.axisPointerClass);if(r){var o=Ze(e);o?(this._axisPointer||(this._axisPointer=new r)).render(e,o,i,n):this._disposeAxisPointer(i)}},t.prototype._disposeAxisPointer=function(e){this._axisPointer&&this._axisPointer.dispose(e),this._axisPointer=null},t.registerAxisPointerClass=function(e,i){$[e]=i},t.getAxisPointerClass=function(e){return e&&$[e]},t.type="axis",t}(ie),T=G(),U=ae,z=ne,$e=function(){function a(){this._dragging=!1,this.animationThreshold=15}return a.prototype.render=function(t,e,i,n){var r=e.get("value"),o=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=i,!(!n&&this._lastValue===r&&this._lastStatus===o)){this._lastValue=r,this._lastStatus=o;var s=this._group,l=this._handle;if(!o||o==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var d={};this.makeElOption(d,r,t,e,i);var c=d.graphicKey;c!==this._lastGraphicKey&&this.clear(i),this._lastGraphicKey=c;var u=this._moveAnimation=this.determineAnimation(t,e);if(!s)s=this._group=new ve,this.createPointerEl(s,d,t,e),this.createLabelEl(s,d,t,e),i.getZr().add(s);else{var p=w(W,e,u);this.updatePointerEl(s,d,p),this.updateLabelEl(s,d,p,e)}X(s,e,!0),this._renderHandle(r)}},a.prototype.remove=function(t){this.clear(t)},a.prototype.dispose=function(t){this.clear(t)},a.prototype.determineAnimation=function(t,e){var i=e.get("animation"),n=t.axis,r=n.type==="category",o=e.get("snap");if(!o&&!r)return!1;if(i==="auto"||i==null){var s=this.animationThreshold;if(r&&n.getBandWidth()>s)return!0;if(o){var l=N(t).seriesDataCount,d=n.getExtent();return Math.abs(d[0]-d[1])/l>s}return!1}return i===!0},a.prototype.makeElOption=function(t,e,i,n,r){},a.prototype.createPointerEl=function(t,e,i,n){var r=e.pointer;if(r){var o=T(t).pointerEl=new he[r.type](U(e.pointer));t.add(o)}},a.prototype.createLabelEl=function(t,e,i,n){if(e.label){var r=T(t).labelEl=new fe(U(e.label));t.add(r),F(r,n)}},a.prototype.updatePointerEl=function(t,e,i){var n=T(t).pointerEl;n&&e.pointer&&(n.setStyle(e.pointer.style),i(n,{shape:e.pointer.shape}))},a.prototype.updateLabelEl=function(t,e,i,n){var r=T(t).labelEl;r&&(r.setStyle(e.label.style),i(r,{x:e.label.x,y:e.label.y}),F(r,n))},a.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var e=this._axisPointerModel,i=this._api.getZr(),n=this._handle,r=e.getModel("handle"),o=e.get("status");if(!r.get("show")||!o||o==="hide"){n&&i.remove(n),this._handle=null;return}var s;this._handle||(s=!0,n=this._handle=ge(r.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(d){xe(d.event)},onmousedown:z(this._onHandleDragMove,this,0,0),drift:z(this._onHandleDragMove,this),ondragend:z(this._onHandleDragEnd,this)}),i.add(n)),X(n,e,!1),n.setStyle(r.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=r.get("size");H(l)||(l=[l,l]),n.scaleX=l[0]/2,n.scaleY=l[1]/2,ye(this,"_doDispatchAxisPointer",r.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,s)}},a.prototype._moveHandleToValue=function(t,e){W(this._axisPointerModel,!e&&this._moveAnimation,this._handle,R(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},a.prototype._onHandleDragMove=function(t,e){var i=this._handle;if(i){this._dragging=!0;var n=this.updateHandleTransform(R(i),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=n,i.stopAnimation(),i.attr(R(n)),T(i).lastProp=null,this._doDispatchAxisPointer()}},a.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var e=this._payloadInfo,i=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:i.axis.dim,axisIndex:i.componentIndex}]})}},a.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},a.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),i=this._group,n=this._handle;e&&i&&(this._lastGraphicKey=null,i&&e.remove(i),n&&e.remove(n),this._group=null,this._handle=null,this._payloadInfo=null),me(this,"_doDispatchAxisPointer")},a.prototype.doClear=function(){},a.prototype.buildLabel=function(t,e,i){return i=i||0,{x:t[i],y:t[1-i],width:e[i],height:e[1-i]}},a}();function W(a,t,e,i){oe(T(e).lastProp,i)||(T(e).lastProp=i,t?Ae(e,i,a):(e.stopAnimation(),e.attr(i)))}function oe(a,t){if(Z(a)&&Z(t)){var e=!0;return g(t,function(i,n){e=e&&oe(a[n],i)}),!!e}else return a===t}function F(a,t){a[t.get(["label","show"])?"show":"hide"]()}function R(a){return{x:a.x||0,y:a.y||0,rotation:a.rotation||0}}function X(a,t,e){var i=t.get("z"),n=t.get("zlevel");a&&a.traverse(function(r){r.type!=="group"&&(i!=null&&(r.z=i),n!=null&&(r.zlevel=n),r.silent=e)})}const Ue=$e;function We(a){var t=a.get("type"),e=a.getModel(t+"Style"),i;return t==="line"?(i=e.getLineStyle(),i.fill=null):t==="shadow"&&(i=e.getAreaStyle(),i.stroke=null),i}function Fe(a,t,e,i,n){var r=e.get("value"),o=Ye(r,t.axis,t.ecModel,e.get("seriesDataIndices"),{precision:e.get(["label","precision"]),formatter:e.get(["label","formatter"])}),s=e.getModel("label"),l=Te(s.get("padding")||0),d=s.getFont(),c=_e(o,d),u=n.position,p=c.width+l[1]+l[3],v=c.height+l[0]+l[2],h=n.align;h==="right"&&(u[0]-=p),h==="center"&&(u[0]-=p/2);var y=n.verticalAlign;y==="bottom"&&(u[1]-=v),y==="middle"&&(u[1]-=v/2),Xe(u,p,v,i);var f=s.get("backgroundColor");(!f||f==="auto")&&(f=t.get(["axisLine","lineStyle","color"])),a.label={x:u[0],y:u[1],style:Ce(s,{text:o,font:d,fill:s.getTextColor(),padding:l,backgroundColor:f}),z2:10}}function Xe(a,t,e,i){var n=i.getWidth(),r=i.getHeight();a[0]=Math.min(a[0]+t,n)-t,a[1]=Math.min(a[1]+e,r)-e,a[0]=Math.max(a[0],0),a[1]=Math.max(a[1],0)}function Ye(a,t,e,i,n){a=t.scale.parse(a);var r=t.scale.getLabel({value:a},{precision:n.precision}),o=n.formatter;if(o){var s={value:Be(t,{value:a}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};g(i,function(l){var d=e.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,u=d&&d.getDataParams(c);u&&s.seriesData.push(u)}),Pe(o)?r=o.replace("{value}",r):be(o)&&(r=o(s))}return r}function se(a,t,e){var i=Me();return Ie(i,i,e.rotation),we(i,i,e.position),Se([a.dataToCoord(t),(e.labelOffset||0)+(e.labelDirection||1)*(e.labelMargin||0)],i)}function je(a,t,e,i,n,r){var o=ke.innerTextLayout(e.rotation,0,e.labelDirection);e.labelMargin=n.get(["label","margin"]),Fe(t,i,n,r,{position:se(i.axis,a,e),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function Qe(a,t,e){return e=e||0,{x1:a[e],y1:a[1-e],x2:t[e],y2:t[1-e]}}function qe(a,t,e){return e=e||0,{x:a[e],y:a[1-e],width:t[e],height:t[1-e]}}var Je=function(a){O(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.makeElOption=function(e,i,n,r,o){var s=n.axis,l=s.grid,d=r.get("type"),c=Y(l,s).getOtherAxis(s).getGlobalExtent(),u=s.toGlobalCoord(s.dataToCoord(i,!0));if(d&&d!=="none"){var p=We(r),v=et[d](s,u,c);v.style=p,e.graphicKey=v.type,e.pointer=v}var h=K(l.model,n);je(i,e,h,n,r,o)},t.prototype.getHandleTransform=function(e,i,n){var r=K(i.axis.grid.model,i,{labelInside:!1});r.labelMargin=n.get(["handle","margin"]);var o=se(i.axis,e,r);return{x:o[0],y:o[1],rotation:r.rotation+(r.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,i,n,r){var o=n.axis,s=o.grid,l=o.getGlobalExtent(!0),d=Y(s,o).getOtherAxis(o).getGlobalExtent(),c=o.dim==="x"?0:1,u=[e.x,e.y];u[c]+=i[c],u[c]=Math.min(l[1],u[c]),u[c]=Math.max(l[0],u[c]);var p=(d[1]+d[0])/2,v=[p,p];v[c]=u[c];var h=[{verticalAlign:"middle"},{align:"center"}];return{x:u[0],y:u[1],rotation:e.rotation,cursorPoint:v,tooltipOption:h[c]}},t}(Ue);function Y(a,t){var e={};return e[t.dim+"AxisIndex"]=t.index,a.getCartesian(e)}var et={line:function(a,t,e){var i=Qe([t,e[0]],[t,e[1]],j(a));return{type:"Line",subPixelOptimize:!0,shape:i}},shadow:function(a,t,e){var i=Math.max(1,a.getBandWidth()),n=e[1]-e[0];return{type:"Rect",shape:qe([t-i/2,e[0]],[i,n],j(a))}}};function j(a){return a.dim==="x"?0:1}const tt=Je;var at=function(a){O(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(De);const it=at;var I=G(),nt=g;function rt(a,t,e){if(!re.node){var i=t.getZr();I(i).records||(I(i).records={}),ot(i,t);var n=I(i).records[a]||(I(i).records[a]={});n.handler=e}}function ot(a,t){if(I(a).initialized)return;I(a).initialized=!0,e("click",w(Q,"click")),e("mousemove",w(Q,"mousemove")),e("globalout",lt);function e(i,n){a.on(i,function(r){var o=dt(t);nt(I(a).records,function(s){s&&n(s,r,o.dispatchAction)}),st(o.pendings,t)})}}function st(a,t){var e=a.showTip.length,i=a.hideTip.length,n;e?n=a.showTip[e-1]:i&&(n=a.hideTip[i-1]),n&&(n.dispatchAction=null,t.dispatchAction(n))}function lt(a,t,e){a.handler("leave",null,e)}function Q(a,t,e,i){t.handler(a,e,i)}function dt(a){var t={showTip:[],hideTip:[]},e=function(i){var n=t[i.type];n?n.push(i):(i.dispatchAction=e,a.dispatchAction(i))};return{dispatchAction:e,pendings:t}}function q(a,t){if(!re.node){var e=t.getZr(),i=(I(e).records||{})[a];i&&(I(e).records[a]=null)}}var ut=function(a){O(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,i,n){var r=i.getComponent("tooltip"),o=e.get("triggerOn")||r&&r.get("triggerOn")||"mousemove|click";rt("axisPointer",n,function(s,l,d){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&d({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(e,i){q("axisPointer",i)},t.prototype.dispose=function(e,i){q("axisPointer",i)},t.type="axisPointer",t}(ie);const ct=ut;function pt(a,t){var e=[],i=a.seriesIndex,n;if(i==null||!(n=t.getSeriesByIndex(i)))return{point:[]};var r=n.getData(),o=Ee(r,a);if(o==null||o<0||H(o))return{point:[]};var s=r.getItemGraphicEl(o),l=n.coordinateSystem;if(n.getTooltipPosition)e=n.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)if(a.isStacked){var d=l.getBaseAxis(),c=l.getOtherAxis(d),u=c.dim,p=d.dim,v=u==="x"||u==="radius"?1:0,h=r.mapDimension(p),y=[];y[v]=r.get(h,o),y[1-v]=r.get(r.getCalculationInfo("stackResultDimension"),o),e=l.dataToPoint(y)||[]}else e=l.dataToPoint(r.getValues(He(l.dimensions,function(x){return r.mapDimension(x)}),o))||[];else if(s){var f=s.getBoundingRect().clone();f.applyTransform(s.transform),e=[f.x+f.width/2,f.y+f.height/2]}return{point:e,el:s}}var J=G();function vt(a,t,e){var i=a.currTrigger,n=[a.x,a.y],r=a,o=a.dispatchAction||ne(e.dispatchAction,e),s=t.getComponent("axisPointer").coordSysAxesInfo;if(s){E(n)&&(n=pt({seriesIndex:r.seriesIndex,dataIndex:r.dataIndex},t).point);var l=E(n),d=r.axesInfo,c=s.axesInfo,u=i==="leave"||E(n),p={},v={},h={list:[],map:{}},y={showPointer:w(ft,v),showTooltip:w(gt,h)};g(s.coordSysMap,function(x,A){var m=l||x.containPoint(n);g(s.coordSysAxesInfo[A],function(b,C){var _=b.axis,P=At(d,b);if(!u&&m&&(!d||P)){var S=P&&P.value;S==null&&!l&&(S=_.pointToData(n)),S!=null&&ee(b,S,y,!1,p)}})});var f={};return g(c,function(x,A){var m=x.linkGroup;m&&!v[A]&&g(m.axesInfo,function(b,C){var _=v[C];if(b!==x&&_){var P=_.value;m.mapper&&(P=x.axis.scale.parse(m.mapper(P,te(b),te(x)))),f[x.key]=P}})}),g(f,function(x,A){ee(c[A],x,y,!0,p)}),xt(v,c,p),yt(h,n,a,o),mt(c,o,e),p}}function ee(a,t,e,i,n){var r=a.axis;if(!(r.scale.isBlank()||!r.containData(t))){if(!a.involveSeries){e.showPointer(a,t);return}var o=ht(t,a),s=o.payloadBatch,l=o.snapToValue;s[0]&&n.seriesIndex==null&&Oe(n,s[0]),!i&&a.snap&&r.containData(l)&&l!=null&&(t=l),e.showPointer(a,t,s),e.showTooltip(a,o,l)}}function ht(a,t){var e=t.axis,i=e.dim,n=a,r=[],o=Number.MAX_VALUE,s=-1;return g(t.seriesModels,function(l,d){var c=l.getData().mapDimensionsAll(i),u,p;if(l.getAxisTooltipData){var v=l.getAxisTooltipData(c,a,e);p=v.dataIndices,u=v.nestestValue}else{if(p=l.getData().indicesOfNearest(c[0],a,e.type==="category"?.5:null),!p.length)return;u=l.getData().get(c[0],p[0])}if(!(u==null||!isFinite(u))){var h=a-u,y=Math.abs(h);y<=o&&((y<o||h>=0&&s<0)&&(o=y,s=h,n=u,r.length=0),g(p,function(f){r.push({seriesIndex:l.seriesIndex,dataIndexInside:f,dataIndex:l.getData().getRawIndex(f)})}))}}),{payloadBatch:r,snapToValue:n}}function ft(a,t,e,i){a[t.key]={value:e,payloadBatch:i}}function gt(a,t,e,i){var n=e.payloadBatch,r=t.axis,o=r.model,s=t.axisPointerModel;if(!(!t.triggerTooltip||!n.length)){var l=t.coordSys.model,d=M(l),c=a.map[d];c||(c=a.map[d]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},a.list.push(c)),c.dataByAxis.push({axisDim:r.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:i,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:n.slice()})}}function xt(a,t,e){var i=e.axesInfo=[];g(t,function(n,r){var o=n.axisPointerModel.option,s=a[r];s?(!n.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!n.useHandle&&(o.status="hide"),o.status==="show"&&i.push({axisDim:n.axis.dim,axisIndex:n.axis.model.componentIndex,value:o.value})})}function yt(a,t,e,i){if(E(t)||!a.list.length){i({type:"hideTip"});return}var n=((a.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:e.tooltipOption,position:e.position,dataIndexInside:n.dataIndexInside,dataIndex:n.dataIndex,seriesIndex:n.seriesIndex,dataByCoordSys:a.list})}function mt(a,t,e){var i=e.getZr(),n="axisPointerLastHighlights",r=J(i)[n]||{},o=J(i)[n]={};g(a,function(d,c){var u=d.axisPointerModel.option;u.status==="show"&&d.triggerEmphasis&&g(u.seriesDataIndices,function(p){var v=p.seriesIndex+" | "+p.dataIndex;o[v]=p})});var s=[],l=[];g(r,function(d,c){!o[c]&&l.push(d)}),g(o,function(d,c){!r[c]&&s.push(d)}),l.length&&e.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&e.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function At(a,t){for(var e=0;e<(a||[]).length;e++){var i=a[e];if(t.axis.dim===i.axisDim&&t.axis.model.componentIndex===i.axisIndex)return i}}function te(a){var t=a.axis.model,e={},i=e.axisDim=a.axis.dim;return e.axisIndex=e[i+"AxisIndex"]=t.componentIndex,e.axisName=e[i+"AxisName"]=t.name,e.axisId=e[i+"AxisId"]=t.id,e}function E(a){return!a||a[0]==null||isNaN(a[0])||a[1]==null||isNaN(a[1])}function St(a){Ke.registerAxisPointerClass("CartesianAxisPointer",tt),a.registerComponentModel(it),a.registerComponentView(ct),a.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var e=t.axisPointer.link;e&&!H(e)&&(t.axisPointer.link=[e])}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=Le(t,e)}),a.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},vt)}export{Ke as A,St as a,pt as b,wt as f,Ye as g,It as i,K as l,rt as r,q as u};
