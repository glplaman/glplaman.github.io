import{C as N,r as u,A as y,_ as S,D as v,a as i,E as G,e as p,c as r,z as I,T as L,p as w,k as C,d as s,o as $,F,m as T,f as k,N as b,g as _,t as n}from"./index-CLJThBxz.js";import{u as B}from"./cart-Cci83ke8.js";const x=N("good",()=>{let e="https://glpla.github.io/utils/data/coffee.json",o=u([]),a=u(!1),t=u("");return{good:o,isLoading:a,errMsg:t,fetchGood:async()=>{a.value=!0,t.value="loading...";try{const c=await y.get(e);o.value=c.data.cont,t.value="loading ok"}catch(c){t.value=c.message}finally{a.value=!1,t.value="loading done"}},testFn:async()=>{a.value=!0,t.value="loading...";const c=await y.get(e);o.value=c.data.cont,a.value=!1,t.value="loading ok"}}}),V=e=>(w("data-v-f2580fd6"),e=e(),C(),e),D={key:0,class:"msg"},E=V(()=>s("div",{class:"modal-cont"},[s("div",{class:"item",style:{"--deg":"0"}}),s("div",{class:"item",style:{"--deg":"1"}}),s("div",{class:"item",style:{"--deg":"2"}}),s("div",{class:"item",style:{"--deg":"3"}}),s("div",{class:"item",style:{"--deg":"4"}}),s("div",{class:"item",style:{"--deg":"5"}}),s("div",{class:"item",style:{"--deg":"6"}}),s("div",{class:"item",style:{"--deg":"7"}}),s("div",{class:"item",style:{"--deg":"8"}}),s("div",{class:"item",style:{"--deg":"9"}}),s("div",{class:"item",style:{"--deg":"10"}}),s("div",{class:"item",style:{"--deg":"11"}}),s("div",{class:"item",style:{"--deg":"12"}}),s("div",{class:"item",style:{"--deg":"13"}}),s("div",{class:"item",style:{"--deg":"14"}}),s("div",{class:"item",style:{"--deg":"15"}}),s("div",{class:"item",style:{"--deg":"16"}}),s("div",{class:"item",style:{"--deg":"17"}})],-1)),M=[E],j={__name:"Loading",setup(e){const o=x();let a=v(()=>o.isLoading);return(t,g)=>(i(),G(L,{to:"body"},[p(a)?(i(),r("div",D,M)):I("",!0)]))}},z=S(j,[["__scopeId","data-v-f2580fd6"]]),A=e=>(w("data-v-e87e658c"),e=e(),C(),e),O={class:"good"},q={key:0,class:"wrap"},H=["src"],J={class:"info"},K={class:"title"},P={class:"flavour"},Q={class:"desc"},R={class:"price"},U={class:"price-inner"},W={class:"price-discount"},X=["onClick"],Y=A(()=>s("span",{class:"iconfont icon-cart-full-fill"},null,-1)),Z=[Y],ss={key:1,class:"wrap"},es={__name:"Good",setup(e){let o=u(!1),a=u("");const t=x(),g=B(),f=v(()=>d=>(d.price*(1-d.discount)).toFixed(2)),c=d=>{g.addToCart(d),m("添加到购物车")},h=v(()=>t.good);$(()=>{t.fetchGood(),g.fetchCart(),m("数据加载完毕")});const m=d=>{o.value=!0,a.value=d,setTimeout(()=>{o.value=!1},3e3)};return(d,ts)=>(i(),r("div",O,[h.value.length?(i(),r("div",q,[(i(!0),r(F,null,T(h.value,(l,as)=>(i(),r("div",{class:"item",key:l.id},[s("img",{class:"img",src:"https://glpla.github.io/utils"+l.img,alt:""},null,8,H),s("div",J,[s("div",K,[_(n(l.name)+" ",1),s("span",P,n(l.flavour),1)]),s("div",Q,n(l.desc.repeat(2)),1),s("div",R,[_("¥"+n(l.price)+" ",1),s("span",U,[_("(市场价"),s("span",null,"¥"+n(l.priceOrignal),1),_(")")])]),s("div",W,[_("预估到手 "),s("span",null,"¥"+n(f.value(l)),1)])]),s("div",{class:"btn",onClick:os=>c(l)},Z,8,X)]))),128))])):(i(),r("div",ss,"lists empty")),k(z),k(b,{flag:p(o),tips:p(a)},null,8,["flag","tips"])]))}},ds=S(es,[["__scopeId","data-v-e87e658c"]]);export{ds as default};
