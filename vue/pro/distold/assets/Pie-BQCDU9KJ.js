import{_ as Ht,r as Xt,o as Vt,a as Gt,c as Ft,d as Et}from"./index-DLiG_4_C.js";import{r as Ut,f as Wt,g as jt,u as qt,i as $t}from"./install-kFfJrlMU.js";import{P as O,ag as $e,ah as Xe,L as ct,d as Zt,ai as Ze,aj as Qt,ab as Jt,ak as Qe,al as ke,am as Kt,an as ea,ao as ta,ap as ge,aq as Je,J as pe,ar as aa,a3 as q,A as V,as as Re,g as k,at as ra,a1 as ia,O as ce,f as Ve,$ as Ce,au as na,av as oa,t as De,_ as me,C as sa,aw as W,ax as pt,a as ee,ay as Ke,az as la,aA as Me,X as ie,b as te,aB as mt,aC as ha,aD as va,aE as yt,aF as fa,Z as Tt,R as ua,aG as da,q as ga,v as et,aH as ca,aI as tt,aJ as pa,aK as at,a5 as K,aL as rt,c as ma,aM as ya,aN as Ta,x as bt,h as ba,aO as be,aP as _a,aQ as wa,aR as Ne,N as _t,n as it,aS as xa,l as Sa,W as wt,a0 as Ca,aa as Ma,a9 as La,a7 as Aa,a6 as Da,aT as Ia,T as xt,a2 as Pa,a4 as Oa,u as St,aU as ka,aV as Ra,aW as Na,U as Ba,aX as za,ae as Ya,af as Ha}from"./installCanvasRenderer-CioQ-8se.js";import{p as Xa,s as Va,a as Ct,h as Ga,g as Fa}from"./AxisBuilder-BHtNzj-w.js";import{L as Ea,i as Ua}from"./LegendVisualProvider-Bbs_quxI.js";import{d as Wa}from"./dataFilter-Cxhk-D3S.js";import{g as _e}from"./sectorHelper-NGw3jD65.js";import{c as ja}from"./createSeriesDataSimply-BcVC4w9g.js";var ue=Math.PI*2,re=ta.CMD,qa=["top","right","bottom","left"];function $a(i,t,a,e,r){var o=a.width,n=a.height;switch(i){case"top":e.set(a.x+o/2,a.y-t),r.set(0,-1);break;case"bottom":e.set(a.x+o/2,a.y+n+t),r.set(0,1);break;case"left":e.set(a.x-t,a.y+n/2),r.set(-1,0);break;case"right":e.set(a.x+o+t,a.y+n/2),r.set(1,0);break}}function Za(i,t,a,e,r,o,n,s,h){n-=i,s-=t;var v=Math.sqrt(n*n+s*s);n/=v,s/=v;var l=n*a+i,d=s*a+t;if(Math.abs(e-r)%ue<1e-4)return h[0]=l,h[1]=d,v-a;if(o){var u=e;e=ge(r),r=ge(u)}else e=ge(e),r=ge(r);e>r&&(r+=ue);var f=Math.atan2(s,n);if(f<0&&(f+=ue),f>=e&&f<=r||f+ue>=e&&f+ue<=r)return h[0]=l,h[1]=d,v-a;var g=a*Math.cos(e)+i,c=a*Math.sin(e)+t,p=a*Math.cos(r)+i,m=a*Math.sin(r)+t,T=(g-n)*(g-n)+(c-s)*(c-s),y=(p-n)*(p-n)+(m-s)*(m-s);return T<y?(h[0]=g,h[1]=c,Math.sqrt(T)):(h[0]=p,h[1]=m,Math.sqrt(y))}function Le(i,t,a,e,r,o,n,s){var h=r-i,v=o-t,l=a-i,d=e-t,u=Math.sqrt(l*l+d*d);l/=u,d/=u;var f=h*l+v*d,g=f/u;s&&(g=Math.min(Math.max(g,0),1)),g*=u;var c=n[0]=i+g*l,p=n[1]=t+g*d;return Math.sqrt((c-r)*(c-r)+(p-o)*(p-o))}function Mt(i,t,a,e,r,o,n){a<0&&(i=i+a,a=-a),e<0&&(t=t+e,e=-e);var s=i+a,h=t+e,v=n[0]=Math.min(Math.max(r,i),s),l=n[1]=Math.min(Math.max(o,t),h);return Math.sqrt((v-r)*(v-r)+(l-o)*(l-o))}var U=[];function Qa(i,t,a){var e=Mt(t.x,t.y,t.width,t.height,i.x,i.y,U);return a.set(U[0],U[1]),e}function Ja(i,t,a){for(var e=0,r=0,o=0,n=0,s,h,v=1/0,l=t.data,d=i.x,u=i.y,f=0;f<l.length;){var g=l[f++];f===1&&(e=l[f],r=l[f+1],o=e,n=r);var c=v;switch(g){case re.M:o=l[f++],n=l[f++],e=o,r=n;break;case re.L:c=Le(e,r,l[f],l[f+1],d,u,U,!0),e=l[f++],r=l[f++];break;case re.C:c=ea(e,r,l[f++],l[f++],l[f++],l[f++],l[f],l[f+1],d,u,U),e=l[f++],r=l[f++];break;case re.Q:c=Kt(e,r,l[f++],l[f++],l[f],l[f+1],d,u,U),e=l[f++],r=l[f++];break;case re.A:var p=l[f++],m=l[f++],T=l[f++],y=l[f++],b=l[f++],w=l[f++];f+=1;var S=!!(1-l[f++]);s=Math.cos(b)*T+p,h=Math.sin(b)*y+m,f<=1&&(o=s,n=h);var M=(d-p)*y/T+p;c=Za(p,m,y,b,b+w,S,M,u,U),e=Math.cos(b+w)*T+p,r=Math.sin(b+w)*y+m;break;case re.R:o=e=l[f++],n=r=l[f++];var _=l[f++],C=l[f++];c=Mt(o,n,_,C,d,u,U);break;case re.Z:c=Le(e,r,o,n,d,u,U,!0),e=o,r=n;break}c<v&&(v=c,a.set(U[0],U[1]))}return v}var j=new O,x=new O,L=new O,Z=new O,$=new O;function nt(i,t){if(i){var a=i.getTextGuideLine(),e=i.getTextContent();if(e&&a){var r=i.textGuideLineConfig||{},o=[[0,0],[0,0],[0,0]],n=r.candidates||qa,s=e.getBoundingRect().clone();s.applyTransform(e.getComputedTransform());var h=1/0,v=r.anchor,l=i.getComputedTransform(),d=l&&Qt([],l),u=t.get("length2")||0;v&&L.copy(v);for(var f=0;f<n.length;f++){var g=n[f];$a(g,0,s,j,Z),O.scaleAndAdd(x,j,Z,u),x.transform(d);var c=i.getBoundingRect(),p=v?v.distance(x):i instanceof Jt?Ja(x,i.path,L):Qa(x,c,L);p<h&&(h=p,x.transform(l),L.transform(l),L.toArray(o[0]),x.toArray(o[1]),j.toArray(o[2]))}Lt(o,t.get("minTurnAngle")),a.setShape({points:o})}}}var Ae=[],H=new O;function Lt(i,t){if(t<=180&&t>0){t=t/180*Math.PI,j.fromArray(i[0]),x.fromArray(i[1]),L.fromArray(i[2]),O.sub(Z,j,x),O.sub($,L,x);var a=Z.len(),e=$.len();if(!(a<.001||e<.001)){Z.scale(1/a),$.scale(1/e);var r=Z.dot($),o=Math.cos(t);if(o<r){var n=Le(x.x,x.y,L.x,L.y,j.x,j.y,Ae,!1);H.fromArray(Ae),H.scaleAndAdd($,n/Math.tan(Math.PI-t));var s=L.x!==x.x?(H.x-x.x)/(L.x-x.x):(H.y-x.y)/(L.y-x.y);if(isNaN(s))return;s<0?O.copy(H,x):s>1&&O.copy(H,L),H.toArray(i[1])}}}}function Ka(i,t,a){if(a<=180&&a>0){a=a/180*Math.PI,j.fromArray(i[0]),x.fromArray(i[1]),L.fromArray(i[2]),O.sub(Z,x,j),O.sub($,L,x);var e=Z.len(),r=$.len();if(!(e<.001||r<.001)){Z.scale(1/e),$.scale(1/r);var o=Z.dot(t),n=Math.cos(a);if(o<n){var s=Le(x.x,x.y,L.x,L.y,j.x,j.y,Ae,!1);H.fromArray(Ae);var h=Math.PI/2,v=Math.acos($.dot(t)),l=h+v-a;if(l>=h)O.copy(H,L);else{H.scaleAndAdd($,s/Math.tan(Math.PI/2-l));var d=L.x!==x.x?(H.x-x.x)/(L.x-x.x):(H.y-x.y)/(L.y-x.y);if(isNaN(d))return;d<0?O.copy(H,x):d>1&&O.copy(H,L)}H.toArray(i[1])}}}}function Be(i,t,a,e){var r=a==="normal",o=r?i:i.ensureState(a);o.ignore=t;var n=e.get("smooth");n&&n===!0&&(n=.3),o.shape=o.shape||{},n>0&&(o.shape.smooth=n);var s=e.getModel("lineStyle").getLineStyle();r?i.useStyle(s):o.style=s}function er(i,t){var a=t.smooth,e=t.points;if(e)if(i.moveTo(e[0][0],e[0][1]),a>0&&e.length>=3){var r=Qe(e[0],e[1]),o=Qe(e[1],e[2]);if(!r||!o){i.lineTo(e[1][0],e[1][1]),i.lineTo(e[2][0],e[2][1]);return}var n=Math.min(r,o)*a,s=ke([],e[1],e[0],n/r),h=ke([],e[1],e[2],n/o),v=ke([],s,h,.5);i.bezierCurveTo(s[0],s[1],s[0],s[1],v[0],v[1]),i.bezierCurveTo(h[0],h[1],h[0],h[1],e[2][0],e[2][1])}else for(var l=1;l<e.length;l++)i.lineTo(e[l][0],e[l][1])}function At(i,t,a){var e=i.getTextGuideLine(),r=i.getTextContent();if(!r){e&&i.removeTextGuideLine();return}for(var o=t.normal,n=o.get("show"),s=r.ignore,h=0;h<$e.length;h++){var v=$e[h],l=t[v],d=v==="normal";if(l){var u=l.get("show"),f=d?s:Xe(r.states[v]&&r.states[v].ignore,s);if(f||!Xe(u,n)){var g=d?e:e&&e.states[v];g&&(g.ignore=!0),e&&Be(e,!0,v,l);continue}e||(e=new ct,i.setTextGuideLine(e),!d&&(s||!n)&&Be(e,!0,"normal",t.normal),i.stateProxy&&(e.stateProxy=i.stateProxy)),Be(e,!1,v,l)}}if(e){Zt(e.style,a),e.style.fill=null;var c=o.get("showAbove"),p=i.textGuideLineConfig=i.textGuideLineConfig||{};p.showAbove=c||!1,e.buildPath=er}}function Dt(i,t){t=t||"labelLine";for(var a={normal:i.getModel(t)},e=0;e<Ze.length;e++){var r=Ze[e];a[r]=i.getModel([r,t])}return a}function tr(i){if(i){for(var t=[],a=0;a<i.length;a++)t.push(i[a].slice());return t}}function ar(i,t){var a=i.label,e=t&&t.getTextGuideLine();return{dataIndex:i.dataIndex,dataType:i.dataType,seriesIndex:i.seriesModel.seriesIndex,text:i.label.style.text,rect:i.hostRect,labelRect:i.rect,align:a.style.align,verticalAlign:a.style.verticalAlign,labelLinePoints:tr(e&&e.shape.points)}}var ot=["align","verticalAlign","width","height","fontSize"],Y=new oa,ze=De(),rr=De();function we(i,t,a){for(var e=0;e<a.length;e++){var r=a[e];t[r]!=null&&(i[r]=t[r])}}var xe=["x","y","rotation"],ir=function(){function i(){this._labelList=[],this._chartViewList=[]}return i.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},i.prototype._addLabel=function(t,a,e,r,o){var n=r.style,s=r.__hostTarget,h=s.textConfig||{},v=r.getComputedTransform(),l=r.getBoundingRect().plain();Je.applyTransform(l,l,v),v?Y.setLocalTransform(v):(Y.x=Y.y=Y.rotation=Y.originX=Y.originY=0,Y.scaleX=Y.scaleY=1),Y.rotation=ge(Y.rotation);var d=r.__hostTarget,u;if(d){u=d.getBoundingRect().plain();var f=d.getComputedTransform();Je.applyTransform(u,u,f)}var g=u&&d.getTextGuideLine();this._labelList.push({label:r,labelLine:g,seriesModel:e,dataIndex:t,dataType:a,layoutOption:o,computedLayoutOption:null,rect:l,hostRect:u,priority:u?u.width*u.height:0,defaultAttr:{ignore:r.ignore,labelGuideIgnore:g&&g.ignore,x:Y.x,y:Y.y,scaleX:Y.scaleX,scaleY:Y.scaleY,rotation:Y.rotation,style:{x:n.x,y:n.y,align:n.align,verticalAlign:n.verticalAlign,width:n.width,height:n.height,fontSize:n.fontSize},cursor:r.cursor,attachedPos:h.position,attachedRot:h.rotation}})},i.prototype.addLabelsOfSeries=function(t){var a=this;this._chartViewList.push(t);var e=t.__model,r=e.get("labelLayout");(pe(r)||aa(r).length)&&t.group.traverse(function(o){if(o.ignore)return!0;var n=o.getTextContent(),s=q(o);n&&!n.disableLabelLayout&&a._addLabel(s.dataIndex,s.dataType,e,n,r)})},i.prototype.updateLayoutConfig=function(t){var a=t.getWidth(),e=t.getHeight();function r(y,b){return function(){nt(y,b)}}for(var o=0;o<this._labelList.length;o++){var n=this._labelList[o],s=n.label,h=s.__hostTarget,v=n.defaultAttr,l=void 0;pe(n.layoutOption)?l=n.layoutOption(ar(n,h)):l=n.layoutOption,l=l||{},n.computedLayoutOption=l;var d=Math.PI/180;h&&h.setTextConfig({local:!1,position:l.x!=null||l.y!=null?null:v.attachedPos,rotation:l.rotate!=null?l.rotate*d:v.attachedRot,offset:[l.dx||0,l.dy||0]});var u=!1;if(l.x!=null?(s.x=V(l.x,a),s.setStyle("x",0),u=!0):(s.x=v.x,s.setStyle("x",v.style.x)),l.y!=null?(s.y=V(l.y,e),s.setStyle("y",0),u=!0):(s.y=v.y,s.setStyle("y",v.style.y)),l.labelLinePoints){var f=h.getTextGuideLine();f&&(f.setShape({points:l.labelLinePoints}),u=!1)}var g=ze(s);g.needsUpdateLabelLine=u,s.rotation=l.rotate!=null?l.rotate*d:v.rotation,s.scaleX=v.scaleX,s.scaleY=v.scaleY;for(var c=0;c<ot.length;c++){var p=ot[c];s.setStyle(p,l[p]!=null?l[p]:v.style[p])}if(l.draggable){if(s.draggable=!0,s.cursor="move",h){var m=n.seriesModel;if(n.dataIndex!=null){var T=n.seriesModel.getData(n.dataType);m=T.getItemModel(n.dataIndex)}s.on("drag",r(h,m.getModel("labelLine")))}}else s.off("drag"),s.cursor=v.cursor}},i.prototype.layout=function(t){var a=t.getWidth(),e=t.getHeight(),r=Xa(this._labelList),o=Re(r,function(h){return h.layoutOption.moveOverlap==="shiftX"}),n=Re(r,function(h){return h.layoutOption.moveOverlap==="shiftY"});Va(o,0,a),Ct(n,0,e);var s=Re(r,function(h){return h.layoutOption.hideOverlap});Ga(s)},i.prototype.processLabelsOverall=function(){var t=this;k(this._chartViewList,function(a){var e=a.__model,r=a.ignoreLabelLineUpdate,o=e.isAnimationEnabled();a.group.traverse(function(n){if(n.ignore&&!n.forceLabelAnimation)return!0;var s=!r,h=n.getTextContent();!s&&h&&(s=ze(h).needsUpdateLabelLine),s&&t._updateLabelLine(n,e),o&&t._animateLabels(n,e)})})},i.prototype._updateLabelLine=function(t,a){var e=t.getTextContent(),r=q(t),o=r.dataIndex;if(e&&o!=null){var n=a.getData(r.dataType),s=n.getItemModel(o),h={},v=n.getItemVisual(o,"style");if(v){var l=n.getVisual("drawType");h.stroke=v[l]}var d=s.getModel("labelLine");At(t,Dt(s),h),nt(t,d)}},i.prototype._animateLabels=function(t,a){var e=t.getTextContent(),r=t.getTextGuideLine();if(e&&(t.forceLabelAnimation||!e.ignore&&!e.invisible&&!t.disableLabelAnimation&&!ra(t))){var o=ze(e),n=o.oldLayout,s=q(t),h=s.dataIndex,v={x:e.x,y:e.y,rotation:e.rotation},l=a.getData(s.dataType);if(n){e.attr(n);var u=t.prevStates;u&&(Ve(u,"select")>=0&&e.attr(o.oldLayoutSelect),Ve(u,"emphasis")>=0&&e.attr(o.oldLayoutEmphasis)),Ce(e,v,a,h)}else if(e.attr(v),!ia(e).valueAnimation){var d=Xe(e.style.opacity,1);e.style.opacity=0,ce(e,{style:{opacity:d}},a,h)}if(o.oldLayout=v,e.states.select){var f=o.oldLayoutSelect={};we(f,v,xe),we(f,e.states.select,xe)}if(e.states.emphasis){var g=o.oldLayoutEmphasis={};we(g,v,xe),we(g,e.states.emphasis,xe)}na(e,h,l,a,a)}if(r&&!r.ignore&&!r.invisible){var o=rr(r),n=o.oldLayout,c={points:r.shape.points};n?(r.attr({shape:n}),Ce(r,{shape:c},a)):(r.setShape(c),r.style.strokePercent=0,ce(r,{style:{strokePercent:1}},a)),o.oldLayout=c}},i}(),Ye=De();function nr(i){i.registerUpdateLifecycle("series:beforeupdate",function(t,a,e){var r=Ye(a).labelManager;r||(r=Ye(a).labelManager=new ir),r.clearLabels()}),i.registerUpdateLifecycle("series:layoutlabels",function(t,a,e){var r=Ye(a).labelManager;e.updatedSeries.forEach(function(o){r.addLabelsOfSeries(a.getViewOfSeriesModel(o))}),r.updateLayoutConfig(a),r.layout(a),r.processLabelsOverall()})}var or=function(i){me(t,i);function t(){var a=i!==null&&i.apply(this,arguments)||this;return a.type=t.type,a}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(sa);const sr=or;function It(i){var t=i.get("confine");return t!=null?!!t:i.get("renderMode")==="richText"}function Pt(i){if(W.domSupported){for(var t=document.documentElement.style,a=0,e=i.length;a<e;a++)if(i[a]in t)return i[a]}}var Ot=Pt(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),lr=Pt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function kt(i,t){if(!i)return t;t=pt(t,!0);var a=i.indexOf(t);return i=a===-1?t:"-"+i.slice(0,a)+"-"+t,i.toLowerCase()}function hr(i,t){var a=i.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(i);return a?t?a[t]:a:null}var vr=kt(lr,"transition"),Ge=kt(Ot,"transform"),fr="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(W.transform3dSupported?"will-change:transform;":"");function ur(i){return i=i==="left"?"right":i==="right"?"left":i==="top"?"bottom":"top",i}function dr(i,t,a){if(!ee(a)||a==="inside")return"";var e=i.get("backgroundColor"),r=i.get("borderWidth");t=Me(t);var o=ur(a),n=Math.max(Math.round(r)*1.5,6),s="",h=Ge+":",v;Ve(["left","right"],o)>-1?(s+="top:50%",h+="translateY(-50%) rotate("+(v=o==="left"?-225:-45)+"deg)"):(s+="left:50%",h+="translateX(-50%) rotate("+(v=o==="top"?225:45)+"deg)");var l=v*Math.PI/180,d=n+r,u=d*Math.abs(Math.cos(l))+d*Math.abs(Math.sin(l)),f=Math.round(((u-Math.SQRT2*r)/2+Math.SQRT2*r-(u-d)/2)*100)/100;s+=";"+o+":-"+f+"px";var g=t+" solid "+r+"px;",c=["position:absolute;width:"+n+"px;height:"+n+"px;z-index:-1;",s+";"+h+";","border-bottom:"+g,"border-right:"+g,"background-color:"+e+";"];return'<div style="'+c.join("")+'"></div>'}function gr(i,t){var a="cubic-bezier(0.23,1,0.32,1)",e=" "+i/2+"s "+a,r="opacity"+e+",visibility"+e;return t||(e=" "+i+"s "+a,r+=W.transformSupported?","+Ge+e:",left"+e+",top"+e),vr+":"+r}function st(i,t,a){var e=i.toFixed(0)+"px",r=t.toFixed(0)+"px";if(!W.transformSupported)return a?"top:"+r+";left:"+e+";":[["top",r],["left",e]];var o=W.transform3dSupported,n="translate"+(o?"3d":"")+"("+e+","+r+(o?",0":"")+")";return a?"top:0;left:0;"+Ge+":"+n+";":[["top",0],["left",0],[Ot,n]]}function cr(i){var t=[],a=i.get("fontSize"),e=i.getTextColor();e&&t.push("color:"+e),t.push("font:"+i.getFont()),a&&t.push("line-height:"+Math.round(a*3/2)+"px");var r=i.get("textShadowColor"),o=i.get("textShadowBlur")||0,n=i.get("textShadowOffsetX")||0,s=i.get("textShadowOffsetY")||0;return r&&o&&t.push("text-shadow:"+n+"px "+s+"px "+o+"px "+r),k(["decoration","align"],function(h){var v=i.get(h);v&&t.push("text-"+h+":"+v)}),t.join(";")}function pr(i,t,a){var e=[],r=i.get("transitionDuration"),o=i.get("backgroundColor"),n=i.get("shadowBlur"),s=i.get("shadowColor"),h=i.get("shadowOffsetX"),v=i.get("shadowOffsetY"),l=i.getModel("textStyle"),d=mt(i,"html"),u=h+"px "+v+"px "+n+"px "+s;return e.push("box-shadow:"+u),t&&r&&e.push(gr(r,a)),o&&e.push("background-color:"+o),k(["width","color","radius"],function(f){var g="border-"+f,c=pt(g),p=i.get(c);p!=null&&e.push(g+":"+p+(f==="color"?"":"px"))}),e.push(cr(l)),d!=null&&e.push("padding:"+ha(d).join("px ")+"px"),e.join(";")+";"}function lt(i,t,a,e,r){var o=t&&t.painter;if(a){var n=o&&o.getViewportRoot();n&&va(i,n,a,e,r)}else{i[0]=e,i[1]=r;var s=o&&o.getViewportRootOffset();s&&(i[0]+=s.offsetLeft,i[1]+=s.offsetTop)}i[2]=i[0]/t.getWidth(),i[3]=i[1]/t.getHeight()}var mr=function(){function i(t,a){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,W.wxa)return null;var e=document.createElement("div");e.domBelongToZr=!0,this.el=e;var r=this._zr=t.getZr(),o=a.appendTo,n=o&&(ee(o)?document.querySelector(o):Ke(o)?o:pe(o)&&o(t.getDom()));lt(this._styleCoord,r,n,t.getWidth()/2,t.getHeight()/2),(n||t.getDom()).appendChild(e),this._api=t,this._container=n;var s=this;e.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},e.onmousemove=function(h){if(h=h||window.event,!s._enterable){var v=r.handler,l=r.painter.getViewportRoot();la(l,h,!0),v.dispatch("mousemove",h)}},e.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return i.prototype.update=function(t){if(!this._container){var a=this._api.getDom(),e=hr(a,"position"),r=a.style;r.position!=="absolute"&&e!=="absolute"&&(r.position="relative")}var o=t.get("alwaysShowContent");o&&this._moveIfResized(),this._alwaysShowContent=o,this.el.className=t.get("className")||""},i.prototype.show=function(t,a){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this.el,r=e.style,o=this._styleCoord;e.innerHTML?r.cssText=fr+pr(t,!this._firstShow,this._longHide)+st(o[0],o[1],!0)+("border-color:"+Me(a)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):r.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},i.prototype.setContent=function(t,a,e,r,o){var n=this.el;if(t==null){n.innerHTML="";return}var s="";if(ee(o)&&e.get("trigger")==="item"&&!It(e)&&(s=dr(e,r,o)),ee(t))n.innerHTML=t+s;else if(t){n.innerHTML="",ie(t)||(t=[t]);for(var h=0;h<t.length;h++)Ke(t[h])&&t[h].parentNode!==n&&n.appendChild(t[h]);if(s&&n.childNodes.length){var v=document.createElement("div");v.innerHTML=s,n.appendChild(v)}}},i.prototype.setEnterable=function(t){this._enterable=t},i.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},i.prototype.moveTo=function(t,a){var e=this._styleCoord;if(lt(e,this._zr,this._container,t,a),e[0]!=null&&e[1]!=null){var r=this.el.style,o=st(e[0],e[1]);k(o,function(n){r[n[0]]=n[1]})}},i.prototype._moveIfResized=function(){var t=this._styleCoord[2],a=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),a*this._zr.getHeight())},i.prototype.hide=function(){var t=this,a=this.el.style;a.visibility="hidden",a.opacity="0",W.transform3dSupported&&(a.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},i.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(te(this.hide,this),t)):this.hide())},i.prototype.isShow=function(){return this._show},i.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var t=this.el.parentNode;t&&t.removeChild(this.el),this.el=this._container=null},i}();const yr=mr;var Tr=function(){function i(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),vt(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return i.prototype.update=function(t){var a=t.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a},i.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},i.prototype.setContent=function(t,a,e,r,o){var n=this;yt(t)&&fa(""),this.el&&this._zr.remove(this.el);var s=e.getModel("textStyle");this.el=new Tt({style:{rich:a.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:r,textShadowColor:s.get("textShadowColor"),fill:e.get(["textStyle","color"]),padding:mt(e,"richText"),verticalAlign:"top",align:"left"},z:e.get("z")}),k(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(v){n.el.style[v]=e.get(v)}),k(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(v){n.el.style[v]=s.get(v)||0}),this._zr.add(this.el);var h=this;this.el.on("mouseover",function(){h._enterable&&(clearTimeout(h._hideTimeout),h._show=!0),h._inContent=!0}),this.el.on("mouseout",function(){h._enterable&&h._show&&h.hideLater(h._hideDelay),h._inContent=!1})},i.prototype.setEnterable=function(t){this._enterable=t},i.prototype.getSize=function(){var t=this.el,a=this.el.getBoundingRect(),e=ht(t.style);return[a.width+e.left+e.right,a.height+e.top+e.bottom]},i.prototype.moveTo=function(t,a){var e=this.el;if(e){var r=this._styleCoord;vt(r,this._zr,t,a),t=r[0],a=r[1];var o=e.style,n=J(o.borderWidth||0),s=ht(o);e.x=t+n+s.left,e.y=a+n+s.top,e.markRedraw()}},i.prototype._moveIfResized=function(){var t=this._styleCoord[2],a=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),a*this._zr.getHeight())},i.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},i.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(te(this.hide,this),t)):this.hide())},i.prototype.isShow=function(){return this._show},i.prototype.dispose=function(){this._zr.remove(this.el)},i}();function J(i){return Math.max(0,i)}function ht(i){var t=J(i.shadowBlur||0),a=J(i.shadowOffsetX||0),e=J(i.shadowOffsetY||0);return{left:J(t-a),right:J(t+a),top:J(t-e),bottom:J(t+e)}}function vt(i,t,a,e){i[0]=a,i[1]=e,i[2]=i[0]/t.getWidth(),i[3]=i[1]/t.getHeight()}var br=new ua({shape:{x:-1,y:-1,width:2,height:2}}),_r=function(i){me(t,i);function t(){var a=i!==null&&i.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.init=function(a,e){if(!(W.node||!e.getDom())){var r=a.getComponent("tooltip"),o=this._renderMode=da(r.get("renderMode"));this._tooltipContent=o==="richText"?new Tr(e):new yr(e,{appendTo:r.get("appendToBody",!0)?"body":r.get("appendTo",!0)})}},t.prototype.render=function(a,e,r){if(!(W.node||!r.getDom())){this.group.removeAll(),this._tooltipModel=a,this._ecModel=e,this._api=r;var o=this._tooltipContent;o.update(a),o.setEnterable(a.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&a.get("transitionDuration")?ga(this,"_updatePosition",50,"fixRate"):et(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var a=this._tooltipModel,e=a.get("triggerOn");Ut("itemTooltip",this._api,te(function(r,o,n){e!=="none"&&(e.indexOf(r)>=0?this._tryShow(o,n):r==="leave"&&this._hide(n))},this))},t.prototype._keepShow=function(){var a=this._tooltipModel,e=this._ecModel,r=this._api,o=a.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&o!=="none"&&o!=="click"){var n=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!r.isDisposed()&&n.manuallyShowTip(a,e,r,{x:n._lastX,y:n._lastY,dataByCoordSys:n._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(a,e,r,o){if(!(o.from===this.uid||W.node||!r.getDom())){var n=ft(o,r);this._ticket="";var s=o.dataByCoordSys,h=Cr(o,e,r);if(h){var v=h.el.getBoundingRect().clone();v.applyTransform(h.el.transform),this._tryShow({offsetX:v.x+v.width/2,offsetY:v.y+v.height/2,target:h.el,position:o.position,positionDefault:"bottom"},n)}else if(o.tooltip&&o.x!=null&&o.y!=null){var l=br;l.x=o.x,l.y=o.y,l.update(),q(l).tooltipConfig={name:null,option:o.tooltip},this._tryShow({offsetX:o.x,offsetY:o.y,target:l},n)}else if(s)this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,dataByCoordSys:s,tooltipOption:o.tooltipOption},n);else if(o.seriesIndex!=null){if(this._manuallyAxisShowTip(a,e,r,o))return;var d=Wt(o,e),u=d.point[0],f=d.point[1];u!=null&&f!=null&&this._tryShow({offsetX:u,offsetY:f,target:d.el,position:o.position,positionDefault:"bottom"},n)}else o.x!=null&&o.y!=null&&(r.dispatchAction({type:"updateAxisPointer",x:o.x,y:o.y}),this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,target:r.getZr().findHover(o.x,o.y).target},n))}},t.prototype.manuallyHideTip=function(a,e,r,o){var n=this._tooltipContent;this._tooltipModel&&n.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,o.from!==this.uid&&this._hide(ft(o,r))},t.prototype._manuallyAxisShowTip=function(a,e,r,o){var n=o.seriesIndex,s=o.dataIndex,h=e.getComponent("axisPointer").coordSysAxesInfo;if(!(n==null||s==null||h==null)){var v=e.getSeriesByIndex(n);if(v){var l=v.getData(),d=de([l.getItemModel(s),v,(v.coordinateSystem||{}).model],this._tooltipModel);if(d.get("trigger")==="axis")return r.dispatchAction({type:"updateAxisPointer",seriesIndex:n,dataIndex:s,position:o.position}),!0}}},t.prototype._tryShow=function(a,e){var r=a.target,o=this._tooltipModel;if(o){this._lastX=a.offsetX,this._lastY=a.offsetY;var n=a.dataByCoordSys;if(n&&n.length)this._showAxisTooltip(n,a);else if(r){var s=q(r);if(s.ssrType==="legend")return;this._lastDataByCoordSys=null;var h,v;ca(r,function(l){if(q(l).dataIndex!=null)return h=l,!0;if(q(l).tooltipConfig!=null)return v=l,!0},!0),h?this._showSeriesItemTooltip(a,h,e):v?this._showComponentItemTooltip(a,v,e):this._hide(e)}else this._lastDataByCoordSys=null,this._hide(e)}},t.prototype._showOrMove=function(a,e){var r=a.get("showDelay");e=te(e,this),clearTimeout(this._showTimout),r>0?this._showTimout=setTimeout(e,r):e()},t.prototype._showAxisTooltip=function(a,e){var r=this._ecModel,o=this._tooltipModel,n=[e.offsetX,e.offsetY],s=de([e.tooltipOption],o),h=this._renderMode,v=[],l=tt("section",{blocks:[],noHeader:!0}),d=[],u=new Ne;k(a,function(T){k(T.dataByAxis,function(y){var b=r.getComponent(y.axisDim+"Axis",y.axisIndex),w=y.value;if(!(!b||w==null)){var S=jt(w,b.axis,r,y.seriesDataIndices,y.valueLabelOpt),M=tt("section",{header:S,noHeader:!pa(S),sortBlocks:!0,blocks:[]});l.blocks.push(M),k(y.seriesDataIndices,function(_){var C=r.getSeriesByIndex(_.seriesIndex),R=_.dataIndexInside,D=C.getDataParams(R);if(!(D.dataIndex<0)){D.axisDim=y.axisDim,D.axisIndex=y.axisIndex,D.axisType=y.axisType,D.axisId=y.axisId,D.axisValue=Fa(b.axis,{value:w}),D.axisValueLabel=S,D.marker=u.makeTooltipMarker("item",Me(D.color),h);var B=at(C.formatTooltip(R,!0,null)),X=B.frag;if(X){var N=de([C],o).get("valueFormatter");M.blocks.push(N?K({valueFormatter:N},X):X)}B.text&&d.push(B.text),v.push(D)}})}})}),l.blocks.reverse(),d.reverse();var f=e.position,g=s.get("order"),c=rt(l,u,h,g,r.get("useUTC"),s.get("textStyle"));c&&d.unshift(c);var p=h==="richText"?`

`:"<br/>",m=d.join(p);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(a,v)?this._updatePosition(s,f,n[0],n[1],this._tooltipContent,v):this._showTooltipContent(s,m,v,Math.random()+"",n[0],n[1],f,null,u)})},t.prototype._showSeriesItemTooltip=function(a,e,r){var o=this._ecModel,n=q(e),s=n.seriesIndex,h=o.getSeriesByIndex(s),v=n.dataModel||h,l=n.dataIndex,d=n.dataType,u=v.getData(d),f=this._renderMode,g=a.positionDefault,c=de([u.getItemModel(l),v,h&&(h.coordinateSystem||{}).model],this._tooltipModel,g?{position:g}:null),p=c.get("trigger");if(!(p!=null&&p!=="item")){var m=v.getDataParams(l,d),T=new Ne;m.marker=T.makeTooltipMarker("item",Me(m.color),f);var y=at(v.formatTooltip(l,!1,d)),b=c.get("order"),w=c.get("valueFormatter"),S=y.frag,M=S?rt(w?K({valueFormatter:w},S):S,T,f,b,o.get("useUTC"),c.get("textStyle")):y.text,_="item_"+v.name+"_"+l;this._showOrMove(c,function(){this._showTooltipContent(c,M,m,_,a.offsetX,a.offsetY,a.position,a.target,T)}),r({type:"showTip",dataIndexInside:l,dataIndex:u.getRawIndex(l),seriesIndex:s,from:this.uid})}},t.prototype._showComponentItemTooltip=function(a,e,r){var o=q(e),n=o.tooltipConfig,s=n.option||{};if(ee(s)){var h=s;s={content:h,formatter:h}}var v=[s],l=this._ecModel.getComponent(o.componentMainType,o.componentIndex);l&&v.push(l),v.push({formatter:s.content});var d=a.positionDefault,u=de(v,this._tooltipModel,d?{position:d}:null),f=u.get("content"),g=Math.random()+"",c=new Ne;this._showOrMove(u,function(){var p=ma(u.get("formatterParams")||{});this._showTooltipContent(u,f,p,g,a.offsetX,a.offsetY,a.position,e,c)}),r({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(a,e,r,o,n,s,h,v,l){if(this._ticket="",!(!a.get("showContent")||!a.get("show"))){var d=this._tooltipContent;d.setEnterable(a.get("enterable"));var u=a.get("formatter");h=h||a.get("position");var f=e,g=this._getNearestPoint([n,s],r,a.get("trigger"),a.get("borderColor")),c=g.color;if(u)if(ee(u)){var p=a.ecModel.get("useUTC"),m=ie(r)?r[0]:r,T=m&&m.axisType&&m.axisType.indexOf("time")>=0;f=u,T&&(f=ya(m.axisValue,f,p)),f=Ta(f,r,!0)}else if(pe(u)){var y=te(function(b,w){b===this._ticket&&(d.setContent(w,l,a,c,h),this._updatePosition(a,h,n,s,d,r,v))},this);this._ticket=o,f=u(r,o,y)}else f=u;d.setContent(f,l,a,c,h),d.show(a,c),this._updatePosition(a,h,n,s,d,r,v)}},t.prototype._getNearestPoint=function(a,e,r,o){if(r==="axis"||ie(e))return{color:o||(this._renderMode==="html"?"#fff":"none")};if(!ie(e))return{color:o||e.color||e.borderColor}},t.prototype._updatePosition=function(a,e,r,o,n,s,h){var v=this._api.getWidth(),l=this._api.getHeight();e=e||a.get("position");var d=n.getSize(),u=a.get("align"),f=a.get("verticalAlign"),g=h&&h.getBoundingRect().clone();if(h&&g.applyTransform(h.transform),pe(e)&&(e=e([r,o],s,n.el,g,{viewSize:[v,l],contentSize:d.slice()})),ie(e))r=V(e[0],v),o=V(e[1],l);else if(yt(e)){var c=e;c.width=d[0],c.height=d[1];var p=bt(c,{width:v,height:l});r=p.x,o=p.y,u=null,f=null}else if(ee(e)&&h){var m=Sr(e,g,d,a.get("borderWidth"));r=m[0],o=m[1]}else{var m=wr(r,o,n,v,l,u?null:20,f?null:20);r=m[0],o=m[1]}if(u&&(r-=ut(u)?d[0]/2:u==="right"?d[0]:0),f&&(o-=ut(f)?d[1]/2:f==="bottom"?d[1]:0),It(a)){var m=xr(r,o,n,v,l);r=m[0],o=m[1]}n.moveTo(r,o)},t.prototype._updateContentNotChangedOnAxis=function(a,e){var r=this._lastDataByCoordSys,o=this._cbParamsList,n=!!r&&r.length===a.length;return n&&k(r,function(s,h){var v=s.dataByAxis||[],l=a[h]||{},d=l.dataByAxis||[];n=n&&v.length===d.length,n&&k(v,function(u,f){var g=d[f]||{},c=u.seriesDataIndices||[],p=g.seriesDataIndices||[];n=n&&u.value===g.value&&u.axisType===g.axisType&&u.axisId===g.axisId&&c.length===p.length,n&&k(c,function(m,T){var y=p[T];n=n&&m.seriesIndex===y.seriesIndex&&m.dataIndex===y.dataIndex}),o&&k(u.seriesDataIndices,function(m){var T=m.seriesIndex,y=e[T],b=o[T];y&&b&&b.data!==y.data&&(n=!1)})})}),this._lastDataByCoordSys=a,this._cbParamsList=e,!!n},t.prototype._hide=function(a){this._lastDataByCoordSys=null,a({type:"hideTip",from:this.uid})},t.prototype.dispose=function(a,e){W.node||!e.getDom()||(et(this,"_updatePosition"),this._tooltipContent.dispose(),qt("itemTooltip",e))},t.type="tooltip",t}(ba);function de(i,t,a){var e=t.ecModel,r;a?(r=new be(a,e,e),r=new be(t.option,r,e)):r=t;for(var o=i.length-1;o>=0;o--){var n=i[o];n&&(n instanceof be&&(n=n.get("tooltip",!0)),ee(n)&&(n={formatter:n}),n&&(r=new be(n,r,e)))}return r}function ft(i,t){return i.dispatchAction||te(t.dispatchAction,t)}function wr(i,t,a,e,r,o,n){var s=a.getSize(),h=s[0],v=s[1];return o!=null&&(i+h+o+2>e?i-=h+o:i+=o),n!=null&&(t+v+n>r?t-=v+n:t+=n),[i,t]}function xr(i,t,a,e,r){var o=a.getSize(),n=o[0],s=o[1];return i=Math.min(i+n,e)-n,t=Math.min(t+s,r)-s,i=Math.max(i,0),t=Math.max(t,0),[i,t]}function Sr(i,t,a,e){var r=a[0],o=a[1],n=Math.ceil(Math.SQRT2*e)+8,s=0,h=0,v=t.width,l=t.height;switch(i){case"inside":s=t.x+v/2-r/2,h=t.y+l/2-o/2;break;case"top":s=t.x+v/2-r/2,h=t.y-o-n;break;case"bottom":s=t.x+v/2-r/2,h=t.y+l+n;break;case"left":s=t.x-r-n,h=t.y+l/2-o/2;break;case"right":s=t.x+v+n,h=t.y+l/2-o/2}return[s,h]}function ut(i){return i==="center"||i==="middle"}function Cr(i,t,a){var e=_a(i).queryOptionMap,r=e.keys()[0];if(!(!r||r==="series")){var o=wa(t,r,e.get(r),{useDefault:!1,enableAll:!1,enableNone:!1}),n=o.models[0];if(n){var s=a.getViewOfComponentModel(n),h;if(s.group.traverse(function(v){var l=q(v).tooltipConfig;if(l&&l.name===i.name)return h=v,!0}),h)return{componentMainType:r,componentIndex:n.componentIndex,el:h}}}}const Mr=_r;function Lr(i){_t($t),i.registerComponentModel(sr),i.registerComponentView(Mr),i.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},it),i.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},it)}var dt=Math.PI*2,Se=Math.PI/180;function Rt(i,t){return bt(i.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function Nt(i,t){var a=Rt(i,t),e=i.get("center"),r=i.get("radius");ie(r)||(r=[0,r]);var o=V(a.width,t.getWidth()),n=V(a.height,t.getHeight()),s=Math.min(o,n),h=V(r[0],s/2),v=V(r[1],s/2),l,d,u=i.coordinateSystem;if(u){var f=u.dataToPoint(e);l=f[0]||0,d=f[1]||0}else ie(e)||(e=[e,e]),l=V(e[0],o)+a.x,d=V(e[1],n)+a.y;return{cx:l,cy:d,r0:h,r:v}}function Ar(i,t,a){t.eachSeriesByType(i,function(e){var r=e.getData(),o=r.mapDimension("value"),n=Rt(e,a),s=Nt(e,a),h=s.cx,v=s.cy,l=s.r,d=s.r0,u=-e.get("startAngle")*Se,f=e.get("endAngle"),g=e.get("padAngle")*Se;f=f==="auto"?u-dt:-f*Se;var c=e.get("minAngle")*Se,p=c+g,m=0;r.each(o,function(z){!isNaN(z)&&m++});var T=r.getSum(o),y=Math.PI/(T||m)*2,b=e.get("clockwise"),w=e.get("roseType"),S=e.get("stillShowZeroSum"),M=r.getDataExtent(o);M[0]=0;var _=b?1:-1,C=[u,f],R=_*g/2;xa(C,!b),u=C[0],f=C[1];var D=Math.abs(f-u),B=D,X=0,N=u;if(r.setLayout({viewRect:n,r:l}),r.each(o,function(z,E){var A;if(isNaN(z)){r.setItemLayout(E,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:b,cx:h,cy:v,r0:d,r:w?NaN:l});return}w!=="area"?A=T===0&&S?y:z*y:A=D/m,A<p?(A=p,B-=p):X+=z;var I=N+_*A,P=0,G=0;g>A?(P=N+_*A/2,G=P):(P=N+R,G=I-R),r.setItemLayout(E,{angle:A,startAngle:P,endAngle:G,clockwise:b,cx:h,cy:v,r0:d,r:w?Sa(z,M,[d,l]):l}),N=I}),B<dt&&m)if(B<=.001){var Q=D/m;r.each(o,function(z,E){if(!isNaN(z)){var A=r.getItemLayout(E);A.angle=Q;var I=0,P=0;Q<g?(I=u+_*(E+1/2)*Q,P=I):(I=u+_*E*Q+R,P=u+_*(E+1)*Q-R),A.startAngle=I,A.endAngle=P}})}else y=B/X,N=u,r.each(o,function(z,E){if(!isNaN(z)){var A=r.getItemLayout(E),I=A.angle===p?p:z*y,P=0,G=0;I<g?(P=N+_*I/2,G=P):(P=N+R,G=N+_*I-R),A.startAngle=P,A.endAngle=G,N+=_*I}})})}var Dr=Math.PI/180;function gt(i,t,a,e,r,o,n,s,h,v){if(i.length<2)return;function l(c){for(var p=c.rB,m=p*p,T=0;T<c.list.length;T++){var y=c.list[T],b=Math.abs(y.label.y-a),w=e+y.len,S=w*w,M=Math.sqrt((1-Math.abs(b*b/m))*S),_=t+(M+y.len2)*r,C=_-y.label.x,R=y.targetTextWidth-C*r;Bt(y,R,!0),y.label.x=_}}function d(c){for(var p={list:[],maxY:0},m={list:[],maxY:0},T=0;T<c.length;T++)if(c[T].labelAlignTo==="none"){var y=c[T],b=y.label.y>a?m:p,w=Math.abs(y.label.y-a);if(w>=b.maxY){var S=y.label.x-t-y.len2*r,M=e+y.len,_=Math.abs(S)<M?Math.sqrt(w*w/(1-S*S/M/M)):M;b.rB=_,b.maxY=w}b.list.push(y)}l(p),l(m)}for(var u=i.length,f=0;f<u;f++)if(i[f].position==="outer"&&i[f].labelAlignTo==="labelLine"){var g=i[f].label.x-v;i[f].linePoints[1][0]+=g,i[f].label.x=v}Ct(i,h,h+n)&&d(i)}function Ir(i,t,a,e,r,o,n,s){for(var h=[],v=[],l=Number.MAX_VALUE,d=-Number.MAX_VALUE,u=0;u<i.length;u++){var f=i[u].label;He(i[u])||(f.x<t?(l=Math.min(l,f.x),h.push(i[u])):(d=Math.max(d,f.x),v.push(i[u])))}for(var u=0;u<i.length;u++){var g=i[u];if(!He(g)&&g.linePoints){if(g.labelStyleWidth!=null)continue;var f=g.label,c=g.linePoints,p=void 0;g.labelAlignTo==="edge"?f.x<t?p=c[2][0]-g.labelDistance-n-g.edgeDistance:p=n+r-g.edgeDistance-c[2][0]-g.labelDistance:g.labelAlignTo==="labelLine"?f.x<t?p=l-n-g.bleedMargin:p=n+r-d-g.bleedMargin:f.x<t?p=f.x-n-g.bleedMargin:p=n+r-f.x-g.bleedMargin,g.targetTextWidth=p,Bt(g,p)}}gt(v,t,a,e,1,r,o,n,s,d),gt(h,t,a,e,-1,r,o,n,s,l);for(var u=0;u<i.length;u++){var g=i[u];if(!He(g)&&g.linePoints){var f=g.label,c=g.linePoints,m=g.labelAlignTo==="edge",T=f.style.padding,y=T?T[1]+T[3]:0,b=f.style.backgroundColor?0:y,w=g.rect.width+b,S=c[1][0]-c[2][0];m?f.x<t?c[2][0]=n+g.edgeDistance+w+g.labelDistance:c[2][0]=n+r-g.edgeDistance-w-g.labelDistance:(f.x<t?c[2][0]=f.x+g.labelDistance:c[2][0]=f.x-g.labelDistance,c[1][0]=c[2][0]+S),c[1][1]=c[2][1]=f.y}}}function Bt(i,t,a){if(a===void 0&&(a=!1),i.labelStyleWidth==null){var e=i.label,r=e.style,o=i.rect,n=r.backgroundColor,s=r.padding,h=s?s[1]+s[3]:0,v=r.overflow,l=o.width+(n?0:h);if(t<l||a){var d=o.height;if(v&&v.match("break")){e.setStyle("backgroundColor",null),e.setStyle("width",t-h);var u=e.getBoundingRect();e.setStyle("width",Math.ceil(u.width)),e.setStyle("backgroundColor",n)}else{var f=t-h,g=t<l?f:a?f>i.unconstrainedWidth?null:f:null;e.setStyle("width",g)}var c=e.getBoundingRect();o.width=c.width;var p=(e.style.margin||0)+2.1;o.height=c.height+p,o.y-=(o.height-d)/2}}}function He(i){return i.position==="center"}function Pr(i){var t=i.getData(),a=[],e,r,o=!1,n=(i.get("minShowLabelAngle")||0)*Dr,s=t.getLayout("viewRect"),h=t.getLayout("r"),v=s.width,l=s.x,d=s.y,u=s.height;function f(S){S.ignore=!0}function g(S){if(!S.ignore)return!0;for(var M in S.states)if(S.states[M].ignore===!1)return!0;return!1}t.each(function(S){var M=t.getItemGraphicEl(S),_=M.shape,C=M.getTextContent(),R=M.getTextGuideLine(),D=t.getItemModel(S),B=D.getModel("label"),X=B.get("position")||D.get(["emphasis","label","position"]),N=B.get("distanceToLabelLine"),Q=B.get("alignTo"),z=V(B.get("edgeDistance"),v),E=B.get("bleedMargin"),A=D.getModel("labelLine"),I=A.get("length");I=V(I,v);var P=A.get("length2");if(P=V(P,v),Math.abs(_.endAngle-_.startAngle)<n){k(C.states,f),C.ignore=!0,R&&(k(R.states,f),R.ignore=!0);return}if(g(C)){var G=(_.startAngle+_.endAngle)/2,F=Math.cos(G),ae=Math.sin(G),le,ye,Fe,Te;e=_.cx,r=_.cy;var ne=X==="inside"||X==="inner";if(X==="center")le=_.cx,ye=_.cy,Te="center";else{var Ie=(ne?(_.r+_.r0)/2*F:_.r*F)+e,Pe=(ne?(_.r+_.r0)/2*ae:_.r*ae)+r;if(le=Ie+F*3,ye=Pe+ae*3,!ne){var Ee=Ie+F*(I+h-_.r),Ue=Pe+ae*(I+h-_.r),We=Ee+(F<0?-1:1)*P,je=Ue;Q==="edge"?le=F<0?l+z:l+v-z:le=We+(F<0?-N:N),ye=je,Fe=[[Ie,Pe],[Ee,Ue],[We,je]]}Te=ne?"center":Q==="edge"?F>0?"right":"left":F>0?"left":"right"}var he=Math.PI,oe=0,ve=B.get("rotate");if(wt(ve))oe=ve*(he/180);else if(X==="center")oe=0;else if(ve==="radial"||ve===!0){var zt=F<0?-G+he:-G;oe=zt}else if(ve==="tangential"&&X!=="outside"&&X!=="outer"){var se=Math.atan2(F,ae);se<0&&(se=he*2+se);var Yt=ae>0;Yt&&(se=he+se),oe=se-he}if(o=!!oe,C.x=le,C.y=ye,C.rotation=oe,C.setStyle({verticalAlign:"middle"}),ne){C.setStyle({align:Te});var Oe=C.states.select;Oe&&(Oe.x+=C.x,Oe.y+=C.y)}else{var fe=C.getBoundingRect().clone();fe.applyTransform(C.getComputedTransform());var qe=(C.style.margin||0)+2.1;fe.y-=qe/2,fe.height+=qe,a.push({label:C,labelLine:R,position:X,len:I,len2:P,minTurnAngle:A.get("minTurnAngle"),maxSurfaceAngle:A.get("maxSurfaceAngle"),surfaceNormal:new O(F,ae),linePoints:Fe,textAlign:Te,labelDistance:N,labelAlignTo:Q,edgeDistance:z,bleedMargin:E,rect:fe,unconstrainedWidth:fe.width,labelStyleWidth:C.style.width})}M.setTextConfig({inside:ne})}}),!o&&i.get("avoidLabelOverlap")&&Ir(a,e,r,h,v,u,l,d);for(var c=0;c<a.length;c++){var p=a[c],m=p.label,T=p.labelLine,y=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:p.textAlign}),y&&(k(m.states,f),m.ignore=!0);var b=m.states.select;b&&(b.x+=m.x,b.y+=m.y)}if(T){var w=p.linePoints;y||!w?(k(T.states,f),T.ignore=!0):(Lt(w,p.minTurnAngle),Ka(w,p.surfaceNormal,p.maxSurfaceAngle),T.setShape({points:w}),m.__hostTarget.textGuideLineConfig={anchor:new O(w[0][0],w[0][1])})}}}var Or=function(i){me(t,i);function t(a,e,r){var o=i.call(this)||this;o.z2=2;var n=new Tt;return o.setTextContent(n),o.updateData(a,e,r,!0),o}return t.prototype.updateData=function(a,e,r,o){var n=this,s=a.hostModel,h=a.getItemModel(e),v=h.getModel("emphasis"),l=a.getItemLayout(e),d=K(_e(h.getModel("itemStyle"),l,!0),l);if(isNaN(d.startAngle)){n.setShape(d);return}if(o){n.setShape(d);var u=s.getShallow("animationType");s.ecModel.ssr?(ce(n,{scaleX:0,scaleY:0},s,{dataIndex:e,isFrom:!0}),n.originX=d.cx,n.originY=d.cy):u==="scale"?(n.shape.r=l.r0,ce(n,{shape:{r:l.r}},s,e)):r!=null?(n.setShape({startAngle:r,endAngle:r}),ce(n,{shape:{startAngle:l.startAngle,endAngle:l.endAngle}},s,e)):(n.shape.endAngle=l.startAngle,Ce(n,{shape:{endAngle:l.endAngle}},s,e))}else Ca(n),Ce(n,{shape:d},s,e);n.useStyle(a.getItemVisual(e,"style")),Ma(n,h);var f=(l.startAngle+l.endAngle)/2,g=s.get("selectedOffset"),c=Math.cos(f)*g,p=Math.sin(f)*g,m=h.getShallow("cursor");m&&n.attr("cursor",m),this._updateLabel(s,a,e),n.ensureState("emphasis").shape=K({r:l.r+(v.get("scale")&&v.get("scaleSize")||0)},_e(v.getModel("itemStyle"),l)),K(n.ensureState("select"),{x:c,y:p,shape:_e(h.getModel(["select","itemStyle"]),l)}),K(n.ensureState("blur"),{shape:_e(h.getModel(["blur","itemStyle"]),l)});var T=n.getTextGuideLine(),y=n.getTextContent();T&&K(T.ensureState("select"),{x:c,y:p}),K(y.ensureState("select"),{x:c,y:p}),La(this,v.get("focus"),v.get("blurScope"),v.get("disabled"))},t.prototype._updateLabel=function(a,e,r){var o=this,n=e.getItemModel(r),s=n.getModel("labelLine"),h=e.getItemVisual(r,"style"),v=h&&h.fill,l=h&&h.opacity;Aa(o,Da(n),{labelFetcher:e.hostModel,labelDataIndex:r,inheritColor:v,defaultOpacity:l,defaultText:a.getFormattedLabel(r,"normal")||e.getName(r)});var d=o.getTextContent();o.setTextConfig({position:null,rotation:null}),d.attr({z2:10});var u=a.get(["label","position"]);if(u!=="outside"&&u!=="outer")o.removeTextGuideLine();else{var f=this.getTextGuideLine();f||(f=new ct,this.setTextGuideLine(f)),At(this,Dt(n),{stroke:v,opacity:Ia(s.get(["lineStyle","opacity"]),l,1)})}},t}(xt),kr=function(i){me(t,i);function t(){var a=i!==null&&i.apply(this,arguments)||this;return a.ignoreLabelLineUpdate=!0,a}return t.prototype.render=function(a,e,r,o){var n=a.getData(),s=this._data,h=this.group,v;if(!s&&n.count()>0){for(var l=n.getItemLayout(0),d=1;isNaN(l&&l.startAngle)&&d<n.count();++d)l=n.getItemLayout(d);l&&(v=l.startAngle)}if(this._emptyCircleSector&&h.remove(this._emptyCircleSector),n.count()===0&&a.get("showEmptyCircle")){var u=new xt({shape:Nt(a,r)});u.useStyle(a.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=u,h.add(u)}n.diff(s).add(function(f){var g=new Or(n,f,v);n.setItemGraphicEl(f,g),h.add(g)}).update(function(f,g){var c=s.getItemGraphicEl(g);c.updateData(n,f,v),c.off("click"),h.add(c),n.setItemGraphicEl(f,c)}).remove(function(f){var g=s.getItemGraphicEl(f);Pa(g,a,f)}).execute(),Pr(a),a.get("animationTypeUpdate")!=="expansion"&&(this._data=n)},t.prototype.dispose=function(){},t.prototype.containPoint=function(a,e){var r=e.getData(),o=r.getItemLayout(0);if(o){var n=a[0]-o.cx,s=a[1]-o.cy,h=Math.sqrt(n*n+s*s);return h<=o.r&&h>=o.r0}},t.type="pie",t}(Oa);const Rr=kr;var Nr=De(),Br=function(i){me(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.init=function(a){i.prototype.init.apply(this,arguments),this.legendVisualProvider=new Ea(te(this.getData,this),te(this.getRawData,this)),this._defaultLabelLine(a)},t.prototype.mergeOption=function(){i.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return ja(this,{coordDimensions:["value"],encodeDefaulter:St(ka,this)})},t.prototype.getDataParams=function(a){var e=this.getData(),r=Nr(e),o=r.seats;if(!o){var n=[];e.each(e.mapDimension("value"),function(h){n.push(h)}),o=r.seats=Ra(n,e.hostModel.get("percentPrecision"))}var s=i.prototype.getDataParams.call(this,a);return s.percent=o[a]||0,s.$vars.push("percent"),s},t.prototype._defaultLabelLine=function(a){Na(a,"labelLine",["show"]);var e=a.labelLine,r=a.emphasis.labelLine;e.show=e.show&&a.label.show,r.show=r.show&&a.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(Ba);const zr=Br;function Yr(i){return{seriesType:i,reset:function(t,a){var e=t.getData();e.filterSelf(function(r){var o=e.mapDimension("value"),n=e.get(o,r);return!(wt(n)&&!isNaN(n)&&n<0)})}}}function Hr(i){i.registerChartView(Rr),i.registerSeriesModel(zr),za("pie",i.registerAction),i.registerLayout(St(Ar,"pie")),i.registerProcessor(Wa("pie")),i.registerProcessor(Yr("pie"))}const Xr={class:"pie"},Vr={__name:"Pie",setup(i){let t=Xt(null);return _t([Lr,Ua,Hr,Ha,nr]),Vt(()=>{let a=Ya(t.value),e;e={tooltip:{trigger:"item"},legend:{top:"5%",left:"center"},series:[{name:"Access From",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:40,fontWeight:"bold"}},labelLine:{show:!1},data:[{value:1048,name:"Search Engine"},{value:735,name:"Direct"},{value:580,name:"Email"},{value:484,name:"Union Ads"},{value:300,name:"Video Ads"}]}]},e&&a.setOption(e)}),(a,e)=>(Gt(),Ft("div",Xr,[Et("div",{class:"chart",ref_key:"main",ref:t},null,512)]))}},Zr=Ht(Vr,[["__scopeId","data-v-ce8f8a17"]]);export{Zr as default};
