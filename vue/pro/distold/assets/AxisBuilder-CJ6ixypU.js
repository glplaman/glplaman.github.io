import{e as C,U as $,by as me,bz as xe,j as U,c as be,x as bt,bA as Gt,af as H,bB as Mt,bC as Me,_ as vt,g as _t,bD as _e,bE as Le,a4 as X,z as zt,b0 as Se,bF as kt,bG as we,bH as J,bI as ke,bJ as I,aj as Vt,bK as yt,bL as qt,bM as Ht,bN as it,bO as At,bP as Ae,t as Nt,bQ as Ne,bR as Yt,bS as Zt,bT as $t,bU as Kt,bV as Xt,bW as Jt,bX as Ee,bY as Oe,bZ as De,b_ as Ce,b$ as Te,c0 as Be,c1 as We,c2 as Pe,c3 as Et,c4 as Re,i as ot,c5 as Ot,c6 as mt,B as Qt,c7 as xt,G as Dt,D as st,v as ut,E as Fe,L as Ut,H as jt,c8 as Ie,a3 as Ge,bc as lt,a6 as te,a7 as ee,bv as ze,ap as ae,c9 as Ve,bf as qe,ca as Ct,b2 as He,aC as tt,cb as re,cc as ct}from"./installCanvasRenderer-Dz4YvAYh.js";function Pa(r,e,t){t=t||{};var a=t.byIndex,n=t.stackedCoordDimension,i,o,s;Ye(e)?i=e:(o=e.schema,i=o.dimensions,s=e.store);var u=!!(r&&r.get("stack")),c,l,h,f;if(C(i,function(p,M){$(p)&&(i[M]=p={name:p}),u&&!p.isExtraCoord&&(!a&&!c&&p.ordinalMeta&&(c=p),!l&&p.type!=="ordinal"&&p.type!=="time"&&(!n||n===p.coordDim)&&(l=p))}),l&&!a&&!c&&(a=!0),l){h="__\0ecstackresult_"+r.id,f="__\0ecstackedover_"+r.id,c&&(c.createInvertedIndices=!0);var v=l.coordDim,d=l.type,x=0;C(i,function(p){p.coordDim===v&&x++});var b={name:h,coordDim:v,coordDimIndex:x,type:d,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:i.length},g={name:f,coordDim:f,coordDimIndex:x+1,type:d,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:i.length+1};o?(s&&(b.storeDimIndex=s.ensureCalculationDimension(f,d),g.storeDimIndex=s.ensureCalculationDimension(h,d)),o.appendCalculationDimension(b),o.appendCalculationDimension(g)):(i.push(b),i.push(g))}return{stackedDimension:l&&l.name,stackedByDimension:c&&c.name,isStackedByIndex:a,stackedOverDimension:f,stackResultDimension:h}}function Ye(r){return!me(r.schema)}function ne(r,e){return!!e&&e===r.getCalculationInfo("stackedDimension")}function Ze(r,e){return ne(r,e)?r.getCalculationInfo("stackResultDimension"):e}var ie=function(){function r(e){this._setting=e||{},this._extent=[1/0,-1/0]}return r.prototype.getSetting=function(e){return this._setting[e]},r.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},r.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.setExtent=function(e,t){var a=this._extent;isNaN(e)||(a[0]=e),isNaN(t)||(a[1]=t)},r.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},r.prototype.isBlank=function(){return this._isBlank},r.prototype.setBlank=function(e){this._isBlank=e},r}();xe(ie);const V=ie;var $e=0,Tt=function(){function r(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++$e}return r.createByAxisModel=function(e){var t=e.option,a=t.data,n=a&&U(a,Ke);return new r({categories:n,needCollect:!n,deduplication:t.dedplication!==!1})},r.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},r.prototype.parseAndCollect=function(e){var t,a=this._needCollect;if(!$(e)&&!a)return e;if(a&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,t;var n=this._getOrCreateMap();return t=n.get(e),t==null&&(a?(t=this.categories.length,this.categories[t]=e,n.set(e,t)):t=NaN),t},r.prototype._getOrCreateMap=function(){return this._map||(this._map=be(this.categories))},r}();function Ke(r){return bt(r)&&r.value!=null?r.value:r+""}function Ra(r){return r.type==="interval"||r.type==="log"}function Xe(r,e,t,a){var n={},i=r[1]-r[0],o=n.interval=Gt(i/e,!0);t!=null&&o<t&&(o=n.interval=t),a!=null&&o>a&&(o=n.interval=a);var s=n.intervalPrecision=oe(o),u=n.niceTickExtent=[H(Math.ceil(r[0]/o)*o,s),H(Math.floor(r[1]/o)*o,s)];return Je(u,r),n}function Fa(r){var e=Math.pow(10,Me(r)),t=r/e;return t?t===2?t=3:t===3?t=5:t*=2:t=1,H(t*e)}function oe(r){return Mt(r)+2}function Bt(r,e,t){r[e]=Math.max(Math.min(r[e],t[1]),t[0])}function Je(r,e){!isFinite(r[0])&&(r[0]=e[0]),!isFinite(r[1])&&(r[1]=e[1]),Bt(r,0,e),Bt(r,1,e),r[0]>r[1]&&(r[0]=r[1])}function ft(r,e){return r>=e[0]&&r<=e[1]}function ht(r,e){return e[1]===e[0]?.5:(r-e[0])/(e[1]-e[0])}function gt(r,e){return r*(e[1]-e[0])+e[0]}var se=function(r){vt(e,r);function e(t){var a=r.call(this,t)||this;a.type="ordinal";var n=a.getSetting("ordinalMeta");return n||(n=new Tt({})),_t(n)&&(n=new Tt({categories:U(n,function(i){return bt(i)?i.value:i})})),a._ordinalMeta=n,a._extent=a.getSetting("extent")||[0,n.categories.length-1],a}return e.prototype.parse=function(t){return t==null?NaN:$(t)?this._ordinalMeta.getOrdinal(t):Math.round(t)},e.prototype.contain=function(t){return t=this.parse(t),ft(t,this._extent)&&this._ordinalMeta.categories[t]!=null},e.prototype.normalize=function(t){return t=this._getTickNumber(this.parse(t)),ht(t,this._extent)},e.prototype.scale=function(t){return t=Math.round(gt(t,this._extent)),this.getRawOrdinalNumber(t)},e.prototype.getTicks=function(){for(var t=[],a=this._extent,n=a[0];n<=a[1];)t.push({value:n}),n++;return t},e.prototype.getMinorTicks=function(t){},e.prototype.setSortInfo=function(t){if(t==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var a=t.ordinalNumbers,n=this._ordinalNumbersByTick=[],i=this._ticksByOrdinalNumber=[],o=0,s=this._ordinalMeta.categories.length,u=Math.min(s,a.length);o<u;++o){var c=a[o];n[o]=c,i[c]=o}for(var l=0;o<s;++o){for(;i[l]!=null;)l++;n.push(l),i[l]=o}},e.prototype._getTickNumber=function(t){var a=this._ticksByOrdinalNumber;return a&&t>=0&&t<a.length?a[t]:t},e.prototype.getRawOrdinalNumber=function(t){var a=this._ordinalNumbersByTick;return a&&t>=0&&t<a.length?a[t]:t},e.prototype.getLabel=function(t){if(!this.isBlank()){var a=this.getRawOrdinalNumber(t.value),n=this._ordinalMeta.categories[a];return n==null?"":n+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(t,a){this.unionExtent(t.getApproximateExtent(a))},e.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e}(V);V.registerClass(se);const ue=se;var Y=H,j=function(r){vt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="interval",t._interval=0,t._intervalPrecision=2,t}return e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return ft(t,this._extent)},e.prototype.normalize=function(t){return ht(t,this._extent)},e.prototype.scale=function(t){return gt(t,this._extent)},e.prototype.setExtent=function(t,a){var n=this._extent;isNaN(t)||(n[0]=parseFloat(t)),isNaN(a)||(n[1]=parseFloat(a))},e.prototype.unionExtent=function(t){var a=this._extent;t[0]<a[0]&&(a[0]=t[0]),t[1]>a[1]&&(a[1]=t[1]),this.setExtent(a[0],a[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=oe(t)},e.prototype.getTicks=function(t){var a=this._interval,n=this._extent,i=this._niceExtent,o=this._intervalPrecision,s=[];if(!a)return s;var u=1e4;n[0]<i[0]&&(t?s.push({value:Y(i[0]-a,o)}):s.push({value:n[0]}));for(var c=i[0];c<=i[1]&&(s.push({value:c}),c=Y(c+a,o),c!==s[s.length-1].value);)if(s.length>u)return[];var l=s.length?s[s.length-1].value:i[1];return n[1]>l&&(t?s.push({value:Y(l+a,o)}):s.push({value:n[1]})),s},e.prototype.getMinorTicks=function(t){for(var a=this.getTicks(!0),n=[],i=this.getExtent(),o=1;o<a.length;o++){for(var s=a[o],u=a[o-1],c=0,l=[],h=s.value-u.value,f=h/t;c<t-1;){var v=Y(u.value+(c+1)*f);v>i[0]&&v<i[1]&&l.push(v),c++}n.push(l)}return n},e.prototype.getLabel=function(t,a){if(t==null)return"";var n=a&&a.precision;n==null?n=Mt(t.value)||0:n==="auto"&&(n=this._intervalPrecision);var i=Y(t.value,n,!0);return _e(i)},e.prototype.calcNiceTicks=function(t,a,n){t=t||5;var i=this._extent,o=i[1]-i[0];if(isFinite(o)){o<0&&(o=-o,i.reverse());var s=Xe(i,t,a,n);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},e.prototype.calcNiceExtent=function(t){var a=this._extent;if(a[0]===a[1])if(a[0]!==0){var n=Math.abs(a[0]);t.fixMax||(a[1]+=n/2),a[0]-=n/2}else a[1]=1;var i=a[1]-a[0];isFinite(i)||(a[0]=0,a[1]=1),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval);var o=this._interval;t.fixMin||(a[0]=Y(Math.floor(a[0]/o)*o)),t.fixMax||(a[1]=Y(Math.ceil(a[1]/o)*o))},e.prototype.setNiceExtent=function(t,a){this._niceExtent=[t,a]},e.type="interval",e}(V);V.registerClass(j);var le=typeof Float32Array<"u",Qe=le?Float32Array:Array;function pt(r){return _t(r)?le?new Float32Array(r):r:new Qe(r)}var Ue="__ec_stack_";function Lt(r){return r.get("stack")||Ue+r.seriesIndex}function St(r){return r.dim+r.index}function ce(r,e){var t=[];return e.eachSeriesByType(r,function(a){fe(a)&&t.push(a)}),t}function je(r){var e={};C(r,function(u){var c=u.coordinateSystem,l=c.getBaseAxis();if(!(l.type!=="time"&&l.type!=="value"))for(var h=u.getData(),f=l.dim+"_"+l.index,v=h.getDimensionIndex(h.mapDimension(l.dim)),d=h.getStore(),x=0,b=d.count();x<b;++x){var g=d.get(v,x);e[f]?e[f].push(g):e[f]=[g]}});var t={};for(var a in e)if(e.hasOwnProperty(a)){var n=e[a];if(n){n.sort(function(u,c){return u-c});for(var i=null,o=1;o<n.length;++o){var s=n[o]-n[o-1];s>0&&(i=i===null?s:Math.min(i,s))}t[a]=i}}return t}function ve(r){var e=je(r),t=[];return C(r,function(a){var n=a.coordinateSystem,i=n.getBaseAxis(),o=i.getExtent(),s;if(i.type==="category")s=i.getBandWidth();else if(i.type==="value"||i.type==="time"){var u=i.dim+"_"+i.index,c=e[u],l=Math.abs(o[1]-o[0]),h=i.scale.getExtent(),f=Math.abs(h[1]-h[0]);s=c?l/f*c:l}else{var v=a.getData();s=Math.abs(o[1]-o[0])/v.count()}var d=X(a.get("barWidth"),s),x=X(a.get("barMaxWidth"),s),b=X(a.get("barMinWidth")||(he(a)?.5:1),s),g=a.get("barGap"),p=a.get("barCategoryGap");t.push({bandWidth:s,barWidth:d,barMaxWidth:x,barMinWidth:b,barGap:g,barCategoryGap:p,axisKey:St(i),stackId:Lt(a)})}),ta(t)}function ta(r){var e={};C(r,function(a,n){var i=a.axisKey,o=a.bandWidth,s=e[i]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},u=s.stacks;e[i]=s;var c=a.stackId;u[c]||s.autoWidthCount++,u[c]=u[c]||{width:0,maxWidth:0};var l=a.barWidth;l&&!u[c].width&&(u[c].width=l,l=Math.min(s.remainedWidth,l),s.remainedWidth-=l);var h=a.barMaxWidth;h&&(u[c].maxWidth=h);var f=a.barMinWidth;f&&(u[c].minWidth=f);var v=a.barGap;v!=null&&(s.gap=v);var d=a.barCategoryGap;d!=null&&(s.categoryGap=d)});var t={};return C(e,function(a,n){t[n]={};var i=a.stacks,o=a.bandWidth,s=a.categoryGap;if(s==null){var u=zt(i).length;s=Math.max(35-u*4,15)+"%"}var c=X(s,o),l=X(a.gap,1),h=a.remainedWidth,f=a.autoWidthCount,v=(h-c)/(f+(f-1)*l);v=Math.max(v,0),C(i,function(g){var p=g.maxWidth,M=g.minWidth;if(g.width){var y=g.width;p&&(y=Math.min(y,p)),M&&(y=Math.max(y,M)),g.width=y,h-=y+l*y,f--}else{var y=v;p&&p<y&&(y=Math.min(p,h)),M&&M>y&&(y=M),y!==v&&(g.width=y,h-=y+l*y,f--)}}),v=(h-c)/(f+(f-1)*l),v=Math.max(v,0);var d=0,x;C(i,function(g,p){g.width||(g.width=v),x=g,d+=g.width*(1+l)}),x&&(d-=x.width*l);var b=-d/2;C(i,function(g,p){t[n][p]=t[n][p]||{bandWidth:o,offset:b,width:g.width},b+=g.width*(1+l)})}),t}function ea(r,e,t){if(r&&e){var a=r[St(e)];return a!=null&&t!=null?a[Lt(t)]:a}}function Ia(r,e){var t=ce(r,e),a=ve(t);C(t,function(n){var i=n.getData(),o=n.coordinateSystem,s=o.getBaseAxis(),u=Lt(n),c=a[St(s)][u],l=c.offset,h=c.width;i.setLayout({bandWidth:c.bandWidth,offset:l,size:h})})}function Ga(r){return{seriesType:r,plan:Le(),reset:function(e){if(fe(e)){var t=e.getData(),a=e.coordinateSystem,n=a.getBaseAxis(),i=a.getOtherAxis(n),o=t.getDimensionIndex(t.mapDimension(i.dim)),s=t.getDimensionIndex(t.mapDimension(n.dim)),u=e.get("showBackground",!0),c=t.mapDimension(i.dim),l=t.getCalculationInfo("stackResultDimension"),h=ne(t,c)&&!!t.getCalculationInfo("stackedOnSeries"),f=i.isHorizontal(),v=aa(n,i),d=he(e),x=e.get("barMinHeight")||0,b=l&&t.getDimensionIndex(l),g=t.getLayout("size"),p=t.getLayout("offset");return{progress:function(M,y){for(var w=M.count,W=d&&pt(w*3),P=d&&u&&pt(w*3),S=d&&pt(w),E=a.master.getRect(),L=f?E.width:E.height,m,_=y.getStore(),A=0;(m=M.next())!=null;){var O=_.get(h?b:o,m),k=_.get(s,m),T=v,G=void 0;h&&(G=+O-_.get(o,m));var N=void 0,D=void 0,B=void 0,z=void 0;if(f){var K=a.dataToPoint([O,k]);if(h){var dt=a.dataToPoint([G,k]);T=dt[0]}N=T,D=K[1]+p,B=K[0]-T,z=g,Math.abs(B)<x&&(B=(B<0?-1:1)*x)}else{var K=a.dataToPoint([k,O]);if(h){var dt=a.dataToPoint([k,G]);T=dt[1]}N=K[0]+p,D=T,B=g,z=K[1]-T,Math.abs(z)<x&&(z=(z<=0?-1:1)*x)}d?(W[A]=N,W[A+1]=D,W[A+2]=f?B:z,P&&(P[A]=f?E.x:N,P[A+1]=f?D:E.y,P[A+2]=L),S[m]=m):y.setItemLayout(m,{x:N,y:D,width:B,height:z}),A+=3}d&&y.setLayout({largePoints:W,largeDataIndices:S,largeBackgroundPoints:P,valueAxisHorizontal:f})}}}}}}function fe(r){return r.coordinateSystem&&r.coordinateSystem.type==="cartesian2d"}function he(r){return r.pipelineContext&&r.pipelineContext.large}function aa(r,e){return e.toGlobalCoord(e.dataToCoord(e.type==="log"?1:0))}var ra=function(r,e,t,a){for(;t<a;){var n=t+a>>>1;r[n][1]<e?t=n+1:a=n}return t},ge=function(r){vt(e,r);function e(t){var a=r.call(this,t)||this;return a.type="time",a}return e.prototype.getLabel=function(t){var a=this.getSetting("useUTC");return Se(t.value,kt[we(J(this._minLevelUnit))]||kt.second,a,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(t,a,n){var i=this.getSetting("useUTC"),o=this.getSetting("locale");return ke(t,a,n,o,i)},e.prototype.getTicks=function(){var t=this._interval,a=this._extent,n=[];if(!t)return n;n.push({value:a[0],level:0});var i=this.getSetting("useUTC"),o=ca(this._minLevelUnit,this._approxInterval,i,a);return n=n.concat(o),n.push({value:a[1],level:0}),n},e.prototype.calcNiceExtent=function(t){var a=this._extent;if(a[0]===a[1]&&(a[0]-=I,a[1]+=I),a[1]===-1/0&&a[0]===1/0){var n=new Date;a[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),a[0]=a[1]-I}this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval)},e.prototype.calcNiceTicks=function(t,a,n){t=t||10;var i=this._extent,o=i[1]-i[0];this._approxInterval=o/t,a!=null&&this._approxInterval<a&&(this._approxInterval=a),n!=null&&this._approxInterval>n&&(this._approxInterval=n);var s=et.length,u=Math.min(ra(et,this._approxInterval,0,s),s-1);this._interval=et[u][1],this._minLevelUnit=et[Math.max(u-1,0)][0]},e.prototype.parse=function(t){return Vt(t)?t:+yt(t)},e.prototype.contain=function(t){return ft(this.parse(t),this._extent)},e.prototype.normalize=function(t){return ht(this.parse(t),this._extent)},e.prototype.scale=function(t){return gt(t,this._extent)},e.type="time",e}(j),et=[["second",qt],["minute",Ht],["hour",it],["quarter-day",it*6],["half-day",it*12],["day",I*1.2],["half-week",I*3.5],["week",I*7],["month",I*31],["quarter",I*95],["half-year",At/2],["year",At]];function na(r,e,t,a){var n=yt(e),i=yt(t),o=function(d){return Et(n,d,a)===Et(i,d,a)},s=function(){return o("year")},u=function(){return s()&&o("month")},c=function(){return u()&&o("day")},l=function(){return c()&&o("hour")},h=function(){return l()&&o("minute")},f=function(){return h()&&o("second")},v=function(){return f()&&o("millisecond")};switch(r){case"year":return s();case"month":return u();case"day":return c();case"hour":return l();case"minute":return h();case"second":return f();case"millisecond":return v()}}function ia(r,e){return r/=I,r>16?16:r>7.5?7:r>3.5?4:r>1.5?2:1}function oa(r){var e=30*I;return r/=e,r>6?6:r>3?3:r>2?2:1}function sa(r){return r/=it,r>12?12:r>6?6:r>3.5?4:r>2?2:1}function Wt(r,e){return r/=e?Ht:qt,r>30?30:r>20?20:r>15?15:r>10?10:r>5?5:r>2?2:1}function ua(r){return Gt(r,!0)}function la(r,e,t){var a=new Date(r);switch(J(e)){case"year":case"month":a[Jt(t)](0);case"day":a[Xt(t)](1);case"hour":a[Kt(t)](0);case"minute":a[$t(t)](0);case"second":a[Yt(t)](0),a[Zt(t)](0)}return a.getTime()}function ca(r,e,t,a){var n=1e4,i=Ne,o=0;function s(L,m,_,A,O,k,T){for(var G=new Date(m),N=m,D=G[A]();N<_&&N<=a[1];)T.push({value:N}),D+=L,G[O](D),N=G.getTime();T.push({value:N,notAdd:!0})}function u(L,m,_){var A=[],O=!m.length;if(!na(J(L),a[0],a[1],t)){O&&(m=[{value:la(new Date(a[0]),L,t)},{value:a[1]}]);for(var k=0;k<m.length-1;k++){var T=m[k].value,G=m[k+1].value;if(T!==G){var N=void 0,D=void 0,B=void 0,z=!1;switch(L){case"year":N=Math.max(1,Math.round(e/I/365)),D=We(t),B=Pe(t);break;case"half-year":case"quarter":case"month":N=oa(e),D=Be(t),B=Jt(t);break;case"week":case"half-week":case"day":N=ia(e),D=Te(t),B=Xt(t),z=!0;break;case"half-day":case"quarter-day":case"hour":N=sa(e),D=Ce(t),B=Kt(t);break;case"minute":N=Wt(e,!0),D=De(t),B=$t(t);break;case"second":N=Wt(e,!1),D=Oe(t),B=Yt(t);break;case"millisecond":N=ua(e),D=Ee(t),B=Zt(t);break}s(N,T,G,D,B,z,A),L==="year"&&_.length>1&&k===0&&_.unshift({value:_[0].value-N})}}for(var k=0;k<A.length;k++)_.push(A[k]);return A}}for(var c=[],l=[],h=0,f=0,v=0;v<i.length&&o++<n;++v){var d=J(i[v]);if(Ae(i[v])){u(i[v],c[c.length-1]||[],l);var x=i[v+1]?J(i[v+1]):null;if(d!==x){if(l.length){f=h,l.sort(function(L,m){return L.value-m.value});for(var b=[],g=0;g<l.length;++g){var p=l[g].value;(g===0||l[g-1].value!==p)&&(b.push(l[g]),p>=a[0]&&p<=a[1]&&h++)}var M=(a[1]-a[0])/e;if(h>M*1.5&&f>M/1.5||(c.push(b),h>M||r===i[v]))break}l=[]}}}for(var y=Nt(U(c,function(L){return Nt(L,function(m){return m.value>=a[0]&&m.value<=a[1]&&!m.notAdd})}),function(L){return L.length>0}),w=[],W=y.length-1,v=0;v<y.length;++v)for(var P=y[v],S=0;S<P.length;++S)w.push({value:P[S].value,level:W-v});w.sort(function(L,m){return L.value-m.value});for(var E=[],v=0;v<w.length;++v)(v===0||w[v].value!==w[v-1].value)&&E.push(w[v]);return E}V.registerClass(ge);const va=ge;var Pt=V.prototype,Q=j.prototype,fa=H,ha=Math.floor,ga=Math.ceil,at=Math.pow,F=Math.log,wt=function(r){vt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new j,t._interval=0,t}return e.prototype.getTicks=function(t){var a=this._originalScale,n=this._extent,i=a.getExtent(),o=Q.getTicks.call(this,t);return U(o,function(s){var u=s.value,c=H(at(this.base,u));return c=u===n[0]&&this._fixMin?rt(c,i[0]):c,c=u===n[1]&&this._fixMax?rt(c,i[1]):c,{value:c}},this)},e.prototype.setExtent=function(t,a){var n=F(this.base);t=F(Math.max(0,t))/n,a=F(Math.max(0,a))/n,Q.setExtent.call(this,t,a)},e.prototype.getExtent=function(){var t=this.base,a=Pt.getExtent.call(this);a[0]=at(t,a[0]),a[1]=at(t,a[1]);var n=this._originalScale,i=n.getExtent();return this._fixMin&&(a[0]=rt(a[0],i[0])),this._fixMax&&(a[1]=rt(a[1],i[1])),a},e.prototype.unionExtent=function(t){this._originalScale.unionExtent(t);var a=this.base;t[0]=F(t[0])/F(a),t[1]=F(t[1])/F(a),Pt.unionExtent.call(this,t)},e.prototype.unionExtentFromData=function(t,a){this.unionExtent(t.getApproximateExtent(a))},e.prototype.calcNiceTicks=function(t){t=t||10;var a=this._extent,n=a[1]-a[0];if(!(n===1/0||n<=0)){var i=Re(n),o=t/n*i;for(o<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&Math.abs(i)>0;)i*=10;var s=[H(ga(a[0]/i)*i),H(ha(a[1]/i)*i)];this._interval=i,this._niceExtent=s}},e.prototype.calcNiceExtent=function(t){Q.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return t=F(t)/F(this.base),ft(t,this._extent)},e.prototype.normalize=function(t){return t=F(t)/F(this.base),ht(t,this._extent)},e.prototype.scale=function(t){return t=gt(t,this._extent),at(this.base,t)},e.type="log",e}(V),de=wt.prototype;de.getMinorTicks=Q.getMinorTicks;de.getLabel=Q.getLabel;function rt(r,e){return fa(r,Mt(e))}V.registerClass(wt);const da=wt;var pa=function(){function r(e,t,a){this._prepareParams(e,t,a)}return r.prototype._prepareParams=function(e,t,a){a[1]<a[0]&&(a=[NaN,NaN]),this._dataMin=a[0],this._dataMax=a[1];var n=this._isOrdinal=e.type==="ordinal";this._needCrossZero=e.type==="interval"&&t.getNeedCrossZero&&t.getNeedCrossZero();var i=this._modelMinRaw=t.get("min",!0);ot(i)?this._modelMinNum=nt(e,i({min:a[0],max:a[1]})):i!=="dataMin"&&(this._modelMinNum=nt(e,i));var o=this._modelMaxRaw=t.get("max",!0);if(ot(o)?this._modelMaxNum=nt(e,o({min:a[0],max:a[1]})):o!=="dataMax"&&(this._modelMaxNum=nt(e,o)),n)this._axisDataLen=t.getCategories().length;else{var s=t.get("boundaryGap"),u=_t(s)?s:[s||0,s||0];typeof u[0]=="boolean"||typeof u[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Ot(u[0],1),Ot(u[1],1)]}},r.prototype.calculate=function(){var e=this._isOrdinal,t=this._dataMin,a=this._dataMax,n=this._axisDataLen,i=this._boundaryGapInner,o=e?null:a-t||Math.abs(t),s=this._modelMinRaw==="dataMin"?t:this._modelMinNum,u=this._modelMaxRaw==="dataMax"?a:this._modelMaxNum,c=s!=null,l=u!=null;s==null&&(s=e?n?0:NaN:t-i[0]*o),u==null&&(u=e?n?n-1:NaN:a+i[1]*o),(s==null||!isFinite(s))&&(s=NaN),(u==null||!isFinite(u))&&(u=NaN);var h=mt(s)||mt(u)||e&&!n;this._needCrossZero&&(s>0&&u>0&&!c&&(s=0),s<0&&u<0&&!l&&(u=0));var f=this._determinedMin,v=this._determinedMax;return f!=null&&(s=f,c=!0),v!=null&&(u=v,l=!0),{min:s,max:u,minFixed:c,maxFixed:l,isBlank:h}},r.prototype.modifyDataMinMax=function(e,t){this[ma[e]]=t},r.prototype.setDeterminedMinMax=function(e,t){var a=ya[e];this[a]=t},r.prototype.freeze=function(){this.frozen=!0},r}(),ya={min:"_determinedMin",max:"_determinedMax"},ma={min:"_dataMin",max:"_dataMax"};function xa(r,e,t){var a=r.rawExtentInfo;return a||(a=new pa(r,e,t),r.rawExtentInfo=a,a)}function nt(r,e){return e==null?null:mt(e)?NaN:r.parse(e)}function ba(r,e){var t=r.type,a=xa(r,e,r.getExtent()).calculate();r.setBlank(a.isBlank);var n=a.min,i=a.max,o=e.ecModel;if(o&&t==="time"){var s=ce("bar",o),u=!1;if(C(s,function(h){u=u||h.getBaseAxis()===e.axis}),u){var c=ve(s),l=Ma(n,i,e,c);n=l.min,i=l.max}}return{extent:[n,i],fixMin:a.minFixed,fixMax:a.maxFixed}}function Ma(r,e,t,a){var n=t.axis.getExtent(),i=n[1]-n[0],o=ea(a,t.axis);if(o===void 0)return{min:r,max:e};var s=1/0;C(o,function(v){s=Math.min(v.offset,s)});var u=-1/0;C(o,function(v){u=Math.max(v.offset+v.width,u)}),s=Math.abs(s),u=Math.abs(u);var c=s+u,l=e-r,h=1-(s+u)/i,f=l/h-l;return e+=f*(u/c),r-=f*(s/c),{min:r,max:e}}function za(r,e){var t=e,a=ba(r,t),n=a.extent,i=t.get("splitNumber");r instanceof da&&(r.base=t.get("logBase"));var o=r.type,s=t.get("interval"),u=o==="interval"||o==="time";r.setExtent(n[0],n[1]),r.calcNiceExtent({splitNumber:i,fixMin:a.fixMin,fixMax:a.fixMax,minInterval:u?t.get("minInterval"):null,maxInterval:u?t.get("maxInterval"):null}),s!=null&&r.setInterval&&r.setInterval(s)}function Va(r,e){if(e=e||r.get("type"),e)switch(e){case"category":return new ue({ordinalMeta:r.getOrdinalMeta?r.getOrdinalMeta():r.getCategories(),extent:[1/0,-1/0]});case"time":return new va({locale:r.ecModel.getLocaleModel(),useUTC:r.ecModel.get("useUTC")});default:return new(V.getClass(e)||j)}}function qa(r){var e=r.scale.getExtent(),t=e[0],a=e[1];return!(t>0&&a>0||t<0&&a<0)}function _a(r){var e=r.getLabelModel().get("formatter"),t=r.type==="category"?r.scale.getExtent()[0]:null;return r.scale.type==="time"?function(a){return function(n,i){return r.scale.getFormattedLabel(n,i,a)}}(e):$(e)?function(a){return function(n){var i=r.scale.getLabel(n),o=a.replace("{value}",i??"");return o}}(e):ot(e)?function(a){return function(n,i){return t!=null&&(i=n.value-t),a(La(r,n),i,n.level!=null?{level:n.level}:null)}}(e):function(a){return r.scale.getLabel(a)}}function La(r,e){return r.type==="category"?r.scale.getLabel(e):e.value}function Ha(r){var e=r.model,t=r.scale;if(!(!e.get(["axisLabel","show"])||t.isBlank())){var a,n,i=t.getExtent();t instanceof ue?n=t.count():(a=t.getTicks(),n=a.length);var o=r.getLabelModel(),s=_a(r),u,c=1;n>40&&(c=Math.ceil(n/40));for(var l=0;l<n;l+=c){var h=a?a[l]:{value:i[0]+l},f=s(h,l),v=o.getTextRect(f),d=Sa(v,o.get("rotate")||0);u?u.union(d):u=d}return u}}function Sa(r,e){var t=e*Math.PI/180,a=r.width,n=r.height,i=a*Math.abs(Math.cos(t))+Math.abs(n*Math.sin(t)),o=a*Math.abs(Math.sin(t))+Math.abs(n*Math.cos(t)),s=new Qt(r.x,r.y,i,o);return s}function wa(r){var e=r.get("interval");return e??"auto"}function ka(r){return r.type==="category"&&wa(r.getLabelModel())===0}function Aa(r,e){var t={};return C(r.mapDimensionsAll(e),function(a){t[Ze(r,a)]=!0}),zt(t)}function Ya(r,e,t){e&&C(Aa(e,t),function(a){var n=e.getApproximateExtent(a);n[0]<r[0]&&(r[0]=n[0]),n[1]>r[1]&&(r[1]=n[1])})}function Na(r){for(var e=[],t=0;t<r.length;t++){var a=r[t];if(!a.defaultAttr.ignore){var n=a.label,i=n.getComputedTransform(),o=n.getBoundingRect(),s=!i||i[1]<1e-5&&i[2]<1e-5,u=n.style.margin||0,c=o.clone();c.applyTransform(i),c.x-=u/2,c.y-=u/2,c.width+=u,c.height+=u;var l=s?new xt(o,i):null;e.push({label:n,labelLine:a.labelLine,rect:c,localRect:o,obb:l,priority:a.priority,defaultAttr:a.defaultAttr,layoutOption:a.computedLayoutOption,axisAligned:s,transform:i})}}return e}function pe(r,e,t,a,n,i){var o=r.length;if(o<2)return;r.sort(function(S,E){return S.rect[e]-E.rect[e]});for(var s=0,u,c=!1,l=0,h=0;h<o;h++){var f=r[h],v=f.rect;u=v[e]-s,u<0&&(v[e]-=u,f.label[e]-=u,c=!0);var d=Math.max(-u,0);l+=d,s=v[e]+v[t]}l>0&&i&&w(-l/o,0,o);var x=r[0],b=r[o-1],g,p;M(),g<0&&W(-g,.8),p<0&&W(p,.8),M(),y(g,p,1),y(p,g,-1),M(),g<0&&P(-g),p<0&&P(p);function M(){g=x.rect[e]-a,p=n-b.rect[e]-b.rect[t]}function y(S,E,L){if(S<0){var m=Math.min(E,-S);if(m>0){w(m*L,0,o);var _=m+S;_<0&&W(-_*L,1)}else W(-S*L,1)}}function w(S,E,L){S!==0&&(c=!0);for(var m=E;m<L;m++){var _=r[m],A=_.rect;A[e]+=S,_.label[e]+=S}}function W(S,E){for(var L=[],m=0,_=1;_<o;_++){var A=r[_-1].rect,O=Math.max(r[_].rect[e]-A[e]-A[t],0);L.push(O),m+=O}if(m){var k=Math.min(Math.abs(S)/m,E);if(S>0)for(var _=0;_<o-1;_++){var T=L[_]*k;w(T,0,_+1)}else for(var _=o-1;_>0;_--){var T=L[_-1]*k;w(-T,_,o)}}}function P(S){var E=S<0?-1:1;S=Math.abs(S);for(var L=Math.ceil(S/(o-1)),m=0;m<o-1;m++)if(E>0?w(L,0,m+1):w(-L,o-m-1,o),S-=L,S<=0)return}return c}function Za(r,e,t,a){return pe(r,"x","width",e,t,a)}function $a(r,e,t,a){return pe(r,"y","height",e,t,a)}function Ea(r){var e=[];r.sort(function(x,b){return b.priority-x.priority});var t=new Qt(0,0,0,0);function a(x){if(!x.ignore){var b=x.ensureState("emphasis");b.ignore==null&&(b.ignore=!1)}x.ignore=!0}for(var n=0;n<r.length;n++){var i=r[n],o=i.axisAligned,s=i.localRect,u=i.transform,c=i.label,l=i.labelLine;t.copy(i.rect),t.width-=.1,t.height-=.1,t.x+=.05,t.y+=.05;for(var h=i.obb,f=!1,v=0;v<e.length;v++){var d=e[v];if(t.intersect(d.rect)){if(o&&d.axisAligned){f=!0;break}if(d.obb||(d.obb=new xt(d.localRect,d.transform)),h||(h=new xt(s,u)),h.intersect(d.obb)){f=!0;break}}}f?(a(c),l&&a(l)):(c.attr("ignore",i.defaultAttr.ignore),l&&l.attr("ignore",i.defaultAttr.labelGuideIgnore),e.push(i))}}var q=Math.PI,Z=function(){function r(e,t){this.group=new Dt,this.opt=t,this.axisModel=e,st(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var a=new Dt({x:t.position[0],y:t.position[1],rotation:t.rotation});a.updateTransform(),this._transformGroup=a}return r.prototype.hasBuilder=function(e){return!!Rt[e]},r.prototype.add=function(e){Rt[e](this.opt,this.axisModel,this.group,this._transformGroup)},r.prototype.getGroup=function(){return this.group},r.innerTextLayout=function(e,t,a){var n=re(t-e),i,o;return ct(n)?(o=a>0?"top":"bottom",i="center"):ct(n-q)?(o=a>0?"bottom":"top",i="center"):(o="middle",n>0&&n<q?i=a>0?"right":"left":i=a>0?"left":"right"),{rotation:n,textAlign:i,textVerticalAlign:o}},r.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},r.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},r}(),Rt={axisLine:function(r,e,t,a){var n=e.get(["axisLine","show"]);if(n==="auto"&&r.handleAutoShown&&(n=r.handleAutoShown("axisLine")),!!n){var i=e.axis.getExtent(),o=a.transform,s=[i[0],0],u=[i[1],0],c=s[0]>u[0];o&&(ut(s,s,o),ut(u,u,o));var l=Fe({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),h=new Ut({shape:{x1:s[0],y1:s[1],x2:u[0],y2:u[1]},style:l,strokeContainThreshold:r.strokeContainThreshold||5,silent:!0,z2:1});jt(h.shape,h.style.lineWidth),h.anid="line",t.add(h);var f=e.get(["axisLine","symbol"]);if(f!=null){var v=e.get(["axisLine","symbolSize"]);$(f)&&(f=[f,f]),($(v)||Vt(v))&&(v=[v,v]);var d=Ie(e.get(["axisLine","symbolOffset"])||0,v),x=v[0],b=v[1];C([{rotate:r.rotation+Math.PI/2,offset:d[0],r:0},{rotate:r.rotation-Math.PI/2,offset:d[1],r:Math.sqrt((s[0]-u[0])*(s[0]-u[0])+(s[1]-u[1])*(s[1]-u[1]))}],function(g,p){if(f[p]!=="none"&&f[p]!=null){var M=Ge(f[p],-x/2,-b/2,x,b,l.stroke,!0),y=g.r+g.offset,w=c?u:s;M.attr({rotation:g.rotate,x:w[0]+y*Math.cos(r.rotation),y:w[1]-y*Math.sin(r.rotation),silent:!0,z2:11}),t.add(M)}})}}},axisTickLabel:function(r,e,t,a){var n=Ca(t,a,e,r),i=Ba(t,a,e,r);if(Da(e,i,n),Ta(t,a,e,r.tickDirection),e.get(["axisLabel","hideOverlap"])){var o=Na(U(i,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));Ea(o)}},axisName:function(r,e,t,a){var n=lt(r.axisName,e.get("name"));if(n){var i=e.get("nameLocation"),o=r.nameDirection,s=e.getModel("nameTextStyle"),u=e.get("nameGap")||0,c=e.axis.getExtent(),l=c[0]>c[1]?-1:1,h=[i==="start"?c[0]-l*u:i==="end"?c[1]+l*u:(c[0]+c[1])/2,It(i)?r.labelOffset+o*u:0],f,v=e.get("nameRotate");v!=null&&(v=v*q/180);var d;It(i)?f=Z.innerTextLayout(r.rotation,v??r.rotation,o):(f=Oa(r.rotation,i,v||0,c),d=r.axisNameAvailableWidth,d!=null&&(d=Math.abs(d/Math.sin(f.rotation)),!isFinite(d)&&(d=null)));var x=s.getFont(),b=e.get("nameTruncate",!0)||{},g=b.ellipsis,p=lt(r.nameTruncateMaxWidth,b.maxWidth,d),M=new te({x:h[0],y:h[1],rotation:f.rotation,silent:Z.isLabelSilent(e),style:ee(s,{text:n,font:x,overflow:"truncate",width:p,ellipsis:g,fill:s.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:s.get("align")||f.textAlign,verticalAlign:s.get("verticalAlign")||f.textVerticalAlign}),z2:1});if(ze({el:M,componentModel:e,itemName:n}),M.__fullText=n,M.anid="name",e.get("triggerEvent")){var y=Z.makeAxisEventDataBase(e);y.targetType="axisName",y.name=n,ae(M).eventData=y}a.add(M),M.updateTransform(),t.add(M),M.decomposeTransform()}}};function Oa(r,e,t,a){var n=re(t-r),i,o,s=a[0]>a[1],u=e==="start"&&!s||e!=="start"&&s;return ct(n-q/2)?(o=u?"bottom":"top",i="center"):ct(n-q*1.5)?(o=u?"top":"bottom",i="center"):(o="middle",n<q*1.5&&n>q/2?i=u?"left":"right":i=u?"right":"left"),{rotation:n,textAlign:i,textVerticalAlign:o}}function Da(r,e,t){if(!ka(r.axis)){var a=r.get(["axisLabel","showMinLabel"]),n=r.get(["axisLabel","showMaxLabel"]);e=e||[],t=t||[];var i=e[0],o=e[1],s=e[e.length-1],u=e[e.length-2],c=t[0],l=t[1],h=t[t.length-1],f=t[t.length-2];a===!1?(R(i),R(c)):Ft(i,o)&&(a?(R(o),R(l)):(R(i),R(c))),n===!1?(R(s),R(h)):Ft(u,s)&&(n?(R(u),R(f)):(R(s),R(h)))}}function R(r){r&&(r.ignore=!0)}function Ft(r,e){var t=r&&r.getBoundingRect().clone(),a=e&&e.getBoundingRect().clone();if(!(!t||!a)){var n=Ve([]);return qe(n,n,-r.rotation),t.applyTransform(Ct([],n,r.getLocalTransform())),a.applyTransform(Ct([],n,e.getLocalTransform())),t.intersect(a)}}function It(r){return r==="middle"||r==="center"}function ye(r,e,t,a,n){for(var i=[],o=[],s=[],u=0;u<r.length;u++){var c=r[u].coord;o[0]=c,o[1]=0,s[0]=c,s[1]=t,e&&(ut(o,o,e),ut(s,s,e));var l=new Ut({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:a,z2:2,autoBatch:!0,silent:!0});jt(l.shape,l.style.lineWidth),l.anid=n+"_"+r[u].tickValue,i.push(l)}return i}function Ca(r,e,t,a){var n=t.axis,i=t.getModel("axisTick"),o=i.get("show");if(o==="auto"&&a.handleAutoShown&&(o=a.handleAutoShown("axisTick")),!(!o||n.scale.isBlank())){for(var s=i.getModel("lineStyle"),u=a.tickDirection*i.get("length"),c=n.getTicksCoords(),l=ye(c,e.transform,u,st(s.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}),"ticks"),h=0;h<l.length;h++)r.add(l[h]);return l}}function Ta(r,e,t,a){var n=t.axis,i=t.getModel("minorTick");if(!(!i.get("show")||n.scale.isBlank())){var o=n.getMinorTicksCoords();if(o.length)for(var s=i.getModel("lineStyle"),u=a*i.get("length"),c=st(s.getLineStyle(),st(t.getModel("axisTick").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})),l=0;l<o.length;l++)for(var h=ye(o[l],e.transform,u,c,"minorticks_"+l),f=0;f<h.length;f++)r.add(h[f])}}function Ba(r,e,t,a){var n=t.axis,i=lt(a.axisLabelShow,t.get(["axisLabel","show"]));if(!(!i||n.scale.isBlank())){var o=t.getModel("axisLabel"),s=o.get("margin"),u=n.getViewLabels(),c=(lt(a.labelRotate,o.get("rotate"))||0)*q/180,l=Z.innerTextLayout(a.rotation,c,a.labelDirection),h=t.getCategories&&t.getCategories(!0),f=[],v=Z.isLabelSilent(t),d=t.get("triggerEvent");return C(u,function(x,b){var g=n.scale.type==="ordinal"?n.scale.getRawOrdinalNumber(x.tickValue):x.tickValue,p=x.formattedLabel,M=x.rawLabel,y=o;if(h&&h[g]){var w=h[g];bt(w)&&w.textStyle&&(y=new He(w.textStyle,o,t.ecModel))}var W=y.getTextColor()||t.get(["axisLine","lineStyle","color"]),P=n.dataToCoord(g),S=y.getShallow("align",!0)||l.textAlign,E=tt(y.getShallow("alignMinLabel",!0),S),L=tt(y.getShallow("alignMaxLabel",!0),S),m=y.getShallow("verticalAlign",!0)||y.getShallow("baseline",!0)||l.textVerticalAlign,_=tt(y.getShallow("verticalAlignMinLabel",!0),m),A=tt(y.getShallow("verticalAlignMaxLabel",!0),m),O=new te({x:P,y:a.labelOffset+a.labelDirection*s,rotation:l.rotation,silent:v,z2:10+(x.level||0),style:ee(y,{text:p,align:b===0?E:b===u.length-1?L:S,verticalAlign:b===0?_:b===u.length-1?A:m,fill:ot(W)?W(n.type==="category"?M:n.type==="value"?g+"":g,b):W})});if(O.anid="label_"+g,d){var k=Z.makeAxisEventDataBase(t);k.targetType="axisLabel",k.value=M,k.tickIndex=b,n.type==="category"&&(k.dataIndex=g),ae(O).eventData=k}e.add(O),O.updateTransform(),f.push(O),r.add(O),O.decomposeTransform()}),f}}const Ka=Z;export{Ka as A,j as I,Tt as O,Ha as a,Ra as b,Va as c,xa as d,Pa as e,Ga as f,Aa as g,$a as h,qa as i,Ea as j,La as k,Ia as l,wa as m,za as n,_a as o,Na as p,ka as q,ba as r,Za as s,Fa as t,Ya as u};
