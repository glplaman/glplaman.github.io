import{_ as q,M,r,c as f,u as a,d as s,s as c,z as d,A as N,v as R,C as u,e as A,a as k,p as B,l as F}from"./index-uv-sJSP2.js";import{m as w}from"./md5.min-BplRYwGp.js";import{a as L}from"./axios-Cm0UX6qg.js";import{M as D,$ as E}from"./Modal-BUJyaySo.js";const e=m=>(B("data-v-099702d1"),m=m(),F(),m),J={class:"wrap"},O={key:0,class:"reg"},T=e(()=>s("div",{class:"img1"},null,-1)),z=e(()=>s("h1",null,"register",-1)),P={class:"item"},$=e(()=>s("span",{class:"iconfont icon-customer-fill"},null,-1)),j={class:"item"},G=e(()=>s("span",{class:"iconfont icon-boshimao"},null,-1)),H={class:"item"},K=e(()=>s("span",{class:"iconfont icon-unlock-fill"},null,-1)),Q={class:"item"},W=e(()=>s("span",{class:"iconfont icon-unlock-fill"},null,-1)),X=e(()=>s("span",{class:"confirm"},"confirm",-1)),Y={class:"tips"},Z=e(()=>s("span",null,"I agree with the items.",-1)),ss=e(()=>s("button",{class:"btn reg-btn"},"register",-1)),es={class:"tips"},os=e(()=>s("span",null,"Already has an account?",-1)),ts={key:1,class:"login"},ns=e(()=>s("div",{class:"img2"},null,-1)),ls=e(()=>s("h1",null,"login",-1)),as={class:"item"},is=e(()=>s("span",{class:"iconfont icon-boshimao"},null,-1)),cs={class:"item"},us=e(()=>s("span",{class:"iconfont icon-unlock-fill"},null,-1)),rs=e(()=>s("label",{class:"tips"},[s("input",{class:"cb",type:"checkbox",name:"urem",id:"cb-rem"}),s("span",null,"Remember me?")],-1)),ds=e(()=>s("button",{class:"btn sub-btn"},"login",-1)),ps={class:"tips"},ms={class:"tips"},gs=e(()=>s("span",null,"Don't have an account?",-1)),hs={class:"tips"},_s=e(()=>s("span",null,"Forgot password",-1)),vs={__name:"Register",setup(m){const h=M();let _=r(!1),b=r("");const i=o=>{_.value=!0,b.value=o};let g=r(!1),t=r({usn:"24090603",uname:"glpla",upass:"1234"}),p=r("1234");const y=()=>{g.value=!g.value},v=r(!1),x=async()=>{if(t.value.upass!=p.value){console.log("password not match"),i("password not match");return}if(!v.value){console.log("pls check"),i("pls check");return}L.post("/api/user/register",{usn:t.value.usn,uname:t.value.uname,upass:w.md5(t.value.upass)}).then(o=>{console.log(o.data),o.data.errno==0?(console.log("register success"),i("register success"),g.value=!1):(console.log("err",o.data.msg),i(o.data.msg))}).catch(o=>{console.log("err",o),i("server down")}).finally(()=>{console.log("register done logging")})},S=()=>{E({usn:t.value.usn,upass:w.md5(t.value.upass)}).then(o=>{switch(console.log(o),o.errno){case 0:console.log("login success"),i("login success"),h.replace({path:"/home"}),localStorage.setItem("token",JSON.stringify(o.data));break;default:console.log(o.msg),i(o.msg);break}}).catch(o=>{console.log("err",o),i("server down")})},V=()=>{h.replace("/home")},C=()=>{h.replace({path:"/home"}),localStorage.setItem("token",JSON.stringify({msg:"test"}))},I=()=>{i("test")},U=()=>{_.value=!1};return(o,n)=>(k(),f("div",J,[a(g)?(k(),f("div",O,[T,s("form",{class:"form",id:"reg",onSubmit:u(x,["prevent"])},[z,s("div",P,[c(s("input",{class:"ipt",type:"text",name:"uname",required:"",maxlength:"16","onUpdate:modelValue":n[0]||(n[0]=l=>a(t).uname=l),key:"log0"},null,512),[[d,a(t).uname,void 0,{trim:!0}]]),$]),s("div",j,[c(s("input",{class:"ipt",type:"text",name:"usn",required:"",maxlength:"8","onUpdate:modelValue":n[1]||(n[1]=l=>a(t).usn=l),key:"log1"},null,512),[[d,a(t).usn,void 0,{trim:!0}]]),G]),s("div",H,[c(s("input",{class:"ipt",type:"password",name:"upass",required:"",maxlength:"16","onUpdate:modelValue":n[2]||(n[2]=l=>a(t).upass=l),key:"log2"},null,512),[[d,a(t).upass,void 0,{trim:!0}]]),K]),s("div",Q,[c(s("input",{class:"ipt",type:"password",name:"upass-check",required:"",maxlength:"16","onUpdate:modelValue":n[3]||(n[3]=l=>N(p)?p.value=l:p=l),key:"log3"},null,512),[[d,a(p),void 0,{trim:!0}]]),W,X]),s("label",Y,[c(s("input",{class:"cb",type:"checkbox",name:"uagree",id:"cb-agree","onUpdate:modelValue":n[4]||(n[4]=l=>v.value=l)},null,512),[[R,v.value]]),Z]),ss,s("div",es,[os,s("a",{href:"",class:"",onClick:u(y,["prevent"])},"login")])],32)])):(k(),f("div",ts,[ns,s("form",{class:"form",id:"login",onSubmit:u(S,["prevent"])},[ls,s("div",as,[c(s("input",{class:"ipt",type:"text",name:"usn",required:"",maxlength:"8","onUpdate:modelValue":n[5]||(n[5]=l=>a(t).usn=l),key:"reg0"},null,512),[[d,a(t).usn,void 0,{trim:!0}]]),is]),s("div",cs,[c(s("input",{class:"ipt",type:"password",name:"upass",required:"",maxlength:"20","onUpdate:modelValue":n[6]||(n[6]=l=>a(t).upass=l),key:"reg1"},null,512),[[d,a(t).upass,void 0,{trim:!0}]]),us]),rs,ds,s("div",null,[s("div",ps,[s("a",{href:"",class:"",onClick:u(V,["prevent"])},"visit as a guest?"),s("a",{href:"",class:"",onClick:u(C,["prevent"])},"Test")]),s("div",ms,[gs,s("a",{href:"",class:"",onClick:u(y,["prevent"])},"register")]),s("div",hs,[_s,s("a",{href:"",class:"",onClick:u(I,["prevent"])},"Find back")])])],32)])),A(D,{show:a(_),msg:a(b),close:U},null,8,["show","msg"])]))}},ws=q(vs,[["__scopeId","data-v-099702d1"]]);export{ws as default};
