import{h as S,r as n,_ as B,M as w,o as C,i as I,c as v,e as P,D as b,E as x,d as o,F as m,f as y,u as k,a as g,y as z,t as _,n as D,p as M,l as F}from"./index-DeD7qWbD.js";import{d as h}from"./api-aUDBALjn.js";import"./axios-Cm0UX6qg.js";const $=S("food",()=>{let s=n([]),r=n({}),a=n(!1),t=n(""),d=n(0),p=n(0),i=n(8);return{goods:s,good:r,isLoading:a,errMsg:t,total:d,pageSize:i,pages:p,fetchGood:async()=>{a.value=!0,t.value="loading...";const e=await h();s.value=e.data.cont,a.value=!1,t.value="loading ok"},fetchGoodById:async e=>{a.value=!0,t.value="loading...";const u=await h();r.value=u.data.cont.find(f=>f.id==e),console.log(r.value),a.value=!1,t.value="loading ok"},fetchGoodByPage:async e=>{a.value=!0,t.value="loading...";const u=await h();d.value=u.data.cont.length,p.value=Math.ceil(d.value/i.value);const f=u.data.cont.slice((e-1)*i.value,e*i.value);s.value=f,a.value=!1,t.value="loading ok"}}}),A=s=>(M("data-v-b1dc93c2"),s=s(),F(),s),E={class:"admin-good"},L=A(()=>o("div",{class:"item leading"},[o("div",null,"序号"),o("div",null,"缩略图"),o("div",null,"商品名称"),o("div",null,"联系电话"),o("div",null,"操作")],-1)),V=["src"],N=["onClick"],R={class:"page-wrap"},T=["onClick"],j={__name:"AdminGood",setup(s){const r=w(),a=$(),t=n(1),d=c=>{t.value=c,a.fetchGoodByPage(c)};C(()=>{d(1)});const p=c=>{console.log(c),r.push({name:"admingooddetail",params:{id:c}})},i=I(()=>(t.value-1)*a.pageSize);return(c,G)=>(g(),v("div",E,[L,P(x,{tag:"ul",appear:"",class:"lists","move-class":"tg-class"},{default:b(()=>[(g(!0),v(m,null,y(k(a).goods,(l,e)=>(g(),v("li",{class:"item",key:l.id,style:z(`--delay: ${e}`)},[o("div",null,_(e+1+i.value),1),o("img",{class:"img",src:"https://glpla.github.io/utils"+l.image,alt:""},null,8,V),o("div",null,_(l.name),1),o("div",null,_(l.phone),1),o("button",{onClick:u=>p(l.id)},"Details",8,N)],4))),128))]),_:1}),o("div",R,[(g(!0),v(m,null,y(k(a).pages,(l,e)=>(g(),v("div",{class:D(["page",{active:e+1==t.value}]),key:e,onClick:u=>d(e+1)},_(l),11,T))),128))])]))}},K=B(j,[["__scopeId","data-v-b1dc93c2"]]);export{K as default};
