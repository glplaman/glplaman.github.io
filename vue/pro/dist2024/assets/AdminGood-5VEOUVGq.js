import{f as S,r as n,_ as B,M as C,o as w,g as I,c as v,d as x,B as P,C as b,k as o,F as m,l as y,u as k,a as g,D as z,t as _,x as D,p as M,j as F}from"./index--aP1ir6c.js";import{d as h}from"./api-CneDOw5Z.js";import"./axios-Cm0UX6qg.js";const $=S("food",()=>{let s=n([]),r=n({}),a=n(!1),t=n(""),d=n(0),p=n(0),i=n(8);return{goods:s,good:r,isLoading:a,errMsg:t,total:d,pageSize:i,pages:p,fetchGood:async()=>{a.value=!0,t.value="loading...";const e=await h();s.value=e.data.cont,a.value=!1,t.value="loading ok"},fetchGoodById:async e=>{a.value=!0,t.value="loading...";const u=await h();r.value=u.data.cont.find(f=>f.id==e),console.log(r.value),a.value=!1,t.value="loading ok"},fetchGoodByPage:async e=>{a.value=!0,t.value="loading...";const u=await h();d.value=u.data.cont.length,p.value=Math.ceil(d.value/i.value);const f=u.data.cont.slice((e-1)*i.value,e*i.value);s.value=f,a.value=!1,t.value="loading ok"}}}),A=s=>(M("data-v-4778ab33"),s=s(),F(),s),L={class:"admin-good"},V=A(()=>o("div",{class:"item leading"},[o("div",null,"序号"),o("div",null,"缩略图"),o("div",null,"商品名称"),o("div",null,"联系电话"),o("div",null,"操作")],-1)),j=["src"],E=["onClick"],N={class:"page-wrap"},R=["onClick"],T={__name:"AdminGood",setup(s){const r=C(),a=$(),t=n(1),d=c=>{t.value=c,a.fetchGoodByPage(c)};w(()=>{d(1)});const p=c=>{console.log(c),r.push({name:"admingooddetail",params:{id:c}})},i=I(()=>(t.value-1)*a.pageSize);return(c,G)=>(g(),v("div",L,[V,x(b,{tag:"ul",appear:"",class:"lists","move-class":"tg-class"},{default:P(()=>[(g(!0),v(m,null,y(k(a).goods,(l,e)=>(g(),v("li",{class:"item",key:l.id,style:z(`--delay: ${e}`)},[o("div",null,_(e+1+i.value),1),o("img",{class:"img",src:"https://glpla.github.io/utils"+l.image,alt:""},null,8,j),o("div",null,_(l.name),1),o("div",null,_(l.phone),1),o("button",{onClick:u=>p(l.id)},"Details",8,E)],4))),128))]),_:1}),o("div",N,[(g(!0),v(m,null,y(k(a).pages,(l,e)=>(g(),v("div",{class:D(["page",{active:e+1==t.value}]),key:e,onClick:u=>d(e+1)},_(l),11,R))),128))])]))}},K=B(T,[["__scopeId","data-v-4778ab33"]]);export{K as default};
