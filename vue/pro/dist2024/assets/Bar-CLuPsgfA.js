import{_ as pt,r as vt,o as gt,a as mt,c as yt,d as _t}from"./index-DeD7qWbD.js";import{r as xt,n as At,_ as E,b as D,d as St,c as je,i as Me,s as J,E as Mt,a as ge,e as z,f as Je,m as we,g as b,M as wt,S as de,C as bt,h as Dt,l as O,j as Qe,k as It,o as H,p as me,q as et,t as Rt,u as ce,v as Lt,G as fe,w as Pt,x as Tt,y as Ct,z as be,A as De,B as Ot,Z as Et,D as Vt,R as B,F as Zt,H as kt,I as Ie,J as ye,P as Bt,K as zt,L as Wt,N as pe,O as G,Q as U,T as _e,U as tt,V as Re,W as Nt,X as Gt,Y as Ft,$ as X,a0 as Yt,a1 as Ht,a2 as Le,a3 as xe,a4 as Xt,a5 as rt,a6 as Ut,a7 as $t,a8 as Kt,a9 as qt,aa as jt,ab as Jt,ac as Qt,ad as Pe,ae as er,af as tr}from"./installCanvasRenderer-CioQ-8se.js";import{i as rr}from"./install-BeibJXVY.js";import{c as at,g as ar,a as ir,i as nr}from"./labelHelper-DF2NpVfj.js";import{u as or,e as sr,c as lr,l as ur}from"./AxisBuilder-BHtNzj-w.js";import{S as Te}from"./sausage-ropfwOpW.js";import{g as hr}from"./sectorHelper-NGw3jD65.js";import"./axisAlignTicks-C49psHoB.js";import"./install-kFfJrlMU.js";var Ce="\0_ec_interaction_mutex";function Oe(i,r){return!!dr(i)[r]}function dr(i){return i[Ce]||(i[Ce]={})}xt({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},At);var cr=function(i){E(r,i);function r(e){var t=i.call(this)||this;t._zr=e;var a=D(t._mousedownHandler,t),n=D(t._mousemoveHandler,t),o=D(t._mouseupHandler,t),s=D(t._mousewheelHandler,t),l=D(t._pinchHandler,t);return t.enable=function(u,h){this.disable(),this._opt=St(je(h)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(e.on("mousedown",a),e.on("mousemove",n),e.on("mouseup",o)),(u===!0||u==="scale"||u==="zoom")&&(e.on("mousewheel",s),e.on("pinch",l))},t.disable=function(){e.off("mousedown",a),e.off("mousemove",n),e.off("mouseup",o),e.off("mousewheel",s),e.off("pinch",l)},t}return r.prototype.isDragging=function(){return this._dragging},r.prototype.isPinching=function(){return this._pinching},r.prototype.setPointerChecker=function(e){this.pointerChecker=e},r.prototype.dispose=function(){this.disable()},r.prototype._mousedownHandler=function(e){if(!Me(e)){for(var t=e.target;t;){if(t.draggable)return;t=t.__hostTarget||t.parent}var a=e.offsetX,n=e.offsetY;this.pointerChecker&&this.pointerChecker(e,a,n)&&(this._x=a,this._y=n,this._dragging=!0)}},r.prototype._mousemoveHandler=function(e){if(!(!this._dragging||!j("moveOnMouseMove",e,this._opt)||e.gestureEvent==="pinch"||Oe(this._zr,"globalPan"))){var t=e.offsetX,a=e.offsetY,n=this._x,o=this._y,s=t-n,l=a-o;this._x=t,this._y=a,this._opt.preventDefaultMouseMove&&J(e.event),it(this,"pan","moveOnMouseMove",e,{dx:s,dy:l,oldX:n,oldY:o,newX:t,newY:a,isAvailableBehavior:null})}},r.prototype._mouseupHandler=function(e){Me(e)||(this._dragging=!1)},r.prototype._mousewheelHandler=function(e){var t=j("zoomOnMouseWheel",e,this._opt),a=j("moveOnMouseWheel",e,this._opt),n=e.wheelDelta,o=Math.abs(n),s=e.offsetX,l=e.offsetY;if(!(n===0||!t&&!a)){if(t){var u=o>3?1.4:o>1?1.2:1.1,h=n>0?u:1/u;ae(this,"zoom","zoomOnMouseWheel",e,{scale:h,originX:s,originY:l,isAvailableBehavior:null})}if(a){var d=Math.abs(n),p=(n>0?1:-1)*(d>3?.4:d>1?.15:.05);ae(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:p,originX:s,originY:l,isAvailableBehavior:null})}}},r.prototype._pinchHandler=function(e){if(!Oe(this._zr,"globalPan")){var t=e.pinchScale>1?1.1:1/1.1;ae(this,"zoom",null,e,{scale:t,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})}},r}(Mt);function ae(i,r,e,t,a){i.pointerChecker&&i.pointerChecker(t,a.originX,a.originY)&&(J(t.event),it(i,r,e,t,a))}function it(i,r,e,t,a){a.isAvailableBehavior=D(j,null,e,t),i.trigger(r,a)}function j(i,r,e){var t=e[i];return!i||t&&(!ge(t)||r.event[t+"Key"])}const fr=cr;function ee(i,r,e,t,a,n){i=i||0;var o=e[1]-e[0];if(a!=null&&(a=W(a,[0,o])),n!=null&&(n=Math.max(n,a??0)),t==="all"){var s=Math.abs(r[1]-r[0]);s=W(s,[0,o]),a=n=W(s,[a,n]),t=0}r[0]=W(r[0],e),r[1]=W(r[1],e);var l=ie(r,t);r[t]+=i;var u=a||0,h=e.slice();l.sign<0?h[0]+=u:h[1]-=u,r[t]=W(r[t],h);var d;return d=ie(r,t),a!=null&&(d.sign!==l.sign||d.span<a)&&(r[1-t]=r[t]+l.sign*a),d=ie(r,t),n!=null&&d.span>n&&(r[1-t]=r[t]+d.sign*n),r}function ie(i,r){var e=i[r]-i[1-r];return{span:Math.abs(e),sign:e>0?-1:e<0?1:r?-1:1}}function W(i,r){return Math.min(r[1]!=null?r[1]:1/0,Math.max(r[0]!=null?r[0]:-1/0,i))}var Ee=["x","y","radius","angle","single"],pr=["cartesian2d","polar","singleAxis"];function vr(i){var r=i.get("coordinateSystem");return Je(pr,r)>=0}function k(i){return i+"Axis"}function gr(i,r){var e=z(),t=[],a=z();i.eachComponent({mainType:"dataZoom",query:r},function(h){a.get(h.uid)||s(h)});var n;do n=!1,i.eachComponent("dataZoom",o);while(n);function o(h){!a.get(h.uid)&&l(h)&&(s(h),n=!0)}function s(h){a.set(h.uid,!0),t.push(h),u(h)}function l(h){var d=!1;return h.eachTargetAxis(function(p,f){var c=e.get(p);c&&c[f]&&(d=!0)}),d}function u(h){h.eachTargetAxis(function(d,p){(e.get(d)||e.set(d,[]))[p]=!0})}return t}function nt(i){var r=i.ecModel,e={infoList:[],infoMap:z()};return i.eachTargetAxis(function(t,a){var n=r.getComponent(k(t),a);if(n){var o=n.getCoordSysModel();if(o){var s=o.uid,l=e.infoMap.get(s);l||(l={model:o,axisModels:[]},e.infoList.push(l),e.infoMap.set(s,l)),l.axisModels.push(n)}}}),e}var ne=function(){function i(){this.indexList=[],this.indexMap=[]}return i.prototype.add=function(r){this.indexMap[r]||(this.indexList.push(r),this.indexMap[r]=!0)},i}(),Q=function(i){E(r,i);function r(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=r.type,e._autoThrottle=!0,e._noTarget=!0,e._rangePropMode=["percent","percent"],e}return r.prototype.init=function(e,t,a){var n=Ve(e);this.settledOption=n,this.mergeDefaultAndTheme(e,a),this._doInit(n)},r.prototype.mergeOption=function(e){var t=Ve(e);we(this.option,e,!0),we(this.settledOption,t,!0),this._doInit(t)},r.prototype._doInit=function(e){var t=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var a=this.settledOption;b([["start","startValue"],["end","endValue"]],function(n,o){this._rangePropMode[o]==="value"&&(t[n[0]]=a[n[0]]=null)},this),this._resetTarget()},r.prototype._resetTarget=function(){var e=this.get("orient",!0),t=this._targetAxisInfoMap=z(),a=this._fillSpecifiedTargetAxis(t);a?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(t,this._orient)),this._noTarget=!0,t.each(function(n){n.indexList.length&&(this._noTarget=!1)},this)},r.prototype._fillSpecifiedTargetAxis=function(e){var t=!1;return b(Ee,function(a){var n=this.getReferringComponents(k(a),wt);if(n.specified){t=!0;var o=new ne;b(n.models,function(s){o.add(s.componentIndex)}),e.set(a,o)}},this),t},r.prototype._fillAutoTargetAxisByOrient=function(e,t){var a=this.ecModel,n=!0;if(n){var o=t==="vertical"?"y":"x",s=a.findComponents({mainType:o+"Axis"});l(s,o)}if(n){var s=a.findComponents({mainType:"singleAxis",filter:function(h){return h.get("orient",!0)===t}});l(s,"single")}function l(u,h){var d=u[0];if(d){var p=new ne;if(p.add(d.componentIndex),e.set(h,p),n=!1,h==="x"||h==="y"){var f=d.getReferringComponents("grid",de).models[0];f&&b(u,function(c){d.componentIndex!==c.componentIndex&&f===c.getReferringComponents("grid",de).models[0]&&p.add(c.componentIndex)})}}}n&&b(Ee,function(u){if(n){var h=a.findComponents({mainType:k(u),filter:function(p){return p.get("type",!0)==="category"}});if(h[0]){var d=new ne;d.add(h[0].componentIndex),e.set(u,d),n=!1}}},this)},r.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis(function(t){!e&&(e=t)},this),e==="y"?"vertical":"horizontal"},r.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},r.prototype._updateRangeUse=function(e){var t=this._rangePropMode,a=this.get("rangeMode");b([["start","startValue"],["end","endValue"]],function(n,o){var s=e[n[0]]!=null,l=e[n[1]]!=null;s&&!l?t[o]="percent":!s&&l?t[o]="value":a?t[o]=a[o]:s&&(t[o]="percent")})},r.prototype.noTarget=function(){return this._noTarget},r.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis(function(t,a){e==null&&(e=this.ecModel.getComponent(k(t),a))},this),e},r.prototype.eachTargetAxis=function(e,t){this._targetAxisInfoMap.each(function(a,n){b(a.indexList,function(o){e.call(t,n,o)})})},r.prototype.getAxisProxy=function(e,t){var a=this.getAxisModel(e,t);if(a)return a.__dzAxisProxy},r.prototype.getAxisModel=function(e,t){var a=this._targetAxisInfoMap.get(e);if(a&&a.indexMap[t])return this.ecModel.getComponent(k(e),t)},r.prototype.setRawRange=function(e){var t=this.option,a=this.settledOption;b([["start","startValue"],["end","endValue"]],function(n){(e[n[0]]!=null||e[n[1]]!=null)&&(t[n[0]]=a[n[0]]=e[n[0]],t[n[1]]=a[n[1]]=e[n[1]])},this),this._updateRangeUse(e)},r.prototype.setCalculatedRange=function(e){var t=this.option;b(["start","startValue","end","endValue"],function(a){t[a]=e[a]})},r.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},r.prototype.getValueRange=function(e,t){if(e==null&&t==null){var a=this.findRepresentativeAxisProxy();if(a)return a.getDataValueWindow()}else return this.getAxisProxy(e,t).getDataValueWindow()},r.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var t,a=this._targetAxisInfoMap.keys(),n=0;n<a.length;n++)for(var o=a[n],s=this._targetAxisInfoMap.get(o),l=0;l<s.indexList.length;l++){var u=this.getAxisProxy(o,s.indexList[l]);if(u.hostedBy(this))return u;t||(t=u)}return t},r.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},r.prototype.getOrient=function(){return this._orient},r.type="dataZoom",r.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],r.defaultOption={z:4,filterMode:"filter",start:0,end:100},r}(bt);function Ve(i){var r={};return b(["start","end","startValue","endValue","throttle"],function(e){i.hasOwnProperty(e)&&(r[e]=i[e])}),r}var mr=function(i){E(r,i);function r(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,t,a,n){this.dataZoomModel=e,this.ecModel=t,this.api=a},r.type="dataZoom",r}(Dt);const ot=mr;var N=b,Ze=H,yr=function(){function i(r,e,t,a){this._dimName=r,this._axisIndex=e,this.ecModel=a,this._dataZoomModel=t}return i.prototype.hostedBy=function(r){return this._dataZoomModel===r},i.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},i.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},i.prototype.getTargetSeriesModels=function(){var r=[];return this.ecModel.eachSeries(function(e){if(vr(e)){var t=k(this._dimName),a=e.getReferringComponents(t,de).models[0];a&&this._axisIndex===a.componentIndex&&r.push(e)}},this),r},i.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},i.prototype.getMinMaxSpan=function(){return je(this._minMaxSpan)},i.prototype.calculateDataWindow=function(r){var e=this._dataExtent,t=this.getAxisModel(),a=t.axis.scale,n=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],l=[],u;N(["start","end"],function(p,f){var c=r[p],v=r[p+"Value"];n[f]==="percent"?(c==null&&(c=o[f]),v=a.parse(O(c,o,e))):(u=!0,v=v==null?e[f]:a.parse(v),c=O(v,e,o)),l[f]=v==null||isNaN(v)?e[f]:v,s[f]=c==null||isNaN(c)?o[f]:c}),Ze(l),Ze(s);var h=this._minMaxSpan;u?d(l,s,e,o,!1):d(s,l,o,e,!0);function d(p,f,c,v,m){var y=m?"Span":"ValueSpan";ee(0,p,c,"all",h["min"+y],h["max"+y]);for(var g=0;g<2;g++)f[g]=O(p[g],c,v,!0),m&&(f[g]=a.parse(f[g]))}return{valueWindow:l,percentWindow:s}},i.prototype.reset=function(r){if(r===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=_r(this,this._dimName,e),this._updateMinMaxSpan();var t=this.calculateDataWindow(r.settledOption);this._valueWindow=t.valueWindow,this._percentWindow=t.percentWindow,this._setAxisModel()}},i.prototype.filterData=function(r,e){if(r!==this._dataZoomModel)return;var t=this._dimName,a=this.getTargetSeriesModels(),n=r.get("filterMode"),o=this._valueWindow;if(n==="none")return;N(a,function(l){var u=l.getData(),h=u.mapDimensionsAll(t);if(h.length){if(n==="weakFilter"){var d=u.getStore(),p=Qe(h,function(f){return u.getDimensionIndex(f)},u);u.filterSelf(function(f){for(var c,v,m,y=0;y<h.length;y++){var g=d.get(p[y],f),S=!isNaN(g),A=g<o[0],_=g>o[1];if(S&&!A&&!_)return!0;S&&(m=!0),A&&(c=!0),_&&(v=!0)}return m&&c&&v})}else N(h,function(f){if(n==="empty")l.setData(u=u.map(f,function(v){return s(v)?v:NaN}));else{var c={};c[f]=o,u.selectRange(c)}});N(h,function(f){u.setApproximateExtent(o,f)})}});function s(l){return l>=o[0]&&l<=o[1]}},i.prototype._updateMinMaxSpan=function(){var r=this._minMaxSpan={},e=this._dataZoomModel,t=this._dataExtent;N(["min","max"],function(a){var n=e.get(a+"Span"),o=e.get(a+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?n=O(t[0]+o,t,[0,100],!0):n!=null&&(o=O(n,[0,100],t,!0)-t[0]),r[a+"Span"]=n,r[a+"ValueSpan"]=o},this)},i.prototype._setAxisModel=function(){var r=this.getAxisModel(),e=this._percentWindow,t=this._valueWindow;if(e){var a=It(t,[0,500]);a=Math.min(a,20);var n=r.axis.scale.rawExtentInfo;e[0]!==0&&n.setDeterminedMinMax("min",+t[0].toFixed(a)),e[1]!==100&&n.setDeterminedMinMax("max",+t[1].toFixed(a)),n.freeze()}},i}();function _r(i,r,e){var t=[1/0,-1/0];N(e,function(o){or(t,o.getData(),r)});var a=i.getAxisModel(),n=sr(a.axis.scale,a,t).calculate();return[n.min,n.max]}var xr={getTargetSeries:function(i){function r(a){i.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(o,s){var l=i.getComponent(k(o),s);a(o,s,l,n)})})}r(function(a,n,o,s){o.__dzAxisProxy=null});var e=[];r(function(a,n,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new yr(a,n,s,i),e.push(o.__dzAxisProxy))});var t=z();return b(e,function(a){b(a.getTargetSeriesModels(),function(n){t.set(n.uid,n)})}),t},overallReset:function(i,r){i.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(t,a){e.getAxisProxy(t,a).reset(e)}),e.eachTargetAxis(function(t,a){e.getAxisProxy(t,a).filterData(e,r)})}),i.eachComponent("dataZoom",function(e){var t=e.findRepresentativeAxisProxy();if(t){var a=t.getDataPercentWindow(),n=t.getDataValueWindow();e.setCalculatedRange({start:a[0],end:a[1],startValue:n[0],endValue:n[1]})}})}};const Ar=xr;function Sr(i){i.registerAction("dataZoom",function(r,e){var t=gr(e,r);b(t,function(a){a.setRawRange({start:r.start,end:r.end,startValue:r.startValue,endValue:r.endValue})})})}var ke=!1;function st(i){ke||(ke=!0,i.registerProcessor(i.PRIORITY.PROCESSOR.FILTER,Ar),Sr(i),i.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function lt(i,r){return i.type===r}var Mr=function(i){E(r,i);function r(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=r.type,e}return r.type="dataZoom.inside",r.defaultOption=me(Q.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),r}(Q);const wr=Mr;var Ae=Rt();function br(i,r,e){Ae(i).coordSysRecordMap.each(function(t){var a=t.dataZoomInfoMap.get(r.uid);a&&(a.getRange=e)})}function Dr(i,r){for(var e=Ae(i).coordSysRecordMap,t=e.keys(),a=0;a<t.length;a++){var n=t[a],o=e.get(n),s=o.dataZoomInfoMap;if(s){var l=r.uid,u=s.get(l);u&&(s.removeKey(l),s.keys().length||ut(e,o))}}}function ut(i,r){if(r){i.removeKey(r.model.uid);var e=r.controller;e&&e.dispose()}}function Ir(i,r){var e={model:r,containsPoint:ce(Lr,r),dispatchAction:ce(Rr,i),dataZoomInfoMap:null,controller:null},t=e.controller=new fr(i.getZr());return b(["pan","zoom","scrollMove"],function(a){t.on(a,function(n){var o=[];e.dataZoomInfoMap.each(function(s){if(n.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[a],u=l&&l(s.dzReferCoordSysInfo,e.model.mainType,e.controller,n);!s.model.get("disabled",!0)&&u&&o.push({dataZoomId:s.model.id,start:u[0],end:u[1]})}}),o.length&&e.dispatchAction(o)})}),e}function Rr(i,r){i.isDisposed()||i.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:r})}function Lr(i,r,e,t){return i.coordinateSystem.containPoint([e,t])}function Pr(i){var r,e="type_",t={type_true:2,type_move:1,type_false:0,type_undefined:-1},a=!0;return i.each(function(n){var o=n.model,s=o.get("disabled",!0)?!1:o.get("zoomLock",!0)?"move":!0;t[e+s]>t[e+r]&&(r=s),a=a&&o.get("preventDefaultMouseMove",!0)}),{controlType:r,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!a}}}function Tr(i){i.registerProcessor(i.PRIORITY.PROCESSOR.FILTER,function(r,e){var t=Ae(e),a=t.coordSysRecordMap||(t.coordSysRecordMap=z());a.each(function(n){n.dataZoomInfoMap=null}),r.eachComponent({mainType:"dataZoom",subType:"inside"},function(n){var o=nt(n);b(o.infoList,function(s){var l=s.model.uid,u=a.get(l)||a.set(l,Ir(e,s.model)),h=u.dataZoomInfoMap||(u.dataZoomInfoMap=z());h.set(n.uid,{dzReferCoordSysInfo:s,model:n,getRange:null})})}),a.each(function(n){var o=n.controller,s,l=n.dataZoomInfoMap;if(l){var u=l.keys()[0];u!=null&&(s=l.get(u))}if(!s){ut(a,n);return}var h=Pr(l);o.enable(h.controlType,h.opt),o.setPointerChecker(n.containsPoint),et(n,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var Cr=function(i){E(r,i);function r(){var e=i!==null&&i.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return r.prototype.render=function(e,t,a){if(i.prototype.render.apply(this,arguments),e.noTarget()){this._clear();return}this.range=e.getPercentRange(),br(a,e,{pan:D(oe.pan,this),zoom:D(oe.zoom,this),scrollMove:D(oe.scrollMove,this)})},r.prototype.dispose=function(){this._clear(),i.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){Dr(this.api,this.dataZoomModel),this.range=null},r.type="dataZoom.inside",r}(ot),oe={zoom:function(i,r,e,t){var a=this.range,n=a.slice(),o=i.axisModels[0];if(o){var s=se[r](null,[t.originX,t.originY],o,e,i),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(n[1]-n[0])+n[0],u=Math.max(1/t.scale,0);n[0]=(n[0]-l)*u+l,n[1]=(n[1]-l)*u+l;var h=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(ee(0,n,[0,100],0,h.minSpan,h.maxSpan),this.range=n,a[0]!==n[0]||a[1]!==n[1])return n}},pan:Be(function(i,r,e,t,a,n){var o=se[t]([n.oldX,n.oldY],[n.newX,n.newY],r,a,e);return o.signal*(i[1]-i[0])*o.pixel/o.pixelLength}),scrollMove:Be(function(i,r,e,t,a,n){var o=se[t]([0,0],[n.scrollDelta,n.scrollDelta],r,a,e);return o.signal*(i[1]-i[0])*n.scrollDelta})};function Be(i){return function(r,e,t,a){var n=this.range,o=n.slice(),s=r.axisModels[0];if(s){var l=i(o,s,r,e,t,a);if(ee(l,o,[0,100],"all"),this.range=o,n[0]!==o[0]||n[1]!==o[1])return o}}}var se={grid:function(i,r,e,t,a){var n=e.axis,o={},s=a.model.coordinateSystem.getRect();return i=i||[0,0],n.dim==="x"?(o.pixel=r[0]-i[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=n.inverse?1:-1):(o.pixel=r[1]-i[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=n.inverse?-1:1),o},polar:function(i,r,e,t,a){var n=e.axis,o={},s=a.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return i=i?s.pointToCoord(i):[0,0],r=s.pointToCoord(r),e.mainType==="radiusAxis"?(o.pixel=r[0]-i[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=n.inverse?1:-1):(o.pixel=r[1]-i[1],o.pixelLength=u[1]-u[0],o.pixelStart=u[0],o.signal=n.inverse?-1:1),o},singleAxis:function(i,r,e,t,a){var n=e.axis,o=a.model.coordinateSystem.getRect(),s={};return i=i||[0,0],n.orient==="horizontal"?(s.pixel=r[0]-i[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=n.inverse?1:-1):(s.pixel=r[1]-i[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=n.inverse?-1:1),s}};const Or=Cr;function Er(i){st(i),i.registerComponentModel(wr),i.registerComponentView(Or),Tr(i)}var Vr=function(i){E(r,i);function r(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=r.type,e}return r.type="dataZoom.slider",r.layoutMode="box",r.defaultOption=me(Q.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),r}(Q);const Zr=Vr;var F=B,ze=7,kr=1,le=30,Br=7,Y="horizontal",We="vertical",zr=5,Wr=["line","bar","candlestick","scatter"],Nr={easing:"cubicOut",duration:100,delay:0},Gr=function(i){E(r,i);function r(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=r.type,e._displayables={},e}return r.prototype.init=function(e,t){this.api=t,this._onBrush=D(this._onBrush,this),this._onBrushEnd=D(this._onBrushEnd,this)},r.prototype.render=function(e,t,a,n){if(i.prototype.render.apply(this,arguments),et(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),e.get("show")===!1){this.group.removeAll();return}if(e.noTarget()){this._clear(),this.group.removeAll();return}(!n||n.type!=="dataZoom"||n.from!==this.uid)&&this._buildView(),this._updateView()},r.prototype.dispose=function(){this._clear(),i.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){Lt(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},r.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var t=this._displayables.sliderGroup=new fe;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},r.prototype._resetLocation=function(){var e=this.dataZoomModel,t=this.api,a=e.get("brushSelect"),n=a?Br:0,o=this._findCoordRect(),s={width:t.getWidth(),height:t.getHeight()},l=this._orient===Y?{right:s.width-o.x-o.width,top:s.height-le-ze-n,width:o.width,height:le}:{right:ze,top:o.y,width:le,height:o.height},u=Pt(e.option);b(["right","top","width","height"],function(d){u[d]==="ph"&&(u[d]=l[d])});var h=Tt(u,s);this._location={x:h.x,y:h.y},this._size=[h.width,h.height],this._orient===We&&this._size.reverse()},r.prototype._positionGroup=function(){var e=this.group,t=this._location,a=this._orient,n=this.dataZoomModel.getFirstTargetAxisModel(),o=n&&n.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(a===Y&&!o?{scaleY:l?1:-1,scaleX:1}:a===Y&&o?{scaleY:l?1:-1,scaleX:-1}:a===We&&!o?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var u=e.getBoundingRect([s]);e.x=t.x-u.x,e.y=t.y-u.y,e.markRedraw()},r.prototype._getViewExtent=function(){return[0,this._size[0]]},r.prototype._renderBackground=function(){var e=this.dataZoomModel,t=this._size,a=this._displayables.sliderGroup,n=e.get("brushSelect");a.add(new F({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var o=new F({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:D(this._onClickPanel,this)}),s=this.api.getZr();n?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),a.add(o)},r.prototype._renderDataShadow=function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!e)return;var t=this._size,a=this._shadowSize||[],n=e.series,o=n.getRawData(),s=n.getShadowDim&&n.getShadowDim(),l=s&&o.getDimensionInfo(s)?n.getShadowDim():e.otherDim;if(l==null)return;var u=this._shadowPolygonPts,h=this._shadowPolylinePts;if(o!==this._shadowData||l!==this._shadowDim||t[0]!==a[0]||t[1]!==a[1]){var d=o.getDataExtent(l),p=(d[1]-d[0])*.3;d=[d[0]-p,d[1]+p];var f=[0,t[1]],c=[0,t[0]],v=[[t[0],0],[0,0]],m=[],y=c[1]/(o.count()-1),g=0,S=Math.round(o.count()/t[0]),A;o.each([l],function(C,Z){if(S>0&&Z%S){g+=y;return}var x=C==null||isNaN(C)||C==="",L=x?0:O(C,d,f,!0);x&&!A&&Z?(v.push([v[v.length-1][0],0]),m.push([m[m.length-1][0],0])):!x&&A&&(v.push([g,0]),m.push([g,0])),v.push([g,L]),m.push([g,L]),g+=y,A=x}),u=this._shadowPolygonPts=v,h=this._shadowPolylinePts=m}this._shadowData=o,this._shadowDim=l,this._shadowSize=[t[0],t[1]];var _=this.dataZoomModel;function w(C){var Z=_.getModel(C?"selectedDataBackground":"dataBackground"),x=new fe,L=new zt({shape:{points:u},segmentIgnoreThreshold:1,style:Z.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),R=new Wt({shape:{points:h},segmentIgnoreThreshold:1,style:Z.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return x.add(L),x.add(R),x}for(var M=0;M<3;M++){var I=w(M===1);this._displayables.sliderGroup.add(I),this._displayables.dataShadowSegs.push(I)}},r.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,t=e.get("showDataShadow");if(t!==!1){var a,n=this.ecModel;return e.eachTargetAxis(function(o,s){var l=e.getAxisProxy(o,s).getTargetSeriesModels();b(l,function(u){if(!a&&!(t!==!0&&Je(Wr,u.get("type"))<0)){var h=n.getComponent(k(o),s).axis,d=Fr(o),p,f=u.coordinateSystem;d!=null&&f.getOtherAxis&&(p=f.getOtherAxis(h).inverse),d=u.getData().mapDimension(d),a={thisAxis:h,series:u,thisDim:o,otherDim:d,otherAxisInverse:p}}},this)},this),a}},r.prototype._renderHandle=function(){var e=this.group,t=this._displayables,a=t.handles=[null,null],n=t.handleLabels=[null,null],o=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,u=this.api,h=l.get("borderRadius")||0,d=l.get("brushSelect"),p=t.filler=new F({silent:d,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});o.add(p),o.add(new F({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:h},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:kr,fill:"rgba(0,0,0,0)"}})),b([0,1],function(S){var A=l.get("handleIcon");!Ct[A]&&A.indexOf("path://")<0&&A.indexOf("image://")<0&&(A="path://"+A);var _=be(A,-1,0,2,2,null,!0);_.attr({cursor:Ne(this._orient),draggable:!0,drift:D(this._onDragMove,this,S),ondragend:D(this._onDragEnd,this),onmouseover:D(this._showDataInfo,this,!0),onmouseout:D(this._showDataInfo,this,!1),z2:5});var w=_.getBoundingRect(),M=l.get("handleSize");this._handleHeight=De(M,this._size[1]),this._handleWidth=w.width/w.height*this._handleHeight,_.setStyle(l.getModel("handleStyle").getItemStyle()),_.style.strokeNoScale=!0,_.rectHover=!0,_.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),Ot(_);var I=l.get("handleColor");I!=null&&(_.style.fill=I),o.add(a[S]=_);var C=l.getModel("textStyle");e.add(n[S]=new Et({silent:!0,invisible:!0,style:Vt(C,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:C.getTextColor(),font:C.getFont()}),z2:10}))},this);var f=p;if(d){var c=De(l.get("moveHandleSize"),s[1]),v=t.moveHandle=new B({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:c}}),m=c*.8,y=t.moveHandleIcon=be(l.get("moveHandleIcon"),-m/2,-m/2,m,m,"#fff",!0);y.silent=!0,y.y=s[1]+c/2-.5,v.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var g=Math.min(s[1]/2,Math.max(c,10));f=t.moveZone=new B({invisible:!0,shape:{y:s[1]-g,height:c+g}}),f.on("mouseover",function(){u.enterEmphasis(v)}).on("mouseout",function(){u.leaveEmphasis(v)}),o.add(v),o.add(y),o.add(f)}f.attr({draggable:!0,cursor:Ne(this._orient),drift:D(this._onDragMove,this,"all"),ondragstart:D(this._showDataInfo,this,!0),ondragend:D(this._onDragEnd,this),onmouseover:D(this._showDataInfo,this,!0),onmouseout:D(this._showDataInfo,this,!1)})},r.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[O(e[0],[0,100],t,!0),O(e[1],[0,100],t,!0)]},r.prototype._updateInterval=function(e,t){var a=this.dataZoomModel,n=this._handleEnds,o=this._getViewExtent(),s=a.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];ee(t,n,o,a.get("zoomLock")?"all":e,s.minSpan!=null?O(s.minSpan,l,o,!0):null,s.maxSpan!=null?O(s.maxSpan,l,o,!0):null);var u=this._range,h=this._range=H([O(n[0],o,l,!0),O(n[1],o,l,!0)]);return!u||u[0]!==h[0]||u[1]!==h[1]},r.prototype._updateView=function(e){var t=this._displayables,a=this._handleEnds,n=H(a.slice()),o=this._size;b([0,1],function(f){var c=t.handles[f],v=this._handleHeight;c.attr({scaleX:v/2,scaleY:v/2,x:a[f]+(f?-1:1),y:o[1]/2-v/2})},this),t.filler.setShape({x:n[0],y:0,width:n[1]-n[0],height:o[1]});var s={x:n[0],width:n[1]-n[0]};t.moveHandle&&(t.moveHandle.setShape(s),t.moveZone.setShape(s),t.moveZone.getBoundingRect(),t.moveHandleIcon&&t.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=t.dataShadowSegs,u=[0,n[0],n[1],o[0]],h=0;h<l.length;h++){var d=l[h],p=d.getClipPath();p||(p=new B,d.setClipPath(p)),p.setShape({x:u[h],y:0,width:u[h+1]-u[h],height:o[1]})}this._updateDataInfo(e)},r.prototype._updateDataInfo=function(e){var t=this.dataZoomModel,a=this._displayables,n=a.handleLabels,o=this._orient,s=["",""];if(t.get("showDetail")){var l=t.findRepresentativeAxisProxy();if(l){var u=l.getAxisModel().axis,h=this._range,d=e?l.calculateDataWindow({start:h[0],end:h[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(d[0],u),this._formatLabel(d[1],u)]}}var p=H(this._handleEnds.slice());f.call(this,0),f.call(this,1);function f(c){var v=Zt(a.handles[c].parent,this.group),m=kt(c===0?"right":"left",v),y=this._handleWidth/2+zr,g=Ie([p[c]+(c===0?-y:y),this._size[1]/2],v);n[c].setStyle({x:g[0],y:g[1],verticalAlign:o===Y?"middle":m,align:o===Y?m:"center",text:s[c]})}},r.prototype._formatLabel=function(e,t){var a=this.dataZoomModel,n=a.get("labelFormatter"),o=a.get("labelPrecision");(o==null||o==="auto")&&(o=t.getPixelPrecision());var s=e==null||isNaN(e)?"":t.type==="category"||t.type==="time"?t.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(o,20));return ye(n)?n(e,s):ge(n)?n.replace("{value}",s):s},r.prototype._showDataInfo=function(e){e=this._dragging||e;var t=this._displayables,a=t.handleLabels;a[0].attr("invisible",!e),a[1].attr("invisible",!e),t.moveHandle&&this.api[e?"enterEmphasis":"leaveEmphasis"](t.moveHandle,1)},r.prototype._onDragMove=function(e,t,a,n){this._dragging=!0,J(n.event);var o=this._displayables.sliderGroup.getLocalTransform(),s=Ie([t,a],o,!0),l=this._updateInterval(e,s[0]),u=this.dataZoomModel.get("realtime");this._updateView(!u),l&&u&&this._dispatchZoomAction(!0)},r.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var e=this.dataZoomModel.get("realtime");!e&&this._dispatchZoomAction(!1)},r.prototype._onClickPanel=function(e){var t=this._size,a=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(a[0]<0||a[0]>t[0]||a[1]<0||a[1]>t[1])){var n=this._handleEnds,o=(n[0]+n[1])/2,s=this._updateInterval("all",a[0]-o);this._updateView(),s&&this._dispatchZoomAction(!1)}},r.prototype._onBrushStart=function(e){var t=e.offsetX,a=e.offsetY;this._brushStart=new Bt(t,a),this._brushing=!0,this._brushStartTime=+new Date},r.prototype._onBrushEnd=function(e){if(this._brushing){var t=this._displayables.brushRect;if(this._brushing=!1,!!t){t.attr("ignore",!0);var a=t.shape,n=+new Date;if(!(n-this._brushStartTime<200&&Math.abs(a.width)<5)){var o=this._getViewExtent(),s=[0,100];this._range=H([O(a.x,o,s,!0),O(a.x+a.width,o,s,!0)]),this._handleEnds=[a.x,a.x+a.width],this._updateView(),this._dispatchZoomAction(!1)}}}},r.prototype._onBrush=function(e){this._brushing&&(J(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},r.prototype._updateBrushRect=function(e,t){var a=this._displayables,n=this.dataZoomModel,o=a.brushRect;o||(o=a.brushRect=new F({silent:!0,style:n.getModel("brushStyle").getItemStyle()}),a.sliderGroup.add(o)),o.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,u=l.transformCoordToLocal(e,t),h=l.transformCoordToLocal(s.x,s.y),d=this._size;u[0]=Math.max(Math.min(d[0],u[0]),0),o.setShape({x:h[0],y:0,width:u[0]-h[0],height:d[1]})},r.prototype._dispatchZoomAction=function(e){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?Nr:null,start:t[0],end:t[1]})},r.prototype._findCoordRect=function(){var e,t=nt(this.dataZoomModel).infoList;if(!e&&t.length){var a=t[0].model.coordinateSystem;e=a.getRect&&a.getRect()}if(!e){var n=this.api.getWidth(),o=this.api.getHeight();e={x:n*.2,y:o*.2,width:n*.6,height:o*.6}}return e},r.type="dataZoom.slider",r}(ot);function Fr(i){var r={x:"y",y:"x",radius:"angle",angle:"radius"};return r[i]}function Ne(i){return i==="vertical"?"ns-resize":"ew-resize"}const Yr=Gr;function Hr(i){i.registerComponentModel(Zr),i.registerComponentView(Yr),st(i)}function Xr(i){pe(Er),pe(Hr)}function Ur(i,r,e,t,a){var n=i.getArea(),o=n.x,s=n.y,l=n.width,u=n.height,h=e.get(["lineStyle","width"])||2;o-=h/2,s-=h/2,l+=h,u+=h,l=Math.ceil(l),o!==Math.floor(o)&&(o=Math.floor(o),l++);var d=new B({shape:{x:o,y:s,width:l,height:u}});if(r){var p=i.getBaseAxis(),f=p.isHorizontal(),c=p.inverse;f?(c&&(d.shape.x+=l),d.shape.width=0):(c||(d.shape.y+=u),d.shape.height=0);var v=ye(a)?function(m){a(m,d)}:null;G(d,{shape:{width:l,height:u,x:o,y:s}},e,null,t,v)}return d}function $r(i,r,e){var t=i.getArea(),a=U(t.r0,1),n=U(t.r,1),o=new _e({shape:{cx:U(i.cx,1),cy:U(i.cy,1),r0:a,r:n,startAngle:t.startAngle,endAngle:t.endAngle,clockwise:t.clockwise}});if(r){var s=i.getBaseAxis().dim==="angle";s?o.shape.endAngle=t.startAngle:o.shape.r=a,G(o,{shape:{endAngle:t.endAngle,r:n}},e)}return o}function Kr(i,r,e,t,a){if(i){if(i.type==="polar")return $r(i,r,e);if(i.type==="cartesian2d")return Ur(i,r,e,t,a)}else return null;return null}var qr={average:function(i){for(var r=0,e=0,t=0;t<i.length;t++)isNaN(i[t])||(r+=i[t],e++);return e===0?NaN:r/e},sum:function(i){for(var r=0,e=0;e<i.length;e++)r+=i[e]||0;return r},max:function(i){for(var r=-1/0,e=0;e<i.length;e++)i[e]>r&&(r=i[e]);return isFinite(r)?r:NaN},min:function(i){for(var r=1/0,e=0;e<i.length;e++)i[e]<r&&(r=i[e]);return isFinite(r)?r:NaN},minmax:function(i){for(var r=-1/0,e=-1/0,t=0;t<i.length;t++){var a=i[t],n=Math.abs(a);n>r&&(r=n,e=a)}return isFinite(e)?e:NaN},nearest:function(i){return i[0]}},jr=function(i){return Math.round(i.length/2)};function Jr(i){return{seriesType:i,reset:function(r,e,t){var a=r.getData(),n=r.get("sampling"),o=r.coordinateSystem,s=a.count();if(s>10&&o.type==="cartesian2d"&&n){var l=o.getBaseAxis(),u=o.getOtherAxis(l),h=l.getExtent(),d=t.getDevicePixelRatio(),p=Math.abs(h[1]-h[0])*(d||1),f=Math.round(s/p);if(isFinite(f)&&f>1){n==="lttb"&&r.setData(a.lttbDownSample(a.mapDimension(u.dim),1/f));var c=void 0;ge(n)?c=qr[n]:ye(n)&&(c=n),c&&r.setData(a.downSample(a.mapDimension(u.dim),1/f,c,jr))}}}}}var ve=function(i){E(r,i);function r(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getInitialData=function(e,t){return at(null,this,{useEncodeDefaulter:!0})},r.prototype.getMarkerPosition=function(e,t,a){var n=this.coordinateSystem;if(n&&n.clampData){var o=n.clampData(e),s=n.dataToPoint(o);if(a)b(n.getAxes(),function(p,f){if(p.type==="category"&&t!=null){var c=p.getTicksCoords(),v=p.getTickModel().get("alignWithLabel"),m=o[f],y=t[f]==="x1"||t[f]==="y1";if(y&&!v&&(m+=1),c.length<2)return;if(c.length===2){s[f]=p.toGlobalCoord(p.getExtent()[y?1:0]);return}for(var g=void 0,S=void 0,A=1,_=0;_<c.length;_++){var w=c[_].coord,M=_===c.length-1?c[_-1].tickValue+A:c[_].tickValue;if(M===m){S=w;break}else if(M<m)g=w;else if(g!=null&&M>m){S=(w+g)/2;break}_===1&&(A=M-c[0].tickValue)}S==null&&(g?g&&(S=c[c.length-1].coord):S=c[0].coord),s[f]=p.toGlobalCoord(S)}});else{var l=this.getData(),u=l.getLayout("offset"),h=l.getLayout("size"),d=n.getBaseAxis().isHorizontal()?0:1;s[d]+=u+h/2}return s}return[NaN,NaN]},r.type="series.__base_bar__",r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},r}(tt);tt.registerClass(ve);var Qr=function(i){E(r,i);function r(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getInitialData=function(){return at(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},r.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},r.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return t>e&&(e=t),e},r.prototype.brushSelector=function(e,t,a){return a.rect(t.getItemLayout(e))},r.type="series.bar",r.dependencies=["grid","polar"],r.defaultOption=me(ve.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),r}(ve);const ea=Qr;function ta(i,r){r=r||{};var e=r.isRoundCap;return function(t,a,n){var o=a.position;if(!o||o instanceof Array)return Re(t,a,n);var s=i(o),l=a.distance!=null?a.distance:5,u=this.shape,h=u.cx,d=u.cy,p=u.r,f=u.r0,c=(p+f)/2,v=u.startAngle,m=u.endAngle,y=(v+m)/2,g=e?Math.abs(p-f)/2:0,S=Math.cos,A=Math.sin,_=h+p*S(v),w=d+p*A(v),M="left",I="top";switch(s){case"startArc":_=h+(f-l)*S(y),w=d+(f-l)*A(y),M="center",I="top";break;case"insideStartArc":_=h+(f+l)*S(y),w=d+(f+l)*A(y),M="center",I="bottom";break;case"startAngle":_=h+c*S(v)+$(v,l+g,!1),w=d+c*A(v)+K(v,l+g,!1),M="right",I="middle";break;case"insideStartAngle":_=h+c*S(v)+$(v,-l+g,!1),w=d+c*A(v)+K(v,-l+g,!1),M="left",I="middle";break;case"middle":_=h+c*S(y),w=d+c*A(y),M="center",I="middle";break;case"endArc":_=h+(p+l)*S(y),w=d+(p+l)*A(y),M="center",I="bottom";break;case"insideEndArc":_=h+(p-l)*S(y),w=d+(p-l)*A(y),M="center",I="top";break;case"endAngle":_=h+c*S(m)+$(m,l+g,!0),w=d+c*A(m)+K(m,l+g,!0),M="left",I="middle";break;case"insideEndAngle":_=h+c*S(m)+$(m,-l+g,!0),w=d+c*A(m)+K(m,-l+g,!0),M="right",I="middle";break;default:return Re(t,a,n)}return t=t||{},t.x=_,t.y=w,t.align=M,t.verticalAlign=I,t}}function ra(i,r,e,t){if(Nt(t)){i.setTextConfig({rotation:t});return}else if(Gt(r)){i.setTextConfig({rotation:0});return}var a=i.shape,n=a.clockwise?a.startAngle:a.endAngle,o=a.clockwise?a.endAngle:a.startAngle,s=(n+o)/2,l,u=e(r);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=n;break;case"endAngle":case"insideEndAngle":l=o;break;default:i.setTextConfig({rotation:0});return}var h=Math.PI*1.5-l;u==="middle"&&h>Math.PI/2&&h<Math.PI*1.5&&(h-=Math.PI),i.setTextConfig({rotation:h})}function $(i,r,e){return r*Math.sin(i)*(e?-1:1)}function K(i,r,e){return r*Math.cos(i)*(e?1:-1)}var ue=Math.max,he=Math.min;function aa(i,r){var e=i.getArea&&i.getArea();if(lt(i,"cartesian2d")){var t=i.getBaseAxis();if(t.type!=="category"||!t.onBand){var a=r.getLayout("bandWidth");t.isHorizontal()?(e.x-=a,e.width+=a*2):(e.y-=a,e.height+=a*2)}}return e}var ia=function(i){E(r,i);function r(){var e=i.call(this)||this;return e.type=r.type,e._isFirstFrame=!0,e}return r.prototype.render=function(e,t,a,n){this._model=e,this._removeOnRenderedListener(a),this._updateDrawMode(e);var o=e.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,t,a):this._renderNormal(e,t,a,n))},r.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},r.prototype.incrementalRender=function(e,t){this._progressiveEls=[],this._incrementalRenderLarge(e,t)},r.prototype.eachRendered=function(e){Ft(this._progressiveEls||this.group,e)},r.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;(this._isLargeDraw==null||t!==this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},r.prototype._renderNormal=function(e,t,a,n){var o=this.group,s=e.getData(),l=this._data,u=e.coordinateSystem,h=u.getBaseAxis(),d;u.type==="cartesian2d"?d=h.isHorizontal():u.type==="polar"&&(d=h.dim==="angle");var p=e.isAnimationEnabled()?e:null,f=na(e,u);f&&this._enableRealtimeSort(f,s,a);var c=e.get("clip",!0)||f,v=aa(u,s);o.removeClipPath();var m=e.get("roundCap",!0),y=e.get("showBackground",!0),g=e.getModel("backgroundStyle"),S=g.get("borderRadius")||0,A=[],_=this._backgroundEls,w=n&&n.isInitSort,M=n&&n.type==="changeAxisOrder";function I(x){var L=q[u.type](s,x),R=ca(u,d,L);return R.useStyle(g.getItemStyle()),u.type==="cartesian2d"?R.setShape("r",S):R.setShape("cornerRadius",S),A[x]=R,R}s.diff(l).add(function(x){var L=s.getItemModel(x),R=q[u.type](s,x,L);if(y&&I(x),!(!s.hasValue(x)||!Xe[u.type](R))){var V=!1;c&&(V=Ge[u.type](v,R));var P=Fe[u.type](e,s,x,R,d,p,h.model,!1,m);f&&(P.forceLabelAnimation=!0),Ue(P,s,x,L,R,e,d,u.type==="polar"),w?P.attr({shape:R}):f?Ye(f,p,P,R,x,d,!1,!1):G(P,{shape:R},e,x),s.setItemGraphicEl(x,P),o.add(P),P.ignore=V}}).update(function(x,L){var R=s.getItemModel(x),V=q[u.type](s,x,R);if(y){var P=void 0;_.length===0?P=I(L):(P=_[L],P.useStyle(g.getItemStyle()),u.type==="cartesian2d"?P.setShape("r",S):P.setShape("cornerRadius",S),A[x]=P);var ct=q[u.type](s,x),ft=dt(d,ct,u);X(P,{shape:ft},p,x)}var T=l.getItemGraphicEl(L);if(!s.hasValue(x)||!Xe[u.type](V)){o.remove(T);return}var te=!1;if(c&&(te=Ge[u.type](v,V),te&&o.remove(T)),T?Yt(T):T=Fe[u.type](e,s,x,V,d,p,h.model,!!T,m),f&&(T.forceLabelAnimation=!0),M){var Se=T.getTextContent();if(Se){var re=Ht(Se);re.prevValue!=null&&(re.prevValue=re.value)}}else Ue(T,s,x,R,V,e,d,u.type==="polar");w?T.attr({shape:V}):f?Ye(f,p,T,V,x,d,!0,M):X(T,{shape:V},e,x,null),s.setItemGraphicEl(x,T),T.ignore=te,o.add(T)}).remove(function(x){var L=l.getItemGraphicEl(x);L&&Le(L,e,x)}).execute();var C=this._backgroundGroup||(this._backgroundGroup=new fe);C.removeAll();for(var Z=0;Z<A.length;++Z)C.add(A[Z]);o.add(C),this._backgroundEls=A,this._data=s},r.prototype._renderLarge=function(e,t,a){this._clear(),Ke(e,this.group),this._updateLargeClip(e)},r.prototype._incrementalRenderLarge=function(e,t){this._removeBackground(),Ke(t,this.group,this._progressiveEls,!0)},r.prototype._updateLargeClip=function(e){var t=e.get("clip",!0)&&Kr(e.coordinateSystem,!1,e),a=this.group;t?a.setClipPath(t):a.removeClipPath()},r.prototype._enableRealtimeSort=function(e,t,a){var n=this;if(t.count()){var o=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(t,e,a),this._isFirstFrame=!1;else{var s=function(l){var u=t.getItemGraphicEl(l),h=u&&u.shape;return h&&Math.abs(o.isHorizontal()?h.height:h.width)||0};this._onRendered=function(){n._updateSortWithinSameData(t,s,o,a)},a.getZr().on("rendered",this._onRendered)}}},r.prototype._dataSort=function(e,t,a){var n=[];return e.each(e.mapDimension(t.dim),function(o,s){var l=a(s);l=l??NaN,n.push({dataIndex:s,mappedValue:l,ordinalNumber:o})}),n.sort(function(o,s){return s.mappedValue-o.mappedValue}),{ordinalNumbers:Qe(n,function(o){return o.ordinalNumber})}},r.prototype._isOrderChangedWithinSameData=function(e,t,a){for(var n=a.scale,o=e.mapDimension(a.dim),s=Number.MAX_VALUE,l=0,u=n.getOrdinalMeta().categories.length;l<u;++l){var h=e.rawIndexOf(o,n.getRawOrdinalNumber(l)),d=h<0?Number.MIN_VALUE:t(e.indexOfRawIndex(h));if(d>s)return!0;s=d}return!1},r.prototype._isOrderDifferentInView=function(e,t){for(var a=t.scale,n=a.getExtent(),o=Math.max(0,n[0]),s=Math.min(n[1],a.getOrdinalMeta().categories.length-1);o<=s;++o)if(e.ordinalNumbers[o]!==a.getRawOrdinalNumber(o))return!0},r.prototype._updateSortWithinSameData=function(e,t,a,n){if(this._isOrderChangedWithinSameData(e,t,a)){var o=this._dataSort(e,a,t);this._isOrderDifferentInView(o,a)&&(this._removeOnRenderedListener(n),n.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",axisId:a.index,sortInfo:o}))}},r.prototype._dispatchInitSort=function(e,t,a){var n=t.baseAxis,o=this._dataSort(e,n,function(s){return e.get(e.mapDimension(t.otherAxis.dim),s)});a.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",isInitSort:!0,axisId:n.index,sortInfo:o})},r.prototype.remove=function(e,t){this._clear(this._model),this._removeOnRenderedListener(t)},r.prototype.dispose=function(e,t){this._removeOnRenderedListener(t)},r.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},r.prototype._clear=function(e){var t=this.group,a=this._data;e&&e.isAnimationEnabled()&&a&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],a.eachItemGraphicEl(function(n){Le(n,e,xe(n).dataIndex)})):t.removeAll(),this._data=null,this._isFirstFrame=!0},r.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},r.type="bar",r}(Xt),Ge={cartesian2d:function(i,r){var e=r.width<0?-1:1,t=r.height<0?-1:1;e<0&&(r.x+=r.width,r.width=-r.width),t<0&&(r.y+=r.height,r.height=-r.height);var a=i.x+i.width,n=i.y+i.height,o=ue(r.x,i.x),s=he(r.x+r.width,a),l=ue(r.y,i.y),u=he(r.y+r.height,n),h=s<o,d=u<l;return r.x=h&&o>a?s:o,r.y=d&&l>n?u:l,r.width=h?0:s-o,r.height=d?0:u-l,e<0&&(r.x+=r.width,r.width=-r.width),t<0&&(r.y+=r.height,r.height=-r.height),h||d},polar:function(i,r){var e=r.r0<=r.r?1:-1;if(e<0){var t=r.r;r.r=r.r0,r.r0=t}var a=he(r.r,i.r),n=ue(r.r0,i.r0);r.r=a,r.r0=n;var o=a-n<0;if(e<0){var t=r.r;r.r=r.r0,r.r0=t}return o}},Fe={cartesian2d:function(i,r,e,t,a,n,o,s,l){var u=new B({shape:rt({},t),z2:1});if(u.__dataIndex=e,u.name="item",n){var h=u.shape,d=a?"height":"width";h[d]=0}return u},polar:function(i,r,e,t,a,n,o,s,l){var u=!a&&l?Te:_e,h=new u({shape:t,z2:1});h.name="item";var d=ht(a);if(h.calculateTextPosition=ta(d,{isRoundCap:u===Te}),n){var p=h.shape,f=a?"r":"endAngle",c={};p[f]=a?t.r0:t.startAngle,c[f]=t[f],(s?X:G)(h,{shape:c},n)}return h}};function na(i,r){var e=i.get("realtimeSort",!0),t=r.getBaseAxis();if(e&&t.type==="category"&&r.type==="cartesian2d")return{baseAxis:t,otherAxis:r.getOtherAxis(t)}}function Ye(i,r,e,t,a,n,o,s){var l,u;n?(u={x:t.x,width:t.width},l={y:t.y,height:t.height}):(u={y:t.y,height:t.height},l={x:t.x,width:t.width}),s||(o?X:G)(e,{shape:l},r,a,null);var h=r?i.baseAxis.model:null;(o?X:G)(e,{shape:u},h,a)}function He(i,r){for(var e=0;e<r.length;e++)if(!isFinite(i[r[e]]))return!0;return!1}var oa=["x","y","width","height"],sa=["cx","cy","r","startAngle","endAngle"],Xe={cartesian2d:function(i){return!He(i,oa)},polar:function(i){return!He(i,sa)}},q={cartesian2d:function(i,r,e){var t=i.getItemLayout(r),a=e?ua(e,t):0,n=t.width>0?1:-1,o=t.height>0?1:-1;return{x:t.x+n*a/2,y:t.y+o*a/2,width:t.width-n*a,height:t.height-o*a}},polar:function(i,r,e){var t=i.getItemLayout(r);return{cx:t.cx,cy:t.cy,r0:t.r0,r:t.r,startAngle:t.startAngle,endAngle:t.endAngle,clockwise:t.clockwise}}};function la(i){return i.startAngle!=null&&i.endAngle!=null&&i.startAngle===i.endAngle}function ht(i){return function(r){var e=r?"Arc":"Angle";return function(t){switch(t){case"start":case"insideStart":case"end":case"insideEnd":return t+e;default:return t}}}(i)}function Ue(i,r,e,t,a,n,o,s){var l=r.getItemVisual(e,"style");if(s){if(!n.get("roundCap")){var h=i.shape,d=hr(t.getModel("itemStyle"),h,!0);rt(h,d),i.setShape(h)}}else{var u=t.get(["itemStyle","borderRadius"])||0;i.setShape("r",u)}i.useStyle(l);var p=t.getShallow("cursor");p&&i.attr("cursor",p);var f=s?o?a.r>=a.r0?"endArc":"startArc":a.endAngle>=a.startAngle?"endAngle":"startAngle":o?a.height>=0?"bottom":"top":a.width>=0?"right":"left",c=Ut(t);$t(i,c,{labelFetcher:n,labelDataIndex:e,defaultText:ar(n.getData(),e),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:f});var v=i.getTextContent();if(s&&v){var m=t.get(["label","position"]);i.textConfig.inside=m==="middle"?!0:null,ra(i,m==="outside"?f:m,ht(o),t.get(["label","rotate"]))}Kt(v,c,n.getRawValue(e),function(g){return ir(r,g)});var y=t.getModel(["emphasis"]);qt(i,y.get("focus"),y.get("blurScope"),y.get("disabled")),jt(i,t),la(a)&&(i.style.fill="none",i.style.stroke="none",b(i.states,function(g){g.style&&(g.style.fill=g.style.stroke="none")}))}function ua(i,r){var e=i.get(["itemStyle","borderColor"]);if(!e||e==="none")return 0;var t=i.get(["itemStyle","borderWidth"])||0,a=isNaN(r.width)?Number.MAX_VALUE:Math.abs(r.width),n=isNaN(r.height)?Number.MAX_VALUE:Math.abs(r.height);return Math.min(t,a,n)}var ha=function(){function i(){}return i}(),$e=function(i){E(r,i);function r(e){var t=i.call(this,e)||this;return t.type="largeBar",t}return r.prototype.getDefaultShape=function(){return new ha},r.prototype.buildPath=function(e,t){for(var a=t.points,n=this.baseDimIdx,o=1-this.baseDimIdx,s=[],l=[],u=this.barWidth,h=0;h<a.length;h+=3)l[n]=u,l[o]=a[h+2],s[n]=a[h+n],s[o]=a[h+o],e.rect(s[0],s[1],l[0],l[1])},r}(Jt);function Ke(i,r,e,t){var a=i.getData(),n=a.getLayout("valueAxisHorizontal")?1:0,o=a.getLayout("largeDataIndices"),s=a.getLayout("size"),l=i.getModel("backgroundStyle"),u=a.getLayout("largeBackgroundPoints");if(u){var h=new $e({shape:{points:u},incremental:!!t,silent:!0,z2:0});h.baseDimIdx=n,h.largeDataIndices=o,h.barWidth=s,h.useStyle(l.getItemStyle()),r.add(h),e&&e.push(h)}var d=new $e({shape:{points:a.getLayout("largePoints")},incremental:!!t,ignoreCoarsePointer:!0,z2:1});d.baseDimIdx=n,d.largeDataIndices=o,d.barWidth=s,r.add(d),d.useStyle(a.getVisual("style")),xe(d).seriesIndex=i.seriesIndex,i.get("silent")||(d.on("mousedown",qe),d.on("mousemove",qe)),e&&e.push(d)}var qe=Qt(function(i){var r=this,e=da(r,i.offsetX,i.offsetY);xe(r).dataIndex=e>=0?e:null},30,!1);function da(i,r,e){for(var t=i.baseDimIdx,a=1-t,n=i.shape.points,o=i.largeDataIndices,s=[],l=[],u=i.barWidth,h=0,d=n.length/3;h<d;h++){var p=h*3;if(l[t]=u,l[a]=n[p+2],s[t]=n[p+t],s[a]=n[p+a],l[a]<0&&(s[a]+=l[a],l[a]=-l[a]),r>=s[0]&&r<=s[0]+l[0]&&e>=s[1]&&e<=s[1]+l[1])return o[h]}return-1}function dt(i,r,e){if(lt(e,"cartesian2d")){var t=r,a=e.getArea();return{x:i?t.x:a.x,y:i?a.y:t.y,width:i?t.width:a.width,height:i?a.height:t.height}}else{var a=e.getArea(),n=r;return{cx:a.cx,cy:a.cy,r0:i?a.r0:n.r0,r:i?a.r:n.r,startAngle:i?n.startAngle:0,endAngle:i?n.endAngle:Math.PI*2}}}function ca(i,r,e){var t=i.type==="polar"?_e:B;return new t({shape:dt(r,e,i),silent:!0,z2:0})}const fa=ia;function pa(i){i.registerChartView(fa),i.registerSeriesModel(ea),i.registerLayout(i.PRIORITY.VISUAL.LAYOUT,ce(ur,"bar")),i.registerLayout(i.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,lr("bar")),i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC,Jr("bar")),i.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(r,e){var t=r.componentType||"series";e.eachComponent({mainType:t,query:r},function(a){r.sortInfo&&a.axis.setCategorySortInfo(r.sortInfo)})})}const va={class:"bar"},ga={__name:"Bar",setup(i){let r=vt(null);pe([rr,nr,Xr,pa,tr]);let e=["","","","","","","","","","","","","","","","","","","",""],t=[220,182,191,234,290,330,310,123,442,321,90,149,210,122,133,334,198,123,125,220];for(let n=0;n<t.length;n++);let a;return a={title:{text:"  ",subtext:"Feature Sample: Gradient Color, Shadow, Click Zoom"},xAxis:{data:e,axisLabel:{inside:!0,color:"#fff"},axisTick:{show:!1},axisLine:{show:!1},z:10},yAxis:{axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"#999"}},dataZoom:[{type:"inside"}],series:[{type:"bar",showBackground:!0,itemStyle:{color:new Pe(0,0,0,1,[{offset:0,color:"#83bff6"},{offset:.5,color:"#188df0"},{offset:1,color:"#188df0"}])},emphasis:{itemStyle:{color:new Pe(0,0,0,1,[{offset:0,color:"#2378f7"},{offset:.7,color:"#2378f7"},{offset:1,color:"#83bff6"}])}},data:t}]},gt(()=>{let n=er(r.value);const o=6;n.on("click",function(s){console.log(e[Math.max(s.dataIndex-o/2,0)]),n.dispatchAction({type:"dataZoom",startValue:e[Math.max(s.dataIndex-o/2,0)],endValue:e[Math.min(s.dataIndex+o/2,t.length-1)]})}),a&&n.setOption(a)}),(n,o)=>(mt(),yt("div",va,[_t("div",{class:"chart",ref_key:"main",ref:r},null,512)]))}},Da=pt(ga,[["__scopeId","data-v-6a18f5b1"]]);export{Da as default};
