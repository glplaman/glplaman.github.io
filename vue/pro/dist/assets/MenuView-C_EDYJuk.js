import{u as w}from"./cart-DG6bTyhd.js";import{_ as x,r as d,w as k,o as M,a as N,b as r,c as _,d as s,e as C,v as g,t as a,f as m,F as $,g as V,u as q,h as B,i as j,n as h,j as G,k as y,l as I,m as T}from"./index-Jl-AZRRS.js";import U from"./Goods-5hpmXSE4.js";import z from"./Vip-a1IFFgCy.js";import E from"./Rank-C_KVxByG.js";import L from"./Favorite-DoiWnUv9.js";import"./goods-B4DCNdwl.js";const O={class:"cont"},P={class:"header"},R={class:"all"},H={for:"all"},J=["value"],K=["src"],Q={class:"info"},W={class:"title"},X={class:"sub-title"},Y={class:"price-new"},Z={class:"price-old"},ss={class:"oper"},ts=["onClick"],es={class:"num"},os=["onClick"],ns={class:"cart-num f-s-s"},as={class:"price"},ls={class:"total-price f-s-m f-b"},cs={class:"total-promotion f-s-s"},is={__name:"Cart",setup(D){const u=d(!1),n=w(),o=d([...n.cart]),l=d(!0),p=d(0),v=d(0);let c=!0;k(o,()=>{o.value.length===n.cart.length?(l.value=!0,c=!0):(l.value=!1,c=!1),p.value=o.value.reduce((i,t)=>i+t.price*t.quantity*(1-t.discount),0),v.value=o.value.reduce((i,t)=>i+t.quantity,0)},{deep:!0,immediate:!0}),k(l,i=>{i?o.value=n.cart:c&&(o.value=[])});const b=()=>{n.clearCart(),o.value=[],l.value=!1},S=()=>{u.value=!1},A=()=>n.cart.reduce((i,t)=>i+t.price*t.discount*t.quantity,0);return M(()=>{console.log("cart loading",n.cart)}),(i,t)=>{const F=N("router-link");return r(),_("div",{class:h(["cart",{"show-cont-all":u.value}]),onClick:m(S,["self"])},[s("div",O,[s("header",P,[s("div",R,[C(s("input",{type:"checkbox",id:"all","onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e)},null,512),[[g,l.value]]),s("label",H,"已选择商品（"+a(v.value)+"件）",1)]),s("button",{class:"clear",onClick:m(b,["stop"])},t[3]||(t[3]=[s("span",{class:"iconfont icon-shanchu_o"},null,-1),s("span",null,"清空购物车",-1)]))]),(r(!0),_($,null,V(q(n).cart,(e,fs)=>(r(),_("div",{class:"item",key:e.id},[C(s("input",{type:"checkbox",name:"",id:"","onUpdate:modelValue":t[1]||(t[1]=f=>o.value=f),value:e},null,8,J),[[g,o.value]]),s("img",{class:"img",src:`https://glpla.github.io/utils${e.img}`,alt:""},null,8,K),s("div",Q,[s("h4",W,a(e.name),1),s("div",X,a(e.desc),1),s("div",null,[s("span",Y,"¥"+a(e.price),1),s("span",Z,"¥"+a(e.priceOrignal),1)])]),s("div",ss,[s("button",{class:"btn dec",onClick:f=>e.quantity--},"-",8,ts),s("span",es,a(e.quantity),1),s("button",{class:"btn inc",onClick:f=>e.quantity++},"+",8,os)])]))),128))]),s("footer",null,[s("button",{class:"btn cart-left",onClick:t[2]||(t[2]=m(e=>u.value=!u.value,["stop"]))},[t[4]||(t[4]=s("span",{class:"iconfont icon-icon_ruixingkafei"},null,-1)),s("span",ns,a(v.value),1)]),s("div",as,[s("div",null,[t[5]||(t[5]=s("span",null,"预计到手 ",-1)),s("span",ls,"¥"+a(p.value.toFixed(2)),1)]),s("div",cs,[t[6]||(t[6]=s("span",null,"已享受更多优惠，共减免 ",-1)),s("span",null,"¥"+a(A().toFixed(2)),1)])]),B(F,{class:"btn pay-btn f-s-b",to:"/order",replace:""},{default:j(()=>t[7]||(t[7]=[G("去结算")])),_:1})])],2)}}},rs=x(is,[["__scopeId","data-v-e071b6ce"]]),us={class:"menu-view"},ds={class:"tab-box"},ps=["onClick"],_s={class:"tab-cont"},vs={__name:"MenuView",setup(D){const u=w(),n=d("经典菜单"),o={经典菜单:U,会员卡:z,年度封神榜:E,我的常点:L};return(l,p)=>(r(),_("div",us,[p[0]||(p[0]=s("div",{class:"loc-box"},[s("span",{class:"iconfont icon-didiandingwei_o"}),s("span",null,"桂林万达广场店 | 0.5km"),s("span",{class:"iconfont icon-jiantou_liebiaoxiangyou_o"})],-1)),s("div",ds,[(r(),_($,null,V(o,(v,c)=>s("button",{key:c,class:h(["tab-item f-s-m",{active:n.value===c}]),onClick:b=>n.value=c},a(c),11,ps)),64))]),s("div",_s,[(r(),y(I(o[n.value])))]),q(u).cart.length?(r(),y(rs,{key:0,class:h(["w cart",{pos:l.$route.meta.showNav}])},null,8,["class"])):T("",!0)]))}},ws=x(vs,[["__scopeId","data-v-01132bd0"]]);export{ws as default};
