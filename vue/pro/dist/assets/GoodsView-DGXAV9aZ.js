import{_ as g,j as G,r as b,o as i,c as r,a as t,i as p,t as o,b as y,w as C,k as V,f as $,l as v,u,F as x,m as w,n as F,p as k,q as I}from"./index-CsISKw4a.js";import{u as q,a as B}from"./goods-C2fD3pM2.js";const N={class:"goods-item"},O=["src"],j={class:"info"},M={class:"title f-s-m"},P={class:"flavour"},z={class:"desc"},E={class:"price f-b"},L={class:"price-inner"},Q={class:"price-discount warn"},T={class:"quantity"},A={__name:"GoodsItem",props:{product:{type:Object,default:()=>{}}},setup(e){const n=G(()=>l=>(l.price*(1-l.discount)).toFixed(2));return(l,a)=>{const _=b("router-link");return i(),r("div",N,[t("img",{class:"img",src:"https://glpla.github.io/utils"+e.product.img,alt:""},null,8,O),t("div",j,[t("h4",M,[p(o(e.product.name)+" ",1),t("span",P,o(e.product.flavour),1)]),t("div",z,o(e.product.desc),1),t("div",E,[t("span",null,"¥"+o(e.product.price),1),t("span",L,[a[0]||(a[0]=p(" (市场价")),t("span",null,"¥"+o(e.product.priceOrignal),1),a[1]||(a[1]=p(")"))])]),t("div",Q,[a[2]||(a[2]=p("预估到手 ")),t("span",null,"¥"+o(n.value(e.product)),1)])]),y(_,{class:"btn add-btn",to:"/details/"+e.product.id},{default:C(()=>[a[3]||(a[3]=t("span",{class:"iconfont icon-gouwuche_o"},null,-1)),t("span",T,o(e.product.quantity),1)]),_:1},8,["to"])])}}},H=g(A,[["__scopeId","data-v-67618436"]]),J={class:"cont"},K={class:"header"},R={class:"all"},U={for:"all"},W=["src"],X={class:"info"},Y={class:"title"},Z={class:"sub-title"},tt={class:"price-new"},st={class:"price-old"},ot={class:"oper"},nt=["onClick"],et={class:"num"},at=["onClick"],ct={class:"cart-num f-s-s"},lt={class:"price"},it={class:"total-price f-s-b f-b"},rt={class:"total-promotion f-s-s"},dt={__name:"Cart",setup(e){const n=q(),l=V(!1),a=()=>{l.value=!l.value},_=()=>{l.value=!1},f=()=>n.cart.reduce((d,s)=>d+s.price*(1-s.discount)*s.quantity,0),h=()=>n.cart.reduce((d,s)=>d+s.price*s.discount*s.quantity,0),m=()=>n.cart.reduce((d,s)=>d+s.quantity,0);return $(()=>{console.log("cart loading",n.cart)}),(d,s)=>{const S=b("router-link");return i(),r("div",{class:F(["cart",{"show-cont-all":l.value}]),onClick:v(_,["self"])},[t("div",J,[t("header",K,[t("div",R,[s[1]||(s[1]=t("input",{type:"checkbox",id:"all"},null,-1)),t("label",U,"已选择商品（"+o(m())+"件）",1)]),t("div",{class:"clear",onClick:s[0]||(s[0]=v((...c)=>u(n).clearCart&&u(n).clearCart(...c),["stop"]))},s[2]||(s[2]=[t("span",{class:"iconfont icon-shanchu_o"},null,-1),t("span",null,"清空购物车",-1)]))]),(i(!0),r(x,null,w(u(n).cart,(c,vt)=>(i(),r("div",{class:"item",key:c.id},[s[3]||(s[3]=t("input",{type:"checkbox",name:"",id:""},null,-1)),t("img",{class:"img",src:`https://glpla.github.io/utils${c.img}`,alt:""},null,8,W),t("div",X,[t("h4",Y,o(c.name),1),t("div",Z,o(c.desc),1),t("div",null,[t("span",tt,"¥"+o(c.price),1),t("span",st,"¥"+o(c.priceOrignal),1)])]),t("div",ot,[t("button",{class:"btn dec",onClick:D=>c.quantity--},"-",8,nt),t("span",et,o(c.quantity),1),t("button",{class:"btn inc",onClick:D=>c.quantity++},"+",8,at)])]))),128))]),t("footer",null,[t("button",{class:"btn cart-left",onClick:v(a,["stop"])},[s[4]||(s[4]=t("span",{class:"iconfont icon-icon_ruixingkafei"},null,-1)),t("span",ct,o(m()),1)]),t("div",lt,[t("div",null,[s[5]||(s[5]=t("span",null,"预计到手 ",-1)),t("span",it,"¥"+o(f().toFixed(2)),1)]),t("div",rt,[s[6]||(s[6]=t("span",null,"已享受更多优惠，共减免 ",-1)),t("span",null,"¥"+o(h().toFixed(2)),1)])]),y(S,{class:"btn pay-btn f-s-b",to:"/order"},{default:C(()=>s[7]||(s[7]=[p("去结算")])),_:1})])],2)}}},ut=g(dt,[["__scopeId","data-v-c782fc15"]]),pt={class:"goods"},_t={key:1},ft={__name:"GoodsView",setup(e){const n=B(),l=q();return $(()=>{n.getGoods()}),(a,_)=>(i(),r("div",pt,[u(n).goods.length?(i(!0),r(x,{key:0},w(u(n).goods,(f,h)=>(i(),k(H,{key:f.id,product:f},null,8,["product"]))),128)):(i(),r("div",_t,"lists empty")),u(l).cart.length?(i(),k(ut,{key:2,class:"w cart"})):I("",!0)]))}},mt=g(ft,[["__scopeId","data-v-2d68c34a"]]);export{mt as default};
