import{u as V}from"./cart-BMSzBKGH.js";import{D as N}from"./Delivery-BWPUJMiS.js";import{_ as y,o as d,c as v,a as s,w as b,v as B,r as p,b as $,d as I,e as T,f as w,t as i,g as h,F as D,h as S,u as q,i as k,j as U,n as C,k as j,l as x,m as G,p as z}from"./index-2N_Ft0t2.js";import E from"./Goods-9O2YWuuC.js";import L from"./Vip-Bfsz6yOR.js";import O from"./Rank-cwJiOW-1.js";import P from"./Favorite-Pp3H6tck.js";import"./goods-0BODk0Lr.js";const R={},H={class:"search"},J={class:"clear",ref:"clear-ref"};function K(_,o){return d(),v("div",H,[o[2]||(o[2]=s("span",{class:"iconfont icon-sousuo_o"},null,-1)),b(s("input",{class:"ipt",type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>_.search=e),placeholder:"小黄杏美式"},null,512),[[B,_.search,void 0,{trim:!0}]]),s("div",J,o[1]||(o[1]=[s("span",{class:"iconfont icon-guanbi_o"},null,-1)]),512)])}const Q=y(R,[["render",K],["__scopeId","data-v-4696a3d0"]]),W={class:"cont"},X={class:"header"},Y={class:"all"},Z={for:"all"},ss=["value"],ts=["src"],os={class:"info"},es={class:"title"},ns={class:"sub-title"},as={class:"price-new"},ls={class:"price-old"},is={class:"oper"},cs=["onClick"],rs={class:"num"},us=["onClick"],ds={class:"cart-num f-s-s"},ps={class:"price"},vs={class:"total-price f-s-m f-b"},_s={class:"total-promotion f-s-s"},fs={__name:"Cart",setup(_){const o=p(!1),e=V(),a=p([...e.cart]),l=p(!0),c=p(0),f=p(0);let r=!0;$(a,()=>{a.value.length===e.cart.length?(l.value=!0,r=!0):(l.value=!1,r=!1),c.value=a.value.reduce((u,t)=>u+t.price*t.quantity*(1-t.discount),0),f.value=a.value.reduce((u,t)=>u+t.quantity,0)},{deep:!0,immediate:!0}),$(l,u=>{u?a.value=e.cart:r&&(a.value=[])});const g=()=>{e.clearCart(),a.value=[],l.value=!1},M=()=>{o.value=!1},A=()=>e.cart.reduce((u,t)=>u+t.price*t.discount*t.quantity,0);return I(()=>{console.log("cart loading",e.cart)}),(u,t)=>{const F=T("router-link");return d(),v("div",{class:C(["cart",{"show-cont-all":o.value}]),onClick:h(M,["self"])},[s("div",W,[s("header",X,[s("div",Y,[b(s("input",{type:"checkbox",id:"all","onUpdate:modelValue":t[0]||(t[0]=n=>l.value=n)},null,512),[[w,l.value]]),s("label",Z,"已选择商品（"+i(f.value)+"件）",1)]),s("button",{class:"clear",onClick:h(g,["stop"])},t[3]||(t[3]=[s("span",{class:"iconfont icon-shanchu_o"},null,-1),s("span",null,"清空购物车",-1)]))]),(d(!0),v(D,null,S(q(e).cart,(n,$s)=>(d(),v("div",{class:"item",key:n.id},[b(s("input",{type:"checkbox",name:"",id:"","onUpdate:modelValue":t[1]||(t[1]=m=>a.value=m),value:n},null,8,ss),[[w,a.value]]),s("img",{class:"img",src:`https://glpla.github.io/utils${n.img}`,alt:""},null,8,ts),s("div",os,[s("h4",es,i(n.name),1),s("div",ns,i(n.desc),1),s("div",null,[s("span",as,"¥"+i(n.price),1),s("span",ls,"¥"+i(n.priceOrignal),1)])]),s("div",is,[s("button",{class:"btn dec",onClick:m=>n.quantity--},"-",8,cs),s("span",rs,i(n.quantity),1),s("button",{class:"btn inc",onClick:m=>n.quantity++},"+",8,us)])]))),128))]),s("footer",null,[s("button",{class:"btn cart-left",onClick:t[2]||(t[2]=h(n=>o.value=!o.value,["stop"]))},[t[4]||(t[4]=s("span",{class:"iconfont icon-icon_ruixingkafei"},null,-1)),s("span",ds,i(f.value),1)]),s("div",ps,[s("div",null,[t[5]||(t[5]=s("span",null,"预计到手 ",-1)),s("span",vs,"¥"+i(c.value.toFixed(2)),1)]),s("div",_s,[t[6]||(t[6]=s("span",null,"已享受更多优惠，共减免 ",-1)),s("span",null,"¥"+i(A().toFixed(2)),1)])]),k(F,{class:"btn pay-btn f-s-b",to:"/order"},{default:U(()=>t[7]||(t[7]=[j("去结算")])),_:1})])],2)}}},ms=y(fs,[["__scopeId","data-v-5022364a"]]),hs={class:"menu-view"},bs={class:"header"},ks={class:"tab-box"},Cs=["onClick"],ys={class:"tab-cont"},gs={__name:"MenuView",setup(_){const o=V(),e=p("经典菜单"),a={经典菜单:E,会员卡:L,年度封神榜:O,我的常点:P};return(l,c)=>(d(),v("div",hs,[s("div",bs,[k(N),k(Q,{class:"search",onClick:c[0]||(c[0]=()=>l.$router.push("/search"))})]),s("div",{class:"loc-box",onClick:c[1]||(c[1]=()=>l.$router.push("/location"))},c[2]||(c[2]=[s("span",{class:"iconfont icon-didiandingwei_o"},null,-1),s("span",null,"桂林万达广场店 | 0.5km",-1),s("button",null,[s("span",{class:"iconfont icon-jiantou_liebiaoxiangyou_o"})],-1)])),s("div",ks,[(d(),v(D,null,S(a,(f,r)=>s("button",{key:r,class:C(["tab-item f-s-m",{active:e.value===r}]),onClick:g=>e.value=r},i(r),11,Cs)),64))]),s("div",ys,[(d(),x(G(a[e.value])))]),q(o).cart.length?(d(),x(ms,{key:0,class:C(["w cart",{pos:l.$route.meta.showNav}])},null,8,["class"])):z("",!0)]))}},Fs=y(gs,[["__scopeId","data-v-8f34f1d1"]]);export{Fs as default};
