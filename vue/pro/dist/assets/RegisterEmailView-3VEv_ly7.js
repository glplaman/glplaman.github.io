import{_ as p,r as v,c as f,a as s,w as t,a9 as n,v as g,f as i,g as w,l as x,p as b,x as V,o as k,k as c,a2 as u}from"./index-CGeLzcoA.js";import{_ as y}from"./xh-CIc_kDAM.js";const U={class:"register-email-view"},R={class:"item"},q={class:"item"},A={class:"item"},P={class:"item"},B={class:"item"},C={__name:"RegisterEmailView",setup(E){const d=c(),o=v({username:"",email:"",password:null,confirmPassword:null,isAgree:!1}),m=async()=>{if(o.value.isAgree===!1){alert("请先同意用户协议");return}if(o.value.password.length<6){alert("密码长度不足");return}if(o.value.password!==o.value.confirmPassword){alert("两次密码不一致");return}const{data:r,error:e}=await u.auth.signUp({email:o.value.email,password:o.value.password,options:{data:{name:o.value.username}}});if(e){console.log("register error",e);return}if(console.log("register ok",r),r.user){const{error:a}=await u.from("profile").insert({id:r.user.id,username:o.value.username});if(a)return console.log(a)}d.replace("/menu")};return(r,e)=>{const a=V("RouterLink");return k(),f("div",U,[e[13]||(e[13]=s("img",{src:y,alt:""},null,-1)),e[14]||(e[14]=s("h3",{class:"title f-b"},"广州新华学院",-1)),e[15]||(e[15]=s("p",{class:"greeting"},"欢迎回来",-1)),s("form",{onSubmit:w(m,["prevent"])},[s("div",R,[t(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>o.value.username=l),required:"",maxlength:"12",placeholder:"用户名，最多12位"},null,512),[[n,o.value.username,void 0,{trim:!0}]]),e[5]||(e[5]=s("span",{class:"iconfont icon-gerentouxiang_o"},null,-1))]),s("div",q,[t(s("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=l=>o.value.email=l),required:"",maxlength:"30",placeholder:"电子邮箱"},null,512),[[n,o.value.email,void 0,{trim:!0}]]),e[6]||(e[6]=s("span",{class:"iconfont icon-youjian_o"},null,-1))]),s("div",A,[t(s("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=l=>o.value.password=l),required:"",maxlength:"20",placeholder:"密码，最少6位"},null,512),[[n,o.value.password]]),e[7]||(e[7]=s("span",{class:"iconfont icon-suoding_o"},null,-1))]),s("div",P,[t(s("input",{type:"password","onUpdate:modelValue":e[3]||(e[3]=l=>o.value.confirmPassword=l),required:"",maxlength:"20",placeholder:"请确认密码"},null,512),[[n,o.value.confirmPassword]]),e[8]||(e[8]=s("span",{class:"iconfont icon-suoding_o"},null,-1))]),s("div",B,[s("label",null,[t(s("input",{class:"cb-custom",type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=l=>o.value.isAgree=l)},null,512),[[g,o.value.isAgree]]),e[9]||(e[9]=s("span",null,[i("我已经阅读并同意 "),s("a",{href:"#"},"《瑞幸咖啡用户协议》"),i(" 、"),s("a",{href:"#"},"《瑞幸咖啡隐私权政策》")],-1))])]),e[10]||(e[10]=s("div",{class:"item"},[s("button",{class:"submit-btn",type:"submit"},"注册")],-1))],32),s("span",null,[e[12]||(e[12]=i("已经拥有一个账户？请 ")),x(a,{class:"link",to:"/login-email"},{default:b(()=>e[11]||(e[11]=[i("登录")])),_:1})])])}}},_=p(C,[["__scopeId","data-v-0f2b74e7"]]);export{_ as default};
