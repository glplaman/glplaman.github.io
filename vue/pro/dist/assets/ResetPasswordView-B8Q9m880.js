import{r as n,c as d,a as e,w as f,h as c,a3 as p,t as y,q as _,o as v,b,u as g,Y as k}from"./index-B4DBLYEA.js";const q={class:"reset-password-view"},P={class:"reset-password-view"},V={class:"item"},x={class:"item"},U={key:0,class:"message"},h={__name:"ResetPasswordView",setup(B){const u=b(),m=g(),a=n(""),r=n(""),o=n(""),w=async()=>{if(a.value!==r.value){o.value="新密码和确认密码不一致";return}const l=u.query.access_token,s=u.query.email;if(!l||!s){o.value="无效的重置链接";return}try{const{data:t,error:i}=await k.auth.updateUser({password:a.value},{accessToken:l});i?(console.error("Error updating password:",i),o.value="重置密码失败，请重试。"):(console.log("Password updated successfully:",t),o.value="密码重置成功，请重新登录。",m.replace("/login"))}catch(t){console.error("Unexpected error:",t),o.value="发生意外错误，请稍后再试。"}};return(l,s)=>(v(),d("div",q,[e("div",P,[s[5]||(s[5]=e("h3",{class:"title f-b"},"重置密码",-1)),e("form",{onSubmit:f(w,["prevent"])},[e("div",V,[c(e("input",{type:"password","onUpdate:modelValue":s[0]||(s[0]=t=>a.value=t),required:"",placeholder:"新密码"},null,512),[[p,a.value]]),s[2]||(s[2]=e("span",{class:"iconfont icon-suoding_o"},null,-1))]),e("div",x,[c(e("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=t=>r.value=t),required:"",placeholder:"确认新密码"},null,512),[[p,r.value]]),s[3]||(s[3]=e("span",{class:"iconfont icon-suoding_o"},null,-1))]),s[4]||(s[4]=e("div",{class:"item"},[e("button",{class:"submit-btn",type:"submit"},"重置密码")],-1))],32),o.value?(v(),d("p",U,y(o.value),1)):_("",!0)])]))}};export{h as default};
