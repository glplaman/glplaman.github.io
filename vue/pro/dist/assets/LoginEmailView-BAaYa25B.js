import{_ as v,r as g,c as f,a as s,d as i,a3 as r,v as w,i as a,e as c,g as b,h as x,j as k,o as V,W as y,V as n}from"./index-DutQLsQK.js";import{_}from"./xh-CIc_kDAM.js";const A={class:"login-view"},C={class:"item"},E={class:"item"},L={class:"item"},P={__name:"LoginEmailView",setup(B){const u=y(),o=g({email:"",password:"",isAgree:!1}),d=async()=>{if(!o.value.isAgree){alert("请先同意用户协议");return}console.log("user",o.value);const{data:t,error:e}=await n.auth.signInWithPassword({email:o.value.email,password:o.value.password});if(e)return console.log("login fail",e);console.log("login ok",t),u.replace("/menu")},m=async()=>{if(console.log("retrivePassword"),o.value.email===""){alert("请输入邮箱");return}let{data:t,error:e}=await n.auth.resetPasswordForEmail(o.value.email);e?(console.log(e),alert("发送邮件失败")):(console.log(t),alert("已发送邮件，请查收"))};return(t,e)=>{const p=k("RouterLink");return V(),f("div",A,[e[9]||(e[9]=s("img",{src:_,alt:""},null,-1)),e[10]||(e[10]=s("h3",{class:"title f-b"},"广州新华学院",-1)),e[11]||(e[11]=s("p",{class:"greeting"},"欢迎回来",-1)),s("form",{onSubmit:c(d,["prevent"])},[s("div",C,[i(s("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=l=>o.value.email=l),required:"",maxlength:"30",placeholder:"电子邮件"},null,512),[[r,o.value.email,void 0,{trim:!0}]]),e[3]||(e[3]=s("span",{class:"iconfont icon-youjian_o"},null,-1))]),s("div",E,[i(s("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=l=>o.value.password=l),required:"",maxlength:"20",placeholder:"密码，最少6位"},null,512),[[r,o.value.password,void 0,{trim:!0}]]),e[4]||(e[4]=s("span",{class:"iconfont icon-suoding_o"},null,-1))]),s("div",L,[s("label",null,[i(s("input",{class:"cb-custom",type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=l=>o.value.isAgree=l)},null,512),[[w,o.value.isAgree]]),e[5]||(e[5]=s("span",null,[a("我已经阅读并同意 "),s("a",{href:"#"},"《瑞幸咖啡用户协议》"),a(" 、"),s("a",{href:"#"},"《瑞幸咖啡隐私权政策》")],-1))])]),e[6]||(e[6]=s("div",{class:"item"},[s("button",{class:"submit-btn",type:"submit"},"登录")],-1))],32),s("span",{class:"warn",onClick:m},"忘记密码？"),s("span",null,[e[8]||(e[8]=a("还没有账户？请 ")),b(p,{class:"link",to:"/register-email"},{default:x(()=>e[7]||(e[7]=[a("注册")])),_:1})])])}}},R=v(P,[["__scopeId","data-v-80891646"]]);export{R as default};
