import{u as $}from"./cart-DvPPrN6v.js";import{S as B}from"./Switch-CW4IaBPL.js";import{_ as k,o as p,c as f,a as s,r as c,w as C,b as x,d as g,v as y,t as l,e as b,F,f as j,u as V,g as _,h as I,i as T,n as S,j as q,k as R,l as U,m as z}from"./index-GjNbNo_D.js";import{T as A}from"./Tabbar-BU3iX9U7.js";/* empty css                                                               */const E={},G={class:"search"},L={class:"clear",ref:"clear-ref"};function O(w,e){return p(),f("div",G,[e[1]||(e[1]=s("span",{class:"iconfont icon-sousuo_o"},null,-1)),e[2]||(e[2]=s("input",{class:"ipt",type:"text",placeholder:"小黄杏美式"},null,-1)),s("div",L,e[0]||(e[0]=[s("span",{class:"iconfont icon-guanbi_o"},null,-1)]),512)])}const P=k(E,[["render",O],["__scopeId","data-v-2c873a0a"]]),H={class:"cont"},J={class:"header"},K={class:"all"},Q={for:"all"},W=["value"],X=["src"],Y={class:"info"},Z={class:"title"},ss={class:"sub-title"},ts={class:"price-new"},es={class:"price-old"},ns={class:"oper"},os=["onClick"],as={class:"num"},ls=["onClick"],is={class:"cart-num f-s-s"},cs={class:"price"},rs={class:"total-price f-s-m f-b"},us={class:"total-promotion f-s-s"},ds={__name:"Cart",setup(w){const e=c(!1),i=$(),a=c([...i.cart]),r=c(!0),d=c(0),o=c(0);let v=!0;C(a,()=>{a.value.length===i.cart.length?(r.value=!0,v=!0):(r.value=!1,v=!1),d.value=a.value.reduce((u,t)=>u+t.price*t.quantity*(1-t.discount),0),o.value=a.value.reduce((u,t)=>u+t.quantity,0)},{deep:!0,immediate:!0}),C(r,u=>{u?a.value=i.cart:v&&(a.value=[])});const m=()=>{i.clearCart(),a.value=[],r.value=!1},D=()=>{e.value=!1},M=()=>i.cart.reduce((u,t)=>u+t.price*t.discount*t.quantity,0);return x(()=>{console.log("cart loading",i.cart)}),(u,t)=>{const N=q("router-link");return p(),f("div",{class:S(["cart",{"show-cont-all":e.value}]),onClick:b(D,["self"])},[s("div",H,[s("header",J,[s("div",K,[g(s("input",{type:"checkbox",id:"all","onUpdate:modelValue":t[0]||(t[0]=n=>r.value=n)},null,512),[[y,r.value]]),s("label",Q,"已选择商品（"+l(o.value)+"件）",1)]),s("button",{class:"clear",onClick:b(m,["stop"])},t[3]||(t[3]=[s("span",{class:"iconfont icon-shanchu_o"},null,-1),s("span",null,"清空购物车",-1)]))]),(p(!0),f(F,null,j(V(i).cart,(n,ms)=>(p(),f("div",{class:"item",key:n.id},[g(s("input",{type:"checkbox",name:"",id:"","onUpdate:modelValue":t[1]||(t[1]=h=>a.value=h),value:n},null,8,W),[[y,a.value]]),s("img",{class:"img",src:`https://glpla.github.io/utils${n.img}`,alt:""},null,8,X),s("div",Y,[s("h4",Z,l(n.name),1),s("div",ss,l(n.desc),1),s("div",null,[s("span",ts,"¥"+l(n.price),1),s("span",es,"¥"+l(n.priceOrignal),1)])]),s("div",ns,[s("button",{class:"btn dec",onClick:h=>n.quantity--},"-",8,os),s("span",as,l(n.quantity),1),s("button",{class:"btn inc",onClick:h=>n.quantity++},"+",8,ls)])]))),128))]),s("footer",null,[s("button",{class:"btn cart-left",onClick:t[2]||(t[2]=b(n=>e.value=!e.value,["stop"]))},[t[4]||(t[4]=s("span",{class:"iconfont icon-icon_ruixingkafei"},null,-1)),s("span",is,l(o.value),1)]),s("div",cs,[s("div",null,[t[5]||(t[5]=s("span",null,"预计到手 ",-1)),s("span",rs,"¥"+l(d.value.toFixed(2)),1)]),s("div",us,[t[6]||(t[6]=s("span",null,"已享受更多优惠，共减免 ",-1)),s("span",null,"¥"+l(M().toFixed(2)),1)])]),_(N,{class:"btn pay-btn f-s-b",to:"/order"},{default:I(()=>t[7]||(t[7]=[T("去结算")])),_:1})])],2)}}},ps=k(ds,[["__scopeId","data-v-5022364a"]]),vs={class:"menu-view p-b-10"},_s={class:"header"},fs={__name:"MenuView",setup(w){const e=$();z("axios");const i=c({});c({}),c({}),c({});const a=[{ind:0,title:"经典菜单",path:"/menu",keyword:"classic"},{ind:1,title:"会员卡",path:"/menu/vip",keyword:"member"},{ind:2,title:"年度封神榜",path:"/menu/rank",keyword:"rank"},{ind:3,title:"我的常点",path:"/menu/favorite",keyword:"favor"}],r=c([{title:"自提"},{title:"外送"}]);return x(()=>{}),(d,o)=>{const v=q("RouterView");return p(),f("div",vs,[s("div",_s,[_(B,{switchs:r.value},null,8,["switchs"]),_(P,{class:"search",onClick:o[0]||(o[0]=m=>d.$router.push("/search"))})]),s("div",{class:"loc-box",onClick:o[1]||(o[1]=m=>d.$router.push("/location"))},[o[2]||(o[2]=s("span",{class:"iconfont icon-didiandingwei_o"},null,-1)),s("span",null,l(i.value.title)+" | "+l(i.value.distance)+"m",1),o[3]||(o[3]=s("button",null,[s("span",{class:"iconfont icon-jiantou_liebiaoxiangyou_o"})],-1))]),_(A,{tabs:a}),_(v,{class:"p-1"}),V(e).cart.length?(p(),R(ps,{key:0,class:S(["w cart",{pos:d.$route.meta.showNav}])},null,8,["class"])):U("",!0)])}}},gs=k(fs,[["__scopeId","data-v-bd1599ca"]]);export{gs as default};
