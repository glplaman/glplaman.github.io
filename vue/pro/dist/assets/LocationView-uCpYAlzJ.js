import{_ as x,r as a,j as v,o as g,c as m,g as _,h as $,b as z,a as e,e as f,n as k,F,f as L,m as R,t as p,i as w}from"./index-28TNAjlO.js";import{S as Z}from"./Switch-BTbkfURh.js";/* empty css                                                               */const b="YI6BZ-MTZW4-HYFUC-F42DP-MK7MQ-3GBRU",D="瑞幸咖啡",V=1e3,H="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20261.76%20226.69'%3e%3cpath%20d='M161.096.001l-30.225%2052.351L100.647.001H-.005l130.877%20226.688L261.749.001z'%20fill='%2341b883'/%3e%3cpath%20d='M161.096.001l-30.225%2052.351L100.647.001H52.346l78.526%20136.01L209.398.001z'%20fill='%2334495e'/%3e%3c/svg%3e",N={__name:"Map",setup(I){const n=a(null),s=a(null),l=a({lat:23.02067,lng:113.75179}),i=a(10),u=a({scale:!1,zoom:!1,rotation:!1}),y=d=>{console.log("map dragend"),console.log(d);const r=n.value.map.getCenter();console.log("New center:",r.lat,r.lng),l.value={lat:r.lat,lng:r.lng}},c=d=>{console.log("marker click"),console.log(d)},t=a([{styleId:"marker",position:{lat:23.021058,lng:113.74849}},{styleId:"marker",position:{lat:23.021181,lng:113.75628}},{styleId:"marker",position:{lat:23.013007,lng:113.753635}},{styleId:"marker",position:{lat:23.014615,lng:113.745974}},{styleId:"marker",position:{lat:23.021912,lng:113.742777}},{styleId:"marker",position:{lat:23.015522,lng:113.744446}},{styleId:"marker",position:{lat:23.01946,lng:113.742393}},{styleId:"marker",position:{lat:23.0126,lng:113.756453}},{styleId:"marker",position:{lat:23.0129,lng:113.74591}},{styleId:"marker",position:{lat:23.025293,lng:113.761507}}]),o=a({marker:{width:20,height:25,anchor:{x:10,y:30},src:H}}),h=a({minZoom:5,maxZoom:15}),M=()=>{console.log("map",n.value),console.log("marker",s.value)};return a([{id:"1765361061766493899",title:"瑞幸咖啡(胜和广场店)",address:"广东省东莞市胜和路胜和商住广场A座一层大堂",tel:"",category:"娱乐休闲:咖啡厅",type:0,location:{lat:23.021058,lng:113.74849},_distance:341.19,ad_info:{adcode:441900,province:"广东省",city:"东莞市",district:"东莞市"}},{id:"3372697213968464134",title:"瑞幸咖啡(盈锋中心店)",address:"广东省东莞市胜和体育路26号盈锋中心1栋一层大堂",tel:"",category:"娱乐休闲:咖啡厅",type:0,location:{lat:23.021181,lng:113.75628},_distance:463.13,ad_info:{adcode:441900,province:"广东省",city:"东莞市",district:"东莞市"}},{id:"11946679672493798412",title:"瑞幸咖啡(尚书银座商务公寓店)",address:"广东省东莞市东莞市道鸿福路100号尚书银座1幢116室1号",tel:"",category:"娱乐休闲:咖啡厅",type:0,location:{lat:23.013007,lng:113.753635},_distance:873.67,ad_info:{adcode:441900,province:"广东省",city:"东莞市",district:"东莞市"}},{id:"3190288109658265820",title:"瑞幸咖啡(南城印象汇店)",address:"广东省东莞市鸿福路90号东莞南城印象汇一层1127号",tel:"",category:"娱乐休闲:咖啡厅",type:0,location:{lat:23.014615,lng:113.745974},_distance:900.1,ad_info:{adcode:441900,province:"广东省",city:"东莞市",district:"东莞市"}},{id:"6547077330904273153",title:"瑞幸咖啡(创意产业中心店)",address:"广东省东莞市莞太路34-A区3号楼",tel:"4000100100",category:"娱乐休闲:咖啡厅",type:0,location:{lat:23.021912,lng:113.742777},_distance:934.21,ad_info:{adcode:441900,province:"广东省",city:"东莞市",district:"东莞市"}},{id:"1185483303661290556",title:"瑞幸咖啡(南城莱蒙店)",address:"广东省东莞市鸿福路88号莱蒙商业中心一层104号",tel:"",category:"娱乐休闲:咖啡厅",type:0,location:{lat:23.015522,lng:113.744446},_distance:946.07,ad_info:{adcode:441900,province:"广东省",city:"东莞市",district:"东莞市"}},{id:"14910365715777641222",title:"瑞幸咖啡",address:"广东省东莞市银丰路2号嘉荣购物广场(银丰店)",tel:"",category:"娱乐休闲:咖啡厅",type:0,location:{lat:23.01946,lng:113.742393},_distance:972.38,ad_info:{adcode:441900,province:"广东省",city:"东莞市",district:"东莞市"}},{id:"2049493828898145559",title:"瑞幸咖啡(南城中盛商务大厦店)",address:"广东省东莞市东莞市道中盛商务大厦108号1栋一层107-108室",tel:"",category:"娱乐休闲:咖啡厅",type:0,location:{lat:23.0126,lng:113.756453},_distance:1017.42,ad_info:{adcode:441900,province:"广东省",city:"东莞市",district:"东莞市"}},{id:"15574718306709915943",title:"瑞幸咖啡(华凯广场店)",address:"广东省东莞市元美路华凯广场B幢一层大堂",tel:"",category:"娱乐休闲:咖啡厅",type:0,location:{lat:23.0129,lng:113.74591},_distance:1054.26,ad_info:{adcode:441900,province:"广东省",city:"东莞市",district:"东莞市"}},{id:"8685746581155527282",title:"瑞幸咖啡(汇峰中心G栋大堂店)",address:"广东省东莞市东莞市道汇峰路1号汇峰中心1号楼231室底商",tel:"",category:"娱乐休闲:咖啡厅",type:0,location:{lat:23.025293,lng:113.761507},_distance:1120.27,ad_info:{adcode:441900,province:"广东省",city:"东莞市",district:"东莞市"}}]),(d,r)=>{const C=v("tlbs-multi-marker"),B=v("tlbs-map");return g(),m("div",null,[_(B,{class:"map",ref_key:"mapRef",ref:n,"api-key":"YI6BZ-MTZW4-HYFUC-F42DP-MK7MQ-3GBRU",center:l.value,zoom:i.value,control:u.value,onMap_inited:M,onDragend:y},{default:$(()=>[_(C,{ref_key:"markerRef",ref:s,geometries:t.value,styles:o.value,options:h.value,onClick:c},null,8,["geometries","styles","options"])]),_:1},8,["center","zoom","control"])])}}},T=x(N,[["__scopeId","data-v-225a8386"]]),U={class:"location-view"},Y={class:"tab-box"},j={class:"list"},G={class:"m-b-1"},K={class:"desc"},S={class:"desc"},A={class:"info"},E={__name:"LocationView",setup(I){const n=R("axios"),s=a(0),l=a([]),i=a({lat:23.02067,lng:113.75179}),u=a([]),y=a([{title:"门店自提"},{title:"送货上门"}]);return z(()=>{n.get(`/map-api/ws/location/v1/ip?ip=&key=${b}`).then(c=>{console.log("res",c),i.value=c.data.result.location,n.get(`/map-api/ws/place/v1/search?boundary=nearby(${i.value.lat},${i.value.lng},${V})&keyword=${D}&page_size=10&page_index=1&key=${b}`).then(t=>{console.log("res",t.data.data),l.value=t.data.data.map(o=>({...o,title:o.title.replace(/瑞幸咖啡\(/,"").replace(/\)/,""),open:"08:30 - 21:30"})),u.value=t.data.data.map(o=>({styleId:"marker",position:o.location,content:o.title}))})})}),(c,t)=>(g(),m("div",U,[e("header",null,[_(Z,{switchs:y.value},null,8,["switchs"]),_(T),e("div",Y,[e("button",{onClick:t[0]||(t[0]=f(o=>s.value=0,["stop"]))},[e("h3",{class:k(["tab-item",{active:s.value===0}])},"附近",2)]),e("button",{onClick:t[1]||(t[1]=f(o=>s.value=1,["stop"]))},[e("h3",{class:k(["tab-item",{active:s.value===1}])},"常用门店",2)])])]),e("div",j,[(g(!0),m(F,null,L(l.value,o=>(g(),m("div",{class:"item",key:o},[e("h4",G,p(o.title),1),e("div",K,[t[2]||(t[2]=e("span",{class:"iconfont icon-ditu_dingwei_o f-s-m"},null,-1)),e("p",null,"距您"+p(o._distance.toFixed(0))+"m | "+p(o.address),1)]),e("div",S,[t[6]||(t[6]=e("span",{class:"iconfont icon-shijian_o f-s-m"},null,-1)),e("p",A,[w(p(o.open)+" ",1),t[3]||(t[3]=e("span",null,"打样",-1)),t[4]||(t[4]=w()),t[5]||(t[5]=e("span",null,"常用门店",-1))])]),t[7]||(t[7]=e("button",null,[e("span",{class:"iconfont icon-guanyu_o about f-s-b"})],-1))]))),128))])]))}},q=x(E,[["__scopeId","data-v-7e4b4595"]]);export{q as default};
