import{_ as h,g as w,r as q,o as i,c as r,a as t,f as v,t as o,b as S,w as D,h as F,e as y,i as g,u,F as b,j as C,n as G,k,l as V}from"./index-MQkupMAx.js";import{u as $,a as I}from"./goods-Bvyu_09O.js";const B={class:"goods-item"},N=["src"],O={class:"info"},j={class:"title"},M={class:"flavour"},P={class:"desc"},z={class:"price"},E={class:"price-inner"},L={class:"price-discount"},Q={class:"quantity"},T={__name:"GoodsItem",props:{product:{type:Object,default:()=>{}}},setup(e){const n=w(()=>l=>(l.price*(1-l.discount)).toFixed(2));return(l,a)=>{const _=q("router-link");return i(),r("div",B,[t("img",{class:"img",src:"https://glpla.github.io/utils"+e.product.img,alt:""},null,8,N),t("div",O,[t("h4",j,[v(o(e.product.name)+" ",1),t("span",M,o(e.product.flavour),1)]),t("div",P,o(e.product.desc),1),t("div",z,[t("span",null,"¥"+o(e.product.price),1),t("span",E,[a[0]||(a[0]=v(" (市场价")),t("span",null,"¥"+o(e.product.priceOrignal),1),a[1]||(a[1]=v(")"))])]),t("div",L,[a[2]||(a[2]=v("预估到手 ")),t("span",null,"¥"+o(n.value(e.product)),1)])]),S(_,{class:"btn add-btn",to:"/details/"+e.product.id},{default:D(()=>[a[3]||(a[3]=t("span",{class:"iconfont icon-gouwuche_o"},null,-1)),t("span",Q,o(e.product.quantity),1)]),_:1},8,["to"])])}}},A=h(T,[["__scopeId","data-v-a1aa5040"]]),H={class:"cont"},J={class:"header"},K={class:"all"},R={for:"all"},U=["src"],W={class:"info"},X={class:"title"},Y={class:"sub-title"},Z={class:"price-new"},tt={class:"price-old"},st={class:"oper"},ot=["onClick"],nt={class:"num"},et=["onClick"],at={class:"cart-num"},ct={class:"price"},lt={class:"total-price"},it={class:"total-promotion"},rt={__name:"Cart",setup(e){const n=$(),l=F(!1),a=()=>{l.value=!l.value},_=()=>{l.value=!1},p=()=>n.cart.reduce((d,s)=>d+s.price*(1-s.discount)*s.quantity,0),f=()=>n.cart.reduce((d,s)=>d+s.price*s.discount*s.quantity,0),m=()=>n.cart.reduce((d,s)=>d+s.quantity,0);return y(()=>{console.log("cart loading",n.cart)}),(d,s)=>(i(),r("div",{class:G(["cart",{"show-cont-all":l.value}]),onClick:g(_,["self"])},[t("div",H,[t("header",J,[t("div",K,[s[1]||(s[1]=t("input",{type:"checkbox",id:"all"},null,-1)),t("label",R,"已选择商品（"+o(m())+"件）",1)]),t("div",{class:"clear",onClick:s[0]||(s[0]=g((...c)=>u(n).clearCart&&u(n).clearCart(...c),["stop"]))},s[2]||(s[2]=[t("span",{class:"iconfont icon-shanchu_o"},null,-1),t("span",null,"清空购物车",-1)]))]),(i(!0),r(b,null,C(u(n).cart,(c,vt)=>(i(),r("div",{class:"item",key:c.id},[s[3]||(s[3]=t("input",{type:"checkbox",name:"",id:""},null,-1)),t("img",{class:"img",src:`https://glpla.github.io/utils${c.img}`,alt:""},null,8,U),t("div",W,[t("h4",X,o(c.name),1),t("div",Y,o(c.desc),1),t("div",null,[t("span",Z,"¥"+o(c.price),1),t("span",tt,"¥"+o(c.priceOrignal),1)])]),t("div",st,[t("button",{class:"btn dec",onClick:x=>c.quantity--},"-",8,ot),t("span",nt,o(c.quantity),1),t("button",{class:"btn inc",onClick:x=>c.quantity++},"+",8,et)])]))),128))]),t("footer",null,[t("button",{class:"btn cart-left",onClick:g(a,["stop"])},[s[4]||(s[4]=t("span",{class:"iconfont icon-gouwuche_o"},null,-1)),t("span",at,o(m()),1)]),t("div",ct,[t("div",null,[s[5]||(s[5]=t("span",null,"预计到手 ",-1)),t("span",lt,"¥"+o(p().toFixed(2)),1)]),t("div",it,[s[6]||(s[6]=t("span",null,"已享受更多优惠，共减免 ",-1)),t("span",null,"¥"+o(p().toFixed(2))+" - ¥"+o(f().toFixed(2)),1)])]),s[7]||(s[7]=t("div",{class:"btn pay-btn"},"去结算",-1))])],2))}},dt=h(rt,[["__scopeId","data-v-090d2c3b"]]),ut={class:"goods"},pt={key:1},_t={__name:"GoodsView",setup(e){const n=I(),l=$();return y(()=>{n.getGoods()}),(a,_)=>(i(),r("div",ut,[u(n).goods.length?(i(!0),r(b,{key:0},C(u(n).goods,(p,f)=>(i(),k(A,{key:p.id,product:p},null,8,["product"]))),128)):(i(),r("div",pt,"lists empty")),u(l).cart.length?(i(),k(dt,{key:2,class:"w cart"})):V("",!0)]))}},ft=h(_t,[["__scopeId","data-v-618344f9"]]);export{ft as default};
