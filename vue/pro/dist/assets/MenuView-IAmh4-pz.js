import{u as w}from"./cart-BpJFCE_t.js";import{_ as x,r as d,w as k,o as N,a as B,b as r,c as p,d as s,e as C,v as g,t as n,f as m,F as $,g as V,u as D,h as j,i as G,n as h,j as I,k as y,l as T,m as U}from"./index-CM7mMyiv.js";import z from"./GoodsView-DpypX2c8.js";import E from"./VipView-5WzP5D70.js";import L from"./RankView-DlrYhhZa.js";import O from"./FavoriteView-BhtwwYwn.js";import"./goods-CBBdbziC.js";const P={class:"cont"},R={class:"header"},H={class:"all"},J={for:"all"},K=["value"],Q=["src"],W={class:"info"},X={class:"title"},Y={class:"sub-title"},Z={class:"price-new"},ss={class:"price-old"},ts={class:"oper"},es=["onClick"],os={class:"num"},as=["onClick"],ns={class:"cart-num f-s-s"},ls={class:"price"},cs={class:"total-price f-s-m f-b"},is={class:"total-promotion f-s-s"},rs={__name:"Cart",setup(q){const u=d(!1),a=w(),e=d([...a.cart]),l=d(!0),_=d(0),v=d(0);let c=!0;k(e,()=>{e.value.length===a.cart.length?(l.value=!0,c=!0):(l.value=!1,c=!1),_.value=e.value.reduce((i,t)=>i+t.price*t.quantity,0),v.value=e.value.reduce((i,t)=>i+t.quantity,0)},{deep:!0,immediate:!0}),k(l,i=>{i?e.value=a.cart:c&&(e.value=[])});const b=()=>{a.clearCart(),e.value=[],l.value=!1},S=()=>{u.value=!u.value},A=()=>{u.value=!1},F=()=>a.cart.reduce((i,t)=>i+t.price*t.discount*t.quantity,0);return N(()=>{console.log("cart loading",a.cart)}),(i,t)=>{const M=B("router-link");return r(),p("div",{class:h(["cart",{"show-cont-all":u.value}]),onClick:m(A,["self"])},[s("div",P,[s("header",R,[s("div",H,[C(s("input",{type:"checkbox",id:"all","onUpdate:modelValue":t[0]||(t[0]=o=>l.value=o)},null,512),[[g,l.value]]),s("label",J,"已选择商品（"+n(v.value)+"件）",1)]),s("button",{class:"clear",onClick:m(b,["stop"])},t[2]||(t[2]=[s("span",{class:"iconfont icon-shanchu_o"},null,-1),s("span",null,"清空购物车",-1)]))]),(r(!0),p($,null,V(D(a).cart,(o,ms)=>(r(),p("div",{class:"item",key:o.id},[C(s("input",{type:"checkbox",name:"",id:"","onUpdate:modelValue":t[1]||(t[1]=f=>e.value=f),value:o},null,8,K),[[g,e.value]]),s("img",{class:"img",src:`https://glpla.github.io/utils${o.img}`,alt:""},null,8,Q),s("div",W,[s("h4",X,n(o.name),1),s("div",Y,n(o.desc),1),s("div",null,[s("span",Z,"¥"+n(o.price),1),s("span",ss,"¥"+n(o.priceOrignal),1)])]),s("div",ts,[s("button",{class:"btn dec",onClick:f=>o.quantity--},"-",8,es),s("span",os,n(o.quantity),1),s("button",{class:"btn inc",onClick:f=>o.quantity++},"+",8,as)])]))),128))]),s("footer",null,[s("button",{class:"btn cart-left",onClick:m(S,["stop"])},[t[3]||(t[3]=s("span",{class:"iconfont icon-icon_ruixingkafei"},null,-1)),s("span",ns,n(v.value),1)]),s("div",ls,[s("div",null,[t[4]||(t[4]=s("span",null,"预计到手 ",-1)),s("span",cs,"¥"+n(_.value.toFixed(2)),1)]),s("div",is,[t[5]||(t[5]=s("span",null,"已享受更多优惠，共减免 ",-1)),s("span",null,"¥"+n(F().toFixed(2)),1)])]),j(M,{class:"btn pay-btn f-s-b",to:"/order"},{default:G(()=>t[6]||(t[6]=[I("去结算")])),_:1})])],2)}}},us=x(rs,[["__scopeId","data-v-dc8b35a5"]]),ds={class:"menu-view"},_s={class:"tab-box"},ps=["onClick"],vs={class:"tab-cont"},fs={__name:"MenuView",setup(q){const u=w(),a=d("经典菜单"),e={经典菜单:z,会员卡:E,年度封神榜:L,我的常点:O};return(l,_)=>(r(),p("div",ds,[_[0]||(_[0]=s("div",{class:"loc-box"},[s("span",{class:"iconfont icon-didiandingwei_o"}),s("span",null,"桂林万达广场店 | 0.5km"),s("span",{class:"iconfont icon-jiantou_liebiaoxiangyou_o"})],-1)),s("div",_s,[(r(),p($,null,V(e,(v,c)=>s("button",{key:c,class:h(["tab-item f-s-m",{active:a.value===c}]),onClick:b=>a.value=c},n(c),11,ps)),64))]),s("div",vs,[(r(),y(T(e[a.value])))]),D(u).cart.length?(r(),y(us,{key:0,class:h(["w cart",{pos:l.$route.meta.showNav}])},null,8,["class"])):U("",!0)]))}},xs=x(fs,[["__scopeId","data-v-e479bc0c"]]);export{xs as default};
